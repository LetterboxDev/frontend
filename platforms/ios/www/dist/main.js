angular.module("letterbox.controllers",[]),angular.module("letterbox.directives",[]),angular.module("letterbox.services",[]),angular.module("letterbox",["ionic","ionic.service.core","letterbox.controllers","letterbox.directives","letterbox.services","facebook","angularMoment","ui.slider","monospaced.elastic","ionic.ion.imageCacheFactory","ngCordova","ngResource","ngIOS9UIWebViewPatch"]).constant("VERSION",{major:0,minor:2,revision:0}).run(["$ionicPlatform","$rootScope","eventbus",function(e,t,o){t.$on("$stateChangeError",console.log.bind(console)),e.ready(function(){if(window.cordova){var e=new Ionic.Push({pluginConfig:{android:{icon:"notification",iconColor:"#fa5c4f"}}});e.register(function(e){window.localStorage.setItem("pushToken",e.token),o.call("pushTokenSet")})}"undefined"!=typeof navigator.splashscreen&&navigator.splashscreen.hide(),window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&"android"==window.cordova.platformId?window.StatusBar.backgroundColorByHexString("#C84A3F"):window.StatusBar&&StatusBar.styleDefault()})}]).config(["FacebookProvider",function(e){e.init("1674828996062928")}]),angular.module("letterbox").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("login",{url:"/login",templateUrl:"templates/login.html",controller:"OnboardingCtrl"}).state("onboarding",{url:"/onboarding/:onboardStep",templateUrl:function(e){return"templates/onboard"+e.onboardStep+".html"},controller:"OnboardingCtrl"}).state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AppCtrl"}).state("app.home",{url:"/home",views:{menuContent:{templateUrl:"templates/home.html",controller:"HomeCtrl"}}}).state("app.letter",{url:"/letter",views:{menuContent:{templateUrl:"templates/letter.html",controller:"LetterCtrl"}}}).state("app.chats",{url:"/chats",views:{menuContent:{templateUrl:"templates/chats.html",controller:"ChatsCtrl"}}}).state("app.chat",{url:"/chats/:chatId",views:{menuContent:{templateUrl:"templates/chat.html",controller:"ChatCtrl"}}}).state("app.notifications",{url:"/notifications",views:{menuContent:{templateUrl:"templates/notifications.html",controller:"NotificationsCtrl"}}}).state("app.categories",{url:"/categories",views:{menuContent:{templateUrl:"templates/categories.html",controller:"CategoriesCtrl"}}}).state("app.deals",{url:"/deals/:category",views:{menuContent:{templateUrl:"templates/deals.html",controller:"DealsCtrl"}}}).state("app.deal",{url:"/deal/:dealId/:roomHash",views:{menuContent:{templateUrl:"templates/deal.html",controller:"DealCtrl"}},cache:!1}).state("app.liked-deals",{url:"/liked-deals",views:{menuContent:{templateUrl:"templates/liked-deals.html",controller:"LikedDealsCtrl"}}}).state("app.response",{url:"/responses/:responseId:isExistingChat",views:{menuContent:{templateUrl:"templates/response.html",controller:"ResponseCtrl"}}}).state("app.profile",{url:"/profile",views:{menuContent:{templateUrl:"templates/profile.html",controller:"ProfileCtrl"}}}).state("app.other-profile",{url:"/other-profile/:userId",views:{menuContent:{templateUrl:"templates/other-profile.html",controller:"OtherProfileCtrl"}}}).state("app.other-letter",{url:"/other-letter/:roomHash",views:{menuContent:{templateUrl:"templates/other-letter.html",controller:"OtherLetterCtrl"}}}).state("app.settings",{url:"/settings",views:{menuContent:{templateUrl:"templates/settings.html",controller:"SettingsCtrl"}}});var o="/login";window.localStorage.getItem("token")&&(o="/app/home"),t.otherwise(o)}]),angular.module("letterbox.controllers").controller("AppCtrl",["$scope","$state","$location","$ionicPopup","$ionicLoading","eventbus","socket","LocationService","LocalNotificationService","BackgroundService","DbService","RoomsService","ChatService","AuthService","PushService","ChromeNotifService","VibrateService",function(e,t,o,n,r,i,a,s,c,l,u,d,m,f,p,g,h){e.username=window.localStorage.getItem("firstName")?window.localStorage.getItem("firstName"):"",i.registerListener("loginCompleted",u.init),i.registerListener("loginCompleted",a.init),i.registerListener("loginCompleted",s.updateLocation),i.registerListener("loginCompleted",p.updatePushToken),i.registerListener("loginCompleted",function(){e.username=window.localStorage.getItem("firstName")}),i.registerListener("dbInitialized",m.init),i.registerListener("dbInitialized",m.sync),i.registerListener("socketConnected",m.sync),i.registerListener("pushTokenSet",p.updatePushToken),i.registerListener("roomCreated",function(e){d.updateRooms(),n.confirm({title:e.approverName+" just started a chat with you!",template:"Start chatting?",cssClass:"popup-alert"}).then(function(o){o&&t.go("app.chat",{chatId:e.room.hash})})}),i.registerListener("letterReceived",function(e){n.confirm({title:"New Letter Received!",template:"Proceed to notifications?",cssClass:"popup-alert"}).then(function(e){e&&t.go("app.notifications")})}),window.addEventListener("focus",function(e){i.call("windowFocused")},!1),e.showLoading=function(){r.show({template:'<ion-spinner icon="ripple"></ion-spinner>'})},e.hideLoading=function(){r.hide()},window.localStorage.getItem("token")?(e.showLoading(),f.renewToken().then(function(){e.hideLoading(),i.call("loginCompleted"),"false"===window.localStorage.getItem("isRegistered")&&t.go("onboarding",{onboardStep:0})},function(){e.hideLoading();var o=n.alert({title:"Authentication Error!",template:"Please log in again",cssClass:"popup-alert"});o.then(function(e){t.go("login")})})):t.go("login"),e.currentPage=function(){return o.path().split("/")[2]}}]),angular.module("letterbox.controllers").controller("CardsCtrl",["$scope","$state","$element","$timeout","$ImageCacheFactory","$ionicHistory","eventbus","backend","letterService","MatchService","ReportService",function(e,t,o,n,r,i,a,s,c,l,u){function d(){0===e.cards.length?m():e.changeCard()}function m(){window.localStorage.getItem("token")&&0===e.cards.length&&!e.isLoading&&(e.isLoading=!0,l.getMatch().then(function(t){e.isLoading=!1,t&&(e.cards.push(p(t)),n(function(){g(".profile-card").removeClass("moving-in")},400))},function(){e.isLoading=!1}))}function f(){e.cards.shift()}function p(e){return{hashedId:e.hashedId,name:e.firstName,age:e.age,location:Math.floor(e.distance)+"km",bio:e.bio,profile_pic:e.pictureMed,questions:e.questions,mutual_friends_count:"undefined"==typeof e.mutualFriends?"unknown":e.mutualFriends.summary.total_count,likedDeals:e.likedDeals}}function g(e){return angular.element(o[0].querySelectorAll(e))}e.cards=[],e.isLoading=!1,a.registerListener("enterHome",m),a.registerListener("closeLetter",f),a.registerListener("changeGender",d),m(),e.changeCard=function(){g(".profile-card").addClass("moving-out"),n(e.addCard,100)},e.openSendLetter=function(e){i.nextViewOptions({disableAnimate:!1,disableBack:!1}),c.setTargetUserCard(e),t.go("app.letter")},e.addCard=function(){e.isLoading||(e.isLoading=!0,l.getMatch().then(function(t){e.cards.push(p(t)),n(function(){e.cards.splice(0,1),n(function(){g(".profile-card").removeClass("moving-in")},200),e.isLoading=!1},200)},function(){e.isLoading=!1,e.cards.splice(0,1)}))}}]),angular.module("letterbox.controllers").controller("CategoriesCtrl",["$scope","$state","CategoryService",function(e,t,o){e.isLoading=!0,o.getCategories().then(function(t){e.categories=t,e.isLoading=!1}),e.viewCategory=function(e){t.go("app.deals",{category:e})},e.viewLiked=function(){t.go("app.liked-deals")}}]),angular.module("letterbox.controllers").controller("ChatCtrl",["$scope","$state","$stateParams","$ionicScrollDelegate","$ionicModal","$window","$timeout","$ionicPopover","$ionicPopup","$ionicLoading","ChatService","DealService","RoomsService","socket",function(e,t,o,n,r,i,a,s,c,l,u,d,m,f){e.messages=[],e.recipient="",e.recipientId="",e.data={message:""},e.viewingDeals="mutual",e.fromSubPage=!1,e.deals={own:[],user:[],mutual:[]},e.limit=40,e.roomHash=o.chatId,e.room=m.getRoom(e.roomHash),s.fromTemplateUrl("templates/chatpopover.html",{scope:e}).then(function(t){e.popover=t});var p=function(){e.limit=40,e.$apply(),n.scrollBottom(!0)},g=function(){e.limit=40,e.$apply(),n.scrollBottom(!1)};e.$on("$ionicView.enter",function(t,o){u.getRecipientName(e.roomHash).then(function(t){e.recipient=t}),u.getRecipientHashedId(e.roomHash).then(function(t){e.recipientId=t}),u.getMessagesFromBackend(e.roomHash).then(function(t){u.setCurrentRoom(e.roomHash,e,n),e.fromSubPage||(e.messages=t,t.length&&f.roomRead(e.roomHash,t[t.length-1].timestamp.getTime()),n.scrollBottom(!1))}),window.addEventListener("native.keyboardhide",p,!1),window.addEventListener("native.keyboardshow",g,!1)}),e.$on("$ionicView.leave",function(e,t){window.removeEventListener("native.keyboardhide",p,!1),window.removeEventListener("native.keyboardshow",g,!1)}),e.loadPrevious=function(){var t=$(".messages-list > .list").height();e.limit=Math.min(e.limit+15,e.messages.length),e.$apply(),n.$getByHandle("chatScroll").scrollBy(0,$(".messages-list > .list").height()-t,!1)},e.onKeyPress=function(t){13===t.keyCode&&(t.preventDefault(),e.sendMessage())},e.sendMessage=function(){var t=e.data.message;t&&0!==t.length&&(f.sendMessage(e.roomHash,t),e.data.message="")},r.fromTemplateUrl("templates/deal-share-modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.shareModal=t}),e.openShareModal=function(){d.checkDealCompatability(e.recipientId).then(function(){e.fetchLikedDeals(),e.shareModal.show()},function(){c.alert({title:e.recipient+"'s Letterbox doesn't support cutouts yet!",template:"Try informing "+e.recipient+" to get the latest Letterbox app",cssClass:"popup-alert"})})},e.closeShareModal=function(){e.shareModal.hide()},e.$on("$destroy",function(){e.shareModal.remove()}),e.showPopover=function(t){e.popover.show(t)},e.showOtherUserProfile=function(){e.showLoading(),u.getRecipientHashedId(e.roomHash).then(function(o){e.hideLoading(),e.fromSubPage=!0,t.go("app.other-profile",{userId:o})}),e.closePopover()},e.showLoading=function(){l.show({template:'<ion-spinner icon="dots"></ion-spinner>'})},e.hideLoading=function(){l.hide()},e.showResponses=function(){e.closePopover(),e.fromSubPage=!0,t.go("app.other-letter",{roomHash:e.roomHash})},e.closePopover=function(){e.popover.hide()},e.viewDeal=function(o){d.showShare=!0,e.fromSubPage=!0,t.go("app.deal",{dealId:o.id,roomHash:e.roomHash}),e.closeShareModal()},e.viewSharedDeal=function(o){d.showShare=!1,e.fromSubPage=!0,t.go("app.deal",{dealId:o.id})},e.fetchLikedDeals=function(){d.getOwnLikedDeals().then(function(t){e.deals.own=t}),d.getUserLikedDeals(e.recipientId).then(function(t){e.deals.user=t}),d.getMutualLikedDeals(e.recipientId).then(function(t){e.deals.mutual=t})}}]),angular.module("letterbox.controllers").controller("ChatsCtrl",["$scope","$state","RoomsService",function(e,t,o){e.chats=[],e.$on("$ionicView.enter",function(){o.setChatsPageScope(e),e.chats=o.getChats(),o.updateRooms()})}]),angular.module("letterbox.controllers").controller("DealCtrl",["$scope","$rootScope","$stateParams","$state","$sce","$ionicHistory","$ionicModal","$ionicScrollDelegate","$ionicSlideBoxDelegate","socket","DealService","ChatService",function(e,t,o,n,r,i,a,s,c,l,u,d){var m=o.dealId;u.getDeal(m).then(function(t){e.deal=t}),e.dealShareButton=u.showShare,e.shareDeal=function(){var t=o.roomHash;l.shareDeal(t,e.deal.title,e.deal.id),i.goBack(-1)},e.zoomMin=1,e.showImages=function(t){e.activeSlide=t,a.fromTemplateUrl("templates/deal-images-modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t,e.modal.show()})},e.slide=function(e){c.slide(e)},e.closeModal=function(){e.modal.hide(),e.modal.remove()},e.updateSlideStatus=function(t){var o=s.$getByHandle("scrollHandle"+t).getScrollPosition().zoom;o==e.zoomMin?c.enableSlide(!0):c.enableSlide(!1)},e.openLink=function(e){window.open(e,"_system")}}]),angular.module("letterbox.controllers").controller("DealsCtrl",["$scope","$rootScope","$state","$stateParams","$ionicScrollDelegate","DealService",function(e,t,o,n,r,i){var a=n.category;e.currentCategory=a,e.deals=[],e.hasReachedEnd=!1,i.showShare=!1;var s=3,c=0;e.loadDeals=function(){"Featured"===e.currentCategory?i.getFeaturedDeals(c,s).then(e.appendDeals):i.getDeals(e.currentCategory,c,s).then(e.appendDeals)},e.appendDeals=function(t){for(var o=0;s>o;o++)t[o]?(e.deals.push(t[o]),c++):e.hasReachedEnd=!0;e.$broadcast("scroll.infiniteScrollComplete")},e.viewLiked=function(){o.go("app.liked-deals")}}]),angular.module("letterbox.controllers").controller("HomeCtrl",["$scope","$state","$ionicHistory","NotificationsService","RoomsService","eventbus",function(e,t,o,n,r,i){function a(){n.getNumberOfNotifications().then(function(t){e.numberOfLetters=t})}function s(){r.getTotalUnreadCount().then(function(t){e.numberOfMessages=t})}e.numberOfLetters=0,e.numberOfMessages=0,i.registerListener("letterReceived",a),i.registerListener("unreadCountChanged",s),e.$on("$ionicView.enter",function(){i.call("enterHome"),o.nextViewOptions({disableBack:!0}),a(),s()}),e.goNotifications=function(){t.go("app.notifications")}}]),angular.module("letterbox.controllers").controller("LetterCtrl",["$scope","$state","$ionicHistory","backend","letterService","eventbus","$timeout",function(e,t,o,n,r,i,a){function s(){e.selectedTab=-1}function c(t,o,n){s(),e.currentQuestion=o[t],e.selectedTab=n[t]}function l(e,t){e.forEach(function(e,o){e.answer=!1,1===t[o]&&(e.answer=!0)})}function u(){e.tooltipShown&&($(".button-next").qtip("destroy"),e.tooltipShown=!1)}e.$on("$ionicView.afterLeave",function(){$(".button-next").qtip("destroy"),o.clearCache()});var d=r.targetUserCard,m=d.questions;if(m){var f=[-1,-1,-1,-1,-1];e.curr=0,e.max=m.length-1,e.card=r.targetUserCard,e.userName=d.name,e.currentQuestion=d.questions[0],e.warning="",e.tooltipShown=!1,e.selectedTab=-1}else o.nextViewOptions({disableBack:!0}),t.go("app.home");e.nextQuestion=function(){return e.warning="",-1===f[e.curr]&&(f[e.curr]=e.selectedTab),e.curr===e.max&&5===f.length&&-1===f.indexOf(-1)?(u(),l(m,f),n.sendALetter(d.hashedId,m),o.goBack(),void i.call("closeLetter")):e.curr===e.max?void(e.warning="Please answer all questions."):(e.curr++,void c(e.curr,m,f))},e.prevQuestion=function(){u(),e.warning="",e.curr<=0||(-1===f[e.curr]&&(f[e.curr]=e.selectedTab),e.curr--,c(e.curr,m,f))},e.selectTab=function(t){e.selectedTab=t,e.curr<e.max&&a(function(){e.nextQuestion()},200),e.curr!==e.max||e.tooltipShown||($(".button-next").qtip({content:"Send the letter!",style:{classes:"qtip-tipsy"},show:{when:!1,ready:!0},hide:!1}),e.tooltipShown=!0)}}]),angular.module("letterbox.controllers").controller("LikedDealsCtrl",["$scope","$rootScope","$state","DealService",function(e,t,o,n){e.likedDeals=[];var r=function(){n.getOwnLikedDeals().then(function(t){e.likedDeals=t})};e.viewDeal=function(e){o.go("app.deal",{dealId:e.id})},r()}]),angular.module("letterbox.controllers").controller("NotificationsCtrl",["$scope","$state","$ionicModal","NotificationsService","RoomsService","eventbus","backend",function(e,t,o,n,r,i,a){function s(){e.isLoading=!0,n.getNotificationsList().then(function(t){e.notifications=t,e.isLoading=!1})}e.notifications=[],e.chats=[],e.isLoading=!1,e.currentTab=n.getTab(),e.setTab=function(t){e.currentTab=t,n.setTab(t)},i.registerListener("roomMessage",function(t){for(var o=t.message,n=0;n<e.chats.length;n++)if(e.chats[n].id===o.RoomHash){e.chats[n].last_message=(o.sender===window.localStorage.getItem("hashedId")?"You: ":e.chats[n].from+": ")+o.content,e.chats[n].last_activity=new Date(o.timeSent),o.sender!==window.localStorage.getItem("hashedId")&&e.chats[n].unread_count++;break}e.chats.sort(function(e,t){return t.last_activity.getTime()-e.last_activity.getTime()}),e.$apply()}),i.registerListener("letterReceived",s),e.$on("$ionicView.enter",function(t,o){r.setNotifsPageScope(e),s(),e.chats=r.getChats(),r.updateRooms()}),e.selectNotification=function(o){o.isRead=!0,e.selectedLetter=o,a.markLetterAsRead(o.id),t.go("app.response",{responseId:o.id})}}]),angular.module("letterbox.controllers").controller("OnboardingCtrl",["$scope","$state","$timeout","$ionicPopup","$ionicLoading","$ionicSlideBoxDelegate","$cordovaOauth","$ionicHistory","$cordovaInAppBrowser","$cordovaFacebook","Facebook","AuthService","backend","eventbus",function(e,t,o,n,r,i,a,s,c,l,u,d,m,f){function p(){var t=i.currentIndex();0==t?e.isAtStart=!0:t==i.slidesCount()-1?e.isAtEnd=!0:(e.isAtStart=!1,e.isAtEnd=!1)}function g(e){n.alert({title:e,cssClass:"popup-alert",okType:"button-stable"}).then(function(e){})}e.openTermsOfUse=function(){c.open("http://getletterbox.com/terms","_blank",{hardwareback:"yes",zoom:"no",closebuttoncaption:"Close",toolbarposition:"bottom"})},e.showLoading=function(){r.show({template:'<ion-spinner icon="ripple"></ion-spinner>'})},e.hideLoading=function(){r.hide()},e.authenticateToken=function(t){d.authToken(t).then(function(t){f.call("loginCompleted"),e.hideLoading(),e.beginOnboarding()},function(t){e.hideLoading();n.alert({title:"An error occurred!",template:"Please try again later",cssClass:"popup-alert"})})},e.doLogin=function(){e.showLoading(),window.cordova?l.login(["public_profile","user_birthday","user_photos","user_friends"]).then(function(t){e.authenticateToken(t.authResponse.accessToken)},function(t){e.hideLoading();n.alert({title:"An error when trying to login with Facebook!",template:"Please try again later",cssClass:"popup-alert"})}):u.login(function(t){if("connected"===t.status)e.authenticateToken(t.authResponse.accessToken);else{e.hideLoading();n.alert({title:"An error when trying to login with Facebook!",template:"Please try again later",cssClass:"popup-alert"})}},{scope:"public_profile,user_birthday,user_photos,user_friends",return_scopes:!0})},e.beginOnboarding=function(){d.isRegistered()?t.go("app.home"):t.go("onboarding",{onboardStep:0})},e.startOnboard=function(e){t.go("onboarding",{onboardStep:1})},e.isAtStart=!0,e.isAtEnd=!1,e.slide=function(e){i.slide(e),p()},e.prevSlide=function(){i.previous(),p()},e.nextSlide=function(){i.next(),p()},e.getRandomQuestions=function(){m.getRandomQuestions().$promise.then(function(t){e.questions=t.splice(0,5)},function(e){console.log("Couldn't retrive questions")})},e.getNewQn=function(t){var o=e.questions.map(function(e){return e.id});m.getOneRandomQuestion(o).$promise.then(function(o){var n=e.questions.indexOf(t);e.questions[n]=o},function(e){console.log("Couldn't retrive new question")})},e.selectOption=function(t,o){var n=e.questions.indexOf(t);t.answer=o,e.questions[n]=t},e.completeOnboardingStep1=function(){for(var t=0;5>t;t++)if("undefined"==typeof e.questions[t].answer)return void g("Please answer all your questions");var o=e.questions.map(function(e){return{id:e.id,answer:e.answer}});m.setQuestionsAndAnswers(o,function(t){e.completeOnboarding()},function(e){console.log("Couldn't save question and answers")})},e.completeOnboarding=function(){window.localStorage.setItem("isRegistered","true"),t.go("app.home")};var h=function(){s.clearHistory(),d.isLoggedIn()&&!e.questions&&e.getRandomQuestions()};h()}]),angular.module("letterbox.controllers").controller("OtherLetterCtrl",["$scope","$stateParams","RoomsService",function(e,t,o){var n=t.roomHash;o.getRoomLetter(n).then(function(t){e.letter=t})}]),angular.module("letterbox.controllers").controller("OtherProfileCtrl",["$scope","$stateParams","ProfileService",function(e,t,o){var n=t.userId;o.getOtherProfile(n).then(function(t){t.mutual_friends_count="undefined"==typeof t.mutualFriends?"unknown":t.mutualFriends.summary.total_count,e.user=t,e.user.name=e.user.firstName,e.user.profile_pic=e.user.pictureMed})}]),angular.module("letterbox.controllers").controller("ProfileCtrl",["$scope","$state","$ionicHistory","$ionicPopup","$ionicLoading","$ionicModal","ProfileService",function(e,t,o,n,r,i,a){function s(){return e.profile.bio.length>0}function c(){for(var t=0;5>t;t++)if("undefined"==typeof e.profile.questions[t].answer)return!1;return!0}function l(e){n.alert({title:e,cssClass:"popup-alert",okType:"button-stable"}).then(function(e){})}function u(){n.alert({title:"Your profile has been updated!",cssClass:"popup-alert"}).then(function(e){})}e.profile={},e.isLoading=!0,e.profilePhotos=[],e.isLoadingPhotos=!1,e.$on("$ionicView.enter",function(t,o){a.getProfile().then(function(t){e.profile=t,e.nameAndAge=t.firstName+", "+t.age,e.isLoading=!1})}),i.fromTemplateUrl("templates/photo-modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.$on("$ionicView.enter",function(){o.nextViewOptions({disableBack:!0})}),e.showLoading=function(){r.show({template:'<ion-spinner icon="ripple"></ion-spinner>'})},e.hideLoading=function(){r.hide()},e.openProfilePhotoModal=function(){e.isLoadingPhotos=!0,e.modal.show(),a.getProfilePictures().then(function(t){e.profilePhotos=t,e.isLoadingPhotos=!1},function(t){e.isLoadingPhotos=!1})},e.updateProfilePhoto=function(t){e.hideProfilePhotoModal(),e.showLoading(),a.updateProfilePicture(t).then(function(t){e.profile.pictureMed=t.pictureMed,e.profile.pictureThumb=t.pictureThumb,e.hideLoading()},function(t){e.hideLoading()})},e.hideProfilePhotoModal=function(){e.modal.hide()},e.getNewQn=function(t){var o=e.profile.questions.map(function(e){return e.id});a.getNewQuestion(o).then(function(o){var n=e.profile.questions.indexOf(t);e.profile.questions[n]=o})},e.selectOption=function(t,o){var n=e.profile.questions.indexOf(t);t.answer=o,e.profile.questions[n]=t},e.onEnterText=function(){},e.updateProfile=function(){var t=[];if(s()?a.updateBio(e.profile.bio):t.push("Please enter a bio"),c()){var o=e.profile.questions.map(function(e){return{id:e.id,answer:e.answer}});a.updateQuestions(o)}else t.push("Please answer all questions");t.length>0?l(t.join(" & ")):u()}}]),angular.module("letterbox.controllers").controller("ResponseCtrl",["$scope","$state","$stateParams","$ionicHistory","backend","NotificationsService","ProfileService","ReportService",function(e,t,o,n,r,i,a,s){function c(){o.isExistingChat?e.isExistingChat=o.isExistingChat:e.isExistingChat=!1,i.getNotificationsList().then(function(t){i.getNotificationFromId(o.responseId).then(function(t){e.response=t,e.numCorrect=t.questionsAnswers.filter(function(e){return 1==e.isCorrect}).length,a.getOtherProfile(t.userId).then(function(t){e.response.mutual_friends_count="undefined"==typeof t.mutualFriends?"unknown":t.mutualFriends.summary.total_count,e.response.likedDeals=t.likedDeals})})})}c(),n.nextViewOptions({disableBack:!0}),e.rejectLetter=function(e){r.rejectLetter(e.id,function(){t.go("app.notifications")})},e.approveLetter=function(e){r.approveLetter(e.id,function(e){t.go("app.chat",{chatId:e.hash})})},e.viewDeal=function(e){t.go("app.deal",{dealId:e.id}),n.nextViewOptions({disableBack:!1})},e.reportUser=function(t,o,n){s.showReportPopup(t,o,e,n)}}]),angular.module("letterbox.controllers").controller("SettingsCtrl",["$scope","$state","$ionicPopup","$cordovaInAppBrowser","backend","AuthService","eventbus","VERSION",function(e,t,o,n,r,i,a,s){e.minAge=18,e.maxAge=80,e.versionMajor=s.major,e.versionMinor=s.minor,e.versionRevision=s.revision;var c=window.localStorage.getItem("perfectMatch"),l=window.localStorage.getItem("genderPreference"),u=window.localStorage.getItem("distanceRadius"),d=window.localStorage.getItem("minAge"),m=window.localStorage.getItem("maxAge");e.preference={perfectMatch:"true"===c?!0:!1,preferredGender:l,distanceRadius:null==u?50:u,age:{min:null===d?e.minAge:d,max:null===m?e.maxAge:m}},e.onChangePerfectMatch=function(){window.localStorage.setItem("perfectMatch",e.preference.perfectMatch),r.updatePerfectMatch(e.preference.perfectMatch)},e.onChangePreferredGender=function(){a.call("changeGender"),window.localStorage.setItem("genderPreference",e.preference.preferredGender),r.updateGenderPreference(e.preference.preferredGender)},e.onChangeDistanceRadius=function(){window.localStorage.setItem("distanceRadius",e.preference.distanceRadius)},e.$watch("preference.age",function(){isNaN(e.preference.age.min)||window.localStorage.setItem("minAge",e.preference.age.min),isNaN(e.preference.age.max)||window.localStorage.setItem("maxAge",e.preference.age.max)},!0),e.openTermsOfUse=function(){n.open("http://getletterbox.com/terms","_blank",{hardwareback:"yes",zoom:"no",closebuttoncaption:"Close",toolbarposition:"bottom"})},e.openPrivacyPolicy=function(){n.open("http://getletterbox.com/privacy","_blank",{hardwareback:"yes",zoom:"no",closebuttoncaption:"Close",toolbarposition:"bottom"})},e.logout=function(){o.confirm({title:"Are you sure you want to logout?",cssClass:"popup-alert",okType:"button-positive",okText:"Logout",cancelText:"No"}).then(function(e){e&&i.logout().then(function(){t.go("login")})})},e.feedback=function(){n.open("https://www.facebook.com/getletterbox","_blank",{hardwareback:"yes",zoom:"no",closebuttoncaption:"Close",toolbarposition:"bottom"})}}]),angular.module("letterbox.directives").directive("dealCard",["$document",function(e){return{scope:{data:"=set"},restrict:"EA",replace:!0,controller:["$scope","$state","DealService",function(e,t,o){e.learnMore=function(e){t.go("app.deal",{dealId:e.id})}}],controllerAs:"ctrl",bindToController:!0,templateUrl:"templates/deal-card.html"}}]),angular.module("letterbox.directives").directive("dealLikeBtn",["$document",function(e){return{scope:{data:"=set"},restrict:"EA",replace:!0,controller:["$scope","$state","DealService",function(e,t,o){e.toggleLike=function(){e.ctrl.data.isLiked=!e.ctrl.data.isLiked,e.ctrl.data.isLiked?e.ctrl.data.likeCount++:e.ctrl.data.likeCount--,o.toggleDealLike(e.ctrl.data.id)}}],controllerAs:"ctrl",bindToController:!0,templateUrl:"templates/deal-like-button.html"}}]),angular.module("letterbox.directives").directive("flipCard",["$document",function(e){return{restrict:"A",link:function(e,t,o){angular.element(t[0].querySelectorAll(".button-flip")).on("touch",function(e){t.toggleClass("flipped")})}}}]),angular.module("letterbox.directives").directive("noScroll",["$document",function(e){return{restrict:"A",link:function(t,o,n){e.on("touchmove",function(e){e.preventDefault()})}}}]),angular.module("letterbox.directives").directive("profileCard",["$ionicHistory",function(e){return{scope:{},controller:["$scope","ReportService","$state","DealService",function(t,o,n,r){t.reportUser=function(e,n,r){o.showReportPopup(e,n,t,r)}.bind(this),t.viewDeal=function(t){e.nextViewOptions({disableBack:!1}),n.go("app.deal",{dealId:t.id})}.bind(this)}],controllerAs:"ctrl",bindToController:{data:"=info",callback:"&"},replace:!0,transclude:!0,templateUrl:"templates/profile-card.html"}}]),angular.module("letterbox.directives").directive("profilePicSmall",["$document",function(e){return{scope:{data:"=set"},restrict:"EA",replace:!0,controller:["$scope","$ionicModal",function(e,t){e.showProfilePic=function(){t.fromTemplateUrl("templates/profile-pic-modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t,e.modal.show()})},e.closeModal=function(){e.modal.hide(),e.modal.remove()}}],controllerAs:"ctrl",bindToController:!0,templateUrl:"templates/profile-pic-small.html"}}]),angular.module("ngIOS9UIWebViewPatch",["ng"]).config(["$provide",function(e){"use strict";e.decorator("$browser",["$delegate","$window",function(e,t){function o(e){return/(iPhone|iPad|iPod).* OS 9_\d/.test(e)&&!/Version\/9\./.test(e)}function n(e){function t(){o=null}var o=null,n=e.url;return e.url=function(){return arguments.length?(o=arguments[0],n.apply(e,arguments)):o||n.apply(e,arguments)},window.addEventListener("popstate",t,!1),window.addEventListener("hashchange",t,!1),e}return o(t.navigator.userAgent)?n(e):e}])}]),angular.module("letterbox.services").service("LocationService",["$cordovaGeolocation","backend",function(e,t){function o(e){i(e.coords.latitude,e.coords.longitude)}function n(){var t={timeout:1e4,enableHighAccuracy:!1};e.getCurrentPosition(t).then(o)}function r(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(o)}function i(e,o){t.updateUserLocation(e,o)}var a={};return a.updateLocation=function(){window.cordova?n():r()},a}]),angular.module("letterbox.services").service("AuthService",["$q","$ionicHistory","$cordovaFacebook","backend","eventbus","DbService","socket",function(e,t,o,n,r,i,a){function s(e){window.localStorage.setItem("token",e.letterbox_token),window.localStorage.setItem("firstName",e.user.firstName),window.localStorage.setItem("hashedId",e.user.hashedId),window.localStorage.setItem("isRegistered",e.user.isRegistered),window.localStorage.setItem("genderPreference",e.user.genderPreference),window.localStorage.setItem("perfectMatch",e.user.perfectMatch)}var c={};return c.authToken=function(t){var o=e.defer();return n.auth(t).$promise.then(function(e){s(e),n.updateVersion(),o.resolve()},function(e){o.reject()}),o.promise},c.renewToken=function(){var t=e.defer();return n.renewToken().$promise.then(function(e){s(e),n.updateVersion(),t.resolve()},function(e){c.logout().then(function(){t.reject()})}),t.promise},c.isLoggedIn=function(){return null!==window.localStorage.getItem("token")&&window.localStorage.getItem("token").length>0},c.isRegistered=function(){return c.isLoggedIn()&&"true"===window.localStorage.getItem("isRegistered")},c.logout=function(){var r=e.defer();return n.clearPushToken().then(function(){t.clearCache().then(function(){window.localStorage.setItem("token",""),window.localStorage.setItem("firstName",""),window.localStorage.setItem("hashedId",""),window.localStorage.setItem("isRegistered",""),window.localStorage.setItem("genderPreference",""),window.localStorage.setItem("perfectMatch",""),window.cordova&&o.logout(),a.uninit(),i.isInitialized()?i.clearAll().then(function(){r.resolve()}):r.resolve()})},function(){r.reject()}),r.promise},c}]),angular.module("letterbox.services").service("backend",["$q","$resource","$http","VERSION",function(e,t,o,n){function r(){return window.localStorage.getItem("token")}var i={},a="http://ec2-52-74-138-177.ap-southeast-1.compute.amazonaws.com",s="/auth",c="/auth/renew",l="/user/self",u="/user/id/:userId",d="/user/pushtoken",m="/user/perfectmatch",f="/user/location",p="/user/bio",g="/user/photo",h="/user/genderPreference",v="/match",w="/matches",b="/questions",S="/question",k="/messages",L="/rooms",I="/room/:roomId",C="/rooms/:roomId",R="/letters",$="/letters/:letterId",T="/report",x="/user/id/:hashedId/version",P="/user/version",E="/deal/featured",y="/deal/cat",A="/deal/cat/:dealCat",D="/deal/id/:dealId",U="/deal/user/:otherUserId",M="/deal/mutual/:otherUserId",N=t(a.concat(s),{},{get:{method:"GET"}}),O=t(a.concat(c),{},{get:{method:"GET"}}),q=t(a.concat(v),{},{get:{method:"GET"}}),_=t(a.concat(w),{},{get:{method:"GET",isArray:!0}}),H=t(a.concat(g),{},{get:{method:"GET",isArray:!0},setPhoto:{method:"PUT",params:{letterbox_token:"@token"}}}),B=t(a.concat(l),{},{get:{method:"GET"}}),j=t(a.concat(d),{},{updatePushToken:{method:"PUT",params:{letterbox_token:"@token"}},clearPushToken:{method:"DELETE",params:{letterbox_token:"@token"}}}),F=t(a.concat(m),{},{updatePerfectMatch:{method:"PUT",params:{letterbox_token:"@token"}}}),G=t(a.concat(f),{},{updateLocation:{method:"PUT",params:{letterbox_token:"@token"}}}),z=t(a.concat(p),{},{updateBio:{method:"PUT",params:{letterbox_token:"@token"}}}),V=t(a.concat(h),{},{updateGenderPreference:{method:"PUT",params:{letterbox_token:"@token"}}}),Q=t(a.concat(b),{},{get:{method:"GET",isArray:!0},updateQuestions:{method:"PUT",params:{letterbox_token:"@token"}}}),W=t(a.concat(S),{},{get:{method:"GET"}}),Y=t(a.concat(k),{},{get:{method:"GET",isArray:!0}}),K=t(a.concat(L),{},{get:{method:"GET",isArray:!0}}),X=t(a.concat(I),{roomId:"@roomId"},{get:{method:"GET"}}),J=t(a.concat(C),{roomId:"@roomId"},{get:{method:"GET",isArray:!0}}),Z=t(a.concat(u),{},{get:{method:"GET"}}),ee=t(a.concat(R),{},{get:{method:"GET",isArray:!0},createLetter:{method:"POST",params:{letterbox_token:"@token"}}}),te=t(a.concat($),{letterId:"@letterId"},{approveLetter:{method:"POST",params:{letterbox_token:"@token"}},readLetter:{method:"PUT",params:{letterbox_token:"@token"
}},rejectLetter:{method:"DELETE",params:{letterbox_token:"@token"}}}),oe=t(a.concat(T),{},{reportUser:{method:"POST",params:{letterbox_token:"@token"}}}),ne=t(a.concat(E),{},{get:{method:"GET",isArray:!0}}),re=t(a.concat(y),{},{get:{method:"GET",isArray:!0}}),ie=t(a.concat(A),{dealCat:"@dealCat"},{get:{method:"GET",isArray:!0}}),ae=t(a.concat(D),{dealId:"@dealId"},{get:{method:"GET"},likeDeal:{method:"PUT",params:{letterbox_token:"@token"}}}),se=t(a.concat(U),{otherUserId:"@otherUserId"},{get:{method:"GET",isArray:!0}}),ce=t(a.concat(M),{},{get:{method:"GET",isArray:!0}}),le=t(a.concat(x),{hashedId:"@hashedId"},{get:{method:"GET"}}),ue=t(a.concat(P),{},{update:{method:"PUT",params:{letterbox_token:"@token"}}});return i.auth=function(e){return N.get({fb_token:e})},i.renewToken=function(){var e=r();return O.get({letterbox_token:e})},i.getMatch=function(e,t,o,n){var i=r();return q.get({letterbox_token:i,maxDistance:e,previousId:t,minAge:o,maxAge:n})},i.getMatches=function(e,t,o){var n=r();return _.get({letterbox_token:n,maxDistance:e,limit:t,previousId:o})},i.getUserSelf=function(){var e=r();return B.get({letterbox_token:e})},i.updatePushToken=function(e){var t=r();return updater=new j,updater.token=t,updater.pushToken=e,updater.$updatePushToken()},i.clearPushToken=function(){var t=e.defer(),o=r();return updater=new j,updater.token=o,updater.$clearPushToken(t.resolve,t.reject),t.promise},i.updatePerfectMatch=function(e){var t=r();return updater=new F,updater.token=t,updater.perfectMatch=e,updater.$updatePerfectMatch()},i.updateUserLocation=function(e,t,o){var n=r();return locationUpdater=new G,locationUpdater.token=n,locationUpdater.latitude=e,locationUpdater.longitude=t,locationUpdater.$updateLocation(o)},i.getProfilePhotos=function(){var e=r();return H.get({letterbox_token:e})},i.setProfilePhoto=function(e,t,o){var n=r();return handler=new H,handler.token=n,handler.id=e,handler.$setPhoto(t,o)},i.updateUserBio=function(e,t,o){var n=r(),i=new z;return i.token=n,i.bio=e,i.$updateBio(t,o)},i.updateGenderPreference=function(e,t){var o=r();return genderPreferenceUpdater=new V,genderPreferenceUpdater.token=o,genderPreferenceUpdater.genderPreference=e,genderPreferenceUpdater.$updateGenderPreference(t)},i.getRandomQuestions=function(){var e=r();return Q.get({letterbox_token:e})},i.getOneRandomQuestion=function(e){var t=r();return W.get({letterbox_token:t,currentQuestionIds:e})},i.setQuestionsAndAnswers=function(e,t,o){var n=r(),i=new Q;return i.token=n,i.questions=e,i.$updateQuestions(t,o)},i.getMessages=function(e){var t=r();return Y.get({letterbox_token:t,since:e})},i.getRooms=function(){var e=r();return K.get({letterbox_token:e})},i.getSingleRoom=function(e){var t=r();return X.get({letterbox_token:t,roomId:e})},i.getRoomMessages=function(e,t){var o=r();return J.get({letterbox_token:o,roomId:e,since:t})},i.getOtherUser=function(e){var t=r();return Z.get({userId:e,letterbox_token:t})},i.getAllLetters=function(){var e=r();return ee.get({letterbox_token:e})},i.sendALetter=function(e,t,o,n){var i=r();return handler=new ee,handler.token=i,handler.recipient=e,handler.questions=t,handler.$createLetter(o,n)},i.markLetterAsRead=function(e,t,o){var n=r();return handler=new te,handler.token=n,handler.letterId=e,handler.$readLetter(t,o)},i.approveLetter=function(e,t,o){var n=r();return handler=new te,handler.token=n,handler.letterId=e,handler.$approveLetter(t,o)},i.rejectLetter=function(e,t,o){var n=r();return handler=new te,handler.token=n,handler.letterId=e,handler.$rejectLetter(t,o)},i.reportUser=function(e,t,o,n){var i=r();return handler=new oe,handler.token=i,handler.userId=e,handler.reason=t,handler.$reportUser(o,n)},i.getFeaturedDeals=function(t,o){var n=e.defer();return ne.get({letterbox_token:r(),offset:t,limit:o}).$promise.then(function(e){var t=[];e.forEach(function(e){t.push(e)}),n.resolve(t)},n.reject),n.promise},i.getDealCategories=function(){var t=e.defer();return re.get({letterbox_token:r()}).$promise.then(function(e){var o=[];e.forEach(function(e){o.push(e)}),t.resolve(o)},t.reject),t.promise},i.getDealsByCat=function(t,o,n){var i=e.defer();return ie.get({letterbox_token:r(),dealCat:t,offset:o,limit:n}).$promise.then(function(e){var t=[];e.forEach(function(e){t.push(e)}),i.resolve(t)},i.reject),i.promise},i.getDealById=function(t){var o=e.defer();return ae.get({letterbox_token:r(),dealId:t}).$promise.then(o.resolve,o.reject),o.promise},i.toggleDealLike=function(t){var o=e.defer();return handler=new ae,handler.token=r(),handler.$likeDeal({dealId:t},o.resolve,o.reject),o.promise},i.getUserLikedDeals=function(t){var o=e.defer();return se.get({letterbox_token:r(),otherUserId:t}).$promise.then(function(e){var t=[];e.forEach(function(e){t.push(e)}),o.resolve(t)},o.reject),o.promise},i.getMutualLikedDeals=function(t){var o=e.defer();return ce.get({letterbox_token:r(),otherUserId:t}).$promise.then(function(e){var t=[];e.forEach(function(e){t.push(e)}),o.resolve(t)},o.reject),o.promise},i.getOtherUserVersion=function(t){var o=e.defer();return le.get({letterbox_token:r(),hashedId:t}).$promise.then(o.resolve,o.reject),o.promise},i.updateVersion=function(){var t=e.defer();return handler=new ue,handler.token=r(),handler.major=n.major,handler.minor=n.minor,handler.revision=n.revision,handler.$update(t.resolve,t.reject),t.promise},i}]),angular.module("letterbox.services").service("BackgroundService",function(){function e(){n=!1;for(var e=0;e<a.length;e++)a[e]()}function t(){n=!0;for(var e=0;e<i.length;e++)i[e]()}function o(){document.addEventListener("pause",e,!1),document.addEventListener("resume",t,!1)}var n=!0,r={},i=[],a=[];return r.isInBackground=function(){return window.cordova?!n:!window.document.hasFocus()},r.registerOnResume=function(e){i.push(e)},r.registerOnPause=function(e){a.push(e)},document.addEventListener("deviceready",o,!1),r}),angular.module("letterbox.services").service("CategoryService",["$q","backend",function(e,t){var o=this;o.getCategories=function(){var o=e.defer();return t.getDealCategories().then(o.resolve,o.reject),o.promise}}]),angular.module("letterbox.services").service("ChatService",["$q","$state","RoomsService","DbService","DealService","BackgroundService","backend","socket","eventbus",function(e,t,o,n,r,i,a,s,c){function l(e){n.addMessage(e.RoomHash,e.sender,e.content,e.timeSent,e.isRead,e.type,e.DealId)}function u(e,t){n.markMessagesAsRead(e,t)}function d(e){return"undefined"!=typeof p[e]?p[e]:null}function m(){var e=d(g);g&&t.includes("app.chat",{chatId:g})&&null!==e&&e.length>0&&s.roomRead(g,e[e.length-1].timestamp.getTime())}var f={},p={},g="",h=null,v=null;return c.registerListener("windowFocused",m),i.registerOnResume(m),c.registerListener("roomMessage",function(e){var o=e.message,n=d(o.RoomHash);if(null!==n){var r=f.formatMessage(o);n.push(r),o.RoomHash===g&&(h.limit=40,h.$apply(),v.scrollBottom(!0))}!i.isInBackground()&&t.includes("app.chat",{chatId:e.message.RoomHash})&&s.roomRead(e.message.RoomHash,e.message.timeSent)}),f.setCurrentRoom=function(e,t,o){e!==g&&(g=e),h=t,v=o},f.init=function(){window.cordova&&n.isInitialized()&&(c.registerListener("roomMessage",function(e){l(e.message)}),c.registerListener("roomRead",function(e){u(e.roomHash,e.time)}))},f.sync=function(){window.cordova&&n.isInitialized()&&n.getLatestTimeSent().then(function(e){a.getMessages(e).$promise.then(function(e){e.forEach(function(e){l(e)})})})},f.formatMessage=function(e){var t={isOwner:e.sender===window.localStorage.getItem("hashedId"),content:e.content,timestamp:new Date(e.timeSent),type:e.type};return"share"!==e.type||e.Deal?"share"===e.type&&e.Deal&&(t.DealId=e.Deal.id,t.Deal=e.Deal):r.getDeal(e.DealId).then(function(e){t.Deal=e,t.DealId=e.id}),t},f.getRecipientName=function(t){var n=e.defer(),r=o.getRoom(t);return null!==r?n.resolve(r.userName):a.getSingleRoom(t).$promise.then(function(e){n.resolve(e.userName)}),n.promise},f.getRecipientHashedId=function(t){var n=e.defer(),r=o.getRoom(t);return null!==r?n.resolve(r.userId):a.getSingleRoom(t).$promise.then(function(e){n.resolve(e.userId)}),n.promise},f.getRecipientUserData=function(t){var o=e.defer();return f.getRecipientHashedId(t).then(function(e){a.getOtherUser(e).$promise.then(function(e){o.resolve(e)})}),o.promise},f.getMessagesFromBackend=function(t){var o=e.defer(),r=d(t);return null!==r?o.resolve(r):window.cordova&&n.isInitialized()?n.getRoomMessages(t).then(function(e){for(var n=[],r=0;r<e.length;r++)n.push(f.formatMessage(e[r]));n.sort(function(e,t){return e.timestamp-t.timestamp}),p[t]=n,o.resolve(n)}):a.getRoomMessages(t).$promise.then(function(e){var n=[];e.forEach(function(e){n.push(f.formatMessage(e))}),n.sort(function(e,t){return e.timestamp-t.timestamp}),p[t]=n,o.resolve(n)}),o.promise},f}]),angular.module("letterbox.services").service("ChromeNotifService",["$timeout","eventbus","ChatService",function(e,t,o){function n(t,o){var n=new r(t,{body:o,icon:"img/android-icon-48x48.png"});n.onshow=function(){e(function(){n.close()},1e4)}}if(-1!==document.URL.indexOf("http://")||-1!==document.URL.indexOf("https://")){var r=window.Notification||window.mozNotification||window.webkitNotification;"granted"!==r.permission&&r.requestPermission(),t.registerListener("roomMessage",function(e){var t=e.message,r=e.senderName,i=o.formatMessage(t);i.isOwner||n(r,i.content)})}}]),angular.module("letterbox.services").service("DbService",["$q","$window","socket","backend","eventbus",function(e,t,o,n,r){function i(e){c.isInitialized()||e.reject({err:"DbService not initialized"})}function a(){var t=e.defer();return s.sqlite.transaction(function(e){e.executeSql("SELECT * FROM rooms",[],function(e,o){for(var n=[],r=0;r<o.rows.length;r++){var i=o.rows.item(r);n.push({hash:i.hash,userId:i.userId,userName:i.userName,thumbnail:i.thumbnail,profilePicture:i.profilePicture,createdAt:i.createdAt})}t.resolve(n)})}),t.promise}var s={isInitialized:!1},c={};return c.isInitialized=function(){return s.isInitialized&&"undefined"!=typeof s.sqlite},c.init=function(){window.cordova&&document.addEventListener("deviceready",function(){s.sqlite=t.sqlitePlugin.openDatabase({name:"letterbox.db",createFromLocation:1}),s.sqlite.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS rooms (hash CHAR(32) PRIMARY KEY, userId CHAR(32) NOT NULL, userName VARCHAR(256) NOT NULL, thumbnail TEXT NOT NULL, profilePicture TEXT NOT NULL, createdAt DATETIME NOT NULL)"),e.executeSql("CREATE TABLE IF NOT EXISTS messages (roomHash CHAR(32) NOT NULL REFERENCES rooms(hash), sender VARCHAR(256) NOT NULL, content TEXT NOT NULL, timeSent BIGINT NOT NULL, isRead BOOLEAN NOT NULL DEFAULT 0, type VARCHAR(256) NOT NULL DEFAULT 'message', DealId INTEGER, PRIMARY KEY (roomHash, sender, timeSent))"),s.sqlite.executeSql("PRAGMA user_version",[],function(e){var t=e.rows.item(0).user_version;1>t&&(s.sqlite.executeSql("ALTER TABLE messages ADD COLUMN type VARCHAR(256) NOT NULL DEFAULT 'message'"),s.sqlite.executeSql("ALTER TABLE messages ADD COLUMN DealId INTEGER"),s.sqlite.executeSql("PRAGMA user_version=1")),s.isInitialized=!0,r.call("dbInitialized")})})},!1)},c.addRoom=function(t,o,n,r,a,c){var l=e.defer();return i(l),s.sqlite.transaction(function(e){e.executeSql("SELECT COUNT(*) AS cnt FROM rooms WHERE hash=?",[t],function(e,i){i.rows.item(0).cnt?e.executeSql("UPDATE rooms SET userName=?, thumbnail=?, profilePicture=? WHERE hash=?",[n,r,a,t],function(e,t){l.resolve(t)}):e.executeSql("INSERT INTO rooms VALUES (?,?,?,?,?,?)",[t,o,n,r,a,c],function(e,t){l.resolve(t)})})}),l.promise},c.addMessage=function(t,o,n,r,a,l,u){var d=e.defer();return i(d),s.sqlite.transaction(function(e){e.executeSql("SELECT COUNT(*) AS cnt FROM messages WHERE roomHash=? AND sender=? AND content=? AND timeSent=?",[t,o,n,r],function(e,i){i.rows.item(0).cnt?d.reject({error:"message already exists"}):e.executeSql("INSERT INTO messages (roomHash, sender, content, timeSent, isRead, type, DealId) VALUES (?,?,?,?,?,?,?)",[t,o,n,r,a,l?l:"message",u?u:null],function(e,o){a&&c.markMessagesAsRead(t,r),d.resolve(o)})})}),d.promise},c.markMessagesAsRead=function(t,o){var n=e.defer();return i(n),s.sqlite.transaction(function(e){e.executeSql("UPDATE messages SET isRead=1 WHERE roomHash=? AND timeSent<=?",[t,o],function(e,t){n.resolve(t)})}),n.promise},c.getSingleRoom=function(t){var o=e.defer();return i(o),s.sqlite.transaction(function(e){e.executeSql("SELECT * FROM rooms WHERE hash=?",[t],function(e,n){if(n.rows.length>0){var r=n.rows.item(0),i={hash:r.hash,userId:r.userId,userName:r.userName,thumbnail:r.thumbnail,profilePicture:r.profilePicture,createdAt:r.createdAt,latestMessage:{}};e.executeSql("SELECT * FROM messages WHERE roomHash=? ORDER BY timeSent DESC LIMIT 1",[t],function(e,n){if(n.rows.length>0){var r=n.rows.item(0);i.latestMessage.sender=r.sender,i.latestMessage.content=r.content,i.latestMessage.timeSent=r.timeSent}e.executeSql("SELECT COUNT(*) AS unreadCount FROM messages WHERE roomHash=? AND isRead!=1 AND sender<>?",[t,window.localStorage.getItem("hashedId")],function(e,t){i.unreadCount=t.rows.item(0).unreadCount,o.resolve(i)})})}else o.reject({error:"room does not exist"})})}),o.promise},c.updateRooms=function(){var t=e.defer();return n.getRooms().$promise.then(function(e){e.forEach(function(e){c.addRoom(e.hash,e.userId,e.userName,e.thumbnail,e.profilePicture,e.createdAt).then(function(e){})}),t.resolve(e)}),t.promise},c.getRooms=function(){var t=e.defer();return i(t),o.isConnected()?c.updateRooms().then(t.resolve):a().then(t.resolve),t.promise},c.getRoomMessages=function(t){var o=e.defer();return i(o),s.sqlite.transaction(function(e){e.executeSql("SELECT * FROM messages WHERE roomHash=? ORDER BY timeSent ASC",[t],function(e,t){for(var n=[],r=0;r<t.rows.length;r++){var i=t.rows.item(r);n.push({RoomHash:i.roomHash,content:i.content,timeSent:i.timeSent,sender:i.sender,type:i.type,DealId:i.DealId})}o.resolve(n)})}),o.promise},c.getUnreadCounts=function(){var t=e.defer();return i(t),s.sqlite.transaction(function(e){e.executeSql("SELECT roomHash, COUNT(*) as cnt FROM messages GROUP BY roomHash, isRead HAVING isRead=0",[],function(e,o){t.resolve(o)})}),t.promise},c.getLatestTimeSent=function(){var t=e.defer();return i(t),s.sqlite.transaction(function(e){e.executeSql("SELECT MAX(timeSent) as maxtime FROM messages",[],function(e,o){o.rows.length>0?t.resolve(o.rows.item(0).maxtime):t.resolve(0)})}),t.promise},c.getLastestMessage=function(t){var o=e.defer();return i(o),s.sqlite.transaction(function(e){e.executeSql("SELECT sender, content, timeSent FROM messages WHERE roomHash=? ORDER BY timeSent DESC LIMIT 1",[t],function(e,t){o.resolve(t.rows.item(0))})}),o.promise},c.deleteRoom=function(t){var o=e.defer();return i(o),s.sqlite.transaction(function(e){e.executeSql("DELETE FROM rooms WHERE hash=?",[t],function(e,t){o.resolve(t)})}),o.promise},c.deleteRoomMessages=function(t){var o=e.defer();return i(o),s.sqlite.transaction(function(e){e.executeSql("DELETE FROM messages WHERE roomHash=?",[t],function(e,t){o.resolve(t)})}),o.promise},c.clearAll=function(){var t=e.defer();return i(t),c.isInitialized()&&s.sqlite.transaction(function(e){e.executeSql("DELETE FROM messages",[],function(e,o){e.executeSql("DELETE FROM rooms",[],function(e,o){t.resolve()})})}),t.promise},c}]),angular.module("letterbox.services").service("DealService",["$q","backend",function(e,t){var o=this;o.showShare=!1,o.getAllDeals=function(e,t){return o.getDeals("all",e,t)},o.getDeals=function(o,n,r){var i=e.defer();return t.getDealsByCat(o,n,r).then(i.resolve,i.reject),i.promise},o.getFeaturedDeals=function(o,n){var r=e.defer();return t.getFeaturedDeals(o,n).then(r.resolve,r.reject),r.promise},o.getDeal=function(o){var n=e.defer();return t.getDealById(o).then(n.resolve,n.reject),n.promise},o.toggleDealLike=function(o){var n=e.defer();return t.toggleDealLike(o).then(n.resolve,n.reject),n.promise},o.getOwnLikedDeals=function(){var o=e.defer();return t.getUserLikedDeals("self").then(o.resolve,o.reject),o.promise},o.getUserLikedDeals=function(o){var n=e.defer();return t.getUserLikedDeals(o).then(n.resolve,n.reject),n.promise},o.getMutualLikedDeals=function(o){var n=e.defer();return t.getMutualLikedDeals(o).then(n.resolve,n.reject),n.promise},o.checkDealCompatability=function(o){var n=e.defer();return t.getOtherUserVersion(o).then(function(e){e.minor>=1?n.resolve():n.reject()},n.reject),n.promise}}]),angular.module("letterbox.services").service("eventbus",["$q",function(e){function t(t,o){return e(function(e,n){try{t(o),e()}catch(r){console.log(r.stack),n()}})}var o={},n={};return o.deregisterAllListeners=function(e){console.log("deregistered listener: "+e),n[e]instanceof Array&&(n[e]=[])},o.registerListener=function(e,t){console.log("registered listener: "+e),n[e]instanceof Array?n[e].push(t):n[e]=[t]},o.call=function(e,o){if(console.log("called listener: "+e),n[e]instanceof Array)for(var r=0;r<n[e].length;r++){var i=t(n[e][r],o);i.then(function(){console.log("successfully called "+e)},function(){console.log("error when calling "+e)})}},o}]),angular.module("letterbox.services").service("letterService",function(){var e=this;e.targetUserCard={},e.setTargetUserCard=function(t){e.targetUserCard=t}}),angular.module("letterbox.services").service("LocalNotificationService",["$state","eventbus","BackgroundService",function(e,t,o){function n(){window.cordova&&(window.cordova.plugins.notification.local.on("click",function(t){var o=JSON.parse(t.data);"room"===o.type?e.go("app.chat",{chatId:o.RoomHash}):"letter"===o.type&&e.go("app.notifications")}),t.registerListener("roomMessage",function(t){t.message.sender===window.localStorage.getItem("hashedId")||!o.isInBackground()&&e.includes("app.chat",{chatId:t.message.RoomHash})||window.cordova.plugins.notification.local.schedule({id:1,text:t.senderName+": "+t.message.content,data:{type:"room",RoomHash:t.message.RoomHash},smallIcon:"res://notification"})}),t.registerListener("roomCreated",function(e){o.isInBackground()&&window.cordova.plugins.notification.local.schedule({id:1,text:e.approverName+" just started a chat with you!",data:{type:"room",RoomHash:roomMessage.message.RoomHash},smallIcon:"res://notification"})}),t.registerListener("letterReceived",function(e){o.isInBackground()&&window.cordova.plugins.notification.local.schedule({id:1,text:"You've received a letter!",data:{type:"letter",LetterHash:e.hash},smallIcon:"res://notification"})}))}var r={};return r.clearLocalNotifications=function(){window.cordova&&window.cordova.plugins.notification.local.clearAll(function(){},this)},o.registerOnResume(function(){r.clearLocalNotifications()}),document.addEventListener("deviceready",n,!1),r}]),angular.module("letterbox.services").service("MatchService",["$q","$ImageCacheFactory","backend","AuthService",function(e,t,o,n){var r=this;r.previousId="",r.getMatch=function(){var i=e.defer();if(n.isRegistered()){var a=window.localStorage.getItem("distanceRadius")?window.localStorage.getItem("distanceRadius"):50,s=window.localStorage.getItem("minAge")?window.localStorage.getItem("minAge"):18,c=window.localStorage.getItem("maxAge")?window.localStorage.getItem("maxAge"):80;o.getMatch(a,r.previousId,s,c).$promise.then(function(e){200===e.code?t.Cache([e.pictureMed]).then(function(){r.previousId=e.hashedId,i.resolve(e)},function(){i.reject()}):i.reject()},function(e){i.reject()})}else i.reject();return i.promise}}]),angular.module("letterbox.services").service("NotificationsService",["$q","backend",function(e,t){function o(e){for(var t=[],o=0;o<e.LetterAnswers.length;o++){var n=e.LetterAnswers[o];t.push({option0:n.WyrQuestion.option0,option1:n.WyrQuestion.option1,answer:n.answer,isCorrect:n.isCorrect})}var r="answered your questions. Click here to see "+("male"===e.UserAccount.gender?"his":"her")+" responses.";return{id:e.hash,userId:e.UserAccount.hashedId,isRead:e.isRead,createdAt:e.createdAt,from:e.UserAccount.firstName,fromGender:e.UserAccount.gender,age:(new Date).getYear()-new Date(e.UserAccount.birthday).getYear(),bio:e.UserAccount.bio,profilePicThumb:e.UserAccount.pictureThumb,profilePicMed:e.UserAccount.pictureMed,questionsAnswers:t,message:r,likedDeals:[]}}var n=[],r="letters";return{getTab:function(){return r},setTab:function(e){r=e},getNotificationsList:function(){var r=e.defer();return t.getAllLetters().$promise.then(function(e){var t=[];e.forEach(function(e){t.push(o(e))}),n=t,r.resolve(t)}),r.promise},getNumberOfNotifications:function(){var o=e.defer();return t.getAllLetters().$promise.then(function(e){var t=0;e.forEach(function(e){e.isRead||t++}),o.resolve(t)}),o.promise},getNotificationFromId:function(t){var o=e.defer(),r=!1;return 0!==n.length?(n.forEach(function(e){e.id===t&&(r=!0,o.resolve(e))}),r||o.resolve(null),o.promise):void this.getNotificationsList().then(function(o){var i=e.defer();return n.forEach(function(e){e.id===t&&(r=!0,i.resolve(e))}),r||i.resolve({}),i.promise})}}}]),angular.module("letterbox.services").service("ProfileService",["$q","backend",function(e,t){return{getProfile:function(){var o=e.defer();return t.getUserSelf().$promise.then(function(e){o.resolve(e)}),o.promise},getOtherProfile:function(o){var n=e.defer();return t.getOtherUser(o).$promise.then(function(e){n.resolve(e)}),n.promise},getNewQuestion:function(o){var n=e.defer();return t.getOneRandomQuestion(o).$promise.then(function(e){n.resolve(e)},function(e){n.resolve(null)}),n.promise},updateBio:function(o){var n=e.defer();return t.updateUserBio(o,function(e){n.resolve(e)},function(e){n.resolve(null)}),n.promise},updateQuestions:function(o){var n=e.defer();return t.setQuestionsAndAnswers(o,function(e){n.resolve(e)},function(e){n.resolve(null)}),n.promise},getProfilePictures:function(){var o=e.defer();return t.getProfilePhotos().$promise.then(function(e){var t=[];e.forEach(function(e){t.push(e)}),o.resolve(t)},function(e){o.reject(e)}),o.promise},updateProfilePicture:function(o){var n=e.defer();return t.setProfilePhoto(o,n.resolve,n.reject),n.promise}}}]),angular.module("letterbox.services").service("PushService",["backend",function(e){return{updatePushToken:function(){var t=window.localStorage.getItem("pushToken");t&&e.updatePushToken(t)}}}]),angular.module("letterbox.services").service("ReportService",["$q","$ionicPopup","backend",function(e,t,o){var n={};return n.reportUser=function(t,n){var r=e.defer();return o.reportUser(t,n,r.resolve,r.reject),r.promise},n.showReportPopup=function(e,o,r,i){return r.report={reason:""},r.warning="",t.show({template:'<textarea ng-model="report.reason"></textarea><p class="warning">{{ warning }}</p>',title:"Report "+e+"?",subTitle:"Please enter a reason behind this report",cssClass:"popup-alert",scope:r,buttons:[{text:"Cancel"},{text:"Report",type:"button-positive",onTap:function(e){!r.report.reason||r.report.reason.length<=10?(e.preventDefault(),r.warning="Please enter a reason at least 10 characters long."):n.reportUser(o,r.report.reason).then(function(){r.report.reason="","undefined"!=typeof i&&i()})}}]})},n}]),angular.module("letterbox.services").service("RoomsService",["$q","backend","DbService","eventbus",function(e,t,o,n){function r(e){var t=e.latestMessage,o=t.content?(t.sender===window.localStorage.getItem("hashedId")?"You: ":e.userName+": ")+t.content:"No messages yet",n=t.timeSent?new Date(t.timeSent):new Date(e.createdAt);return{id:e.hash,from:e.userName,profile_pic:e.thumbnail,last_message:o,last_activity:n,unread_count:e.unreadCount}}function i(e){for(var t=0;t<e.length;t++){var o=e[t];a.getLatestRoomInfo(o.hash).then(function(e){for(var t=r(e),o=!1,i=!1,a=0;a<c.length;a++)if(c[a].id===t.id){c[a].last_message!==t.last_message&&(c[a].last_message=t.last_message,i=!0),c[a].last_activity.getTime()!==t.last_activity.getTime()&&(c[a].last_activity=t.last_activity,i=!0),c[a].unread_count!==t.unread_count&&(c[a].unread_count=t.unread_count,n.call("unreadCountChanged"),i=!0),o=!0;break}o||(c.push(t),t.unread_count&&n.call("unreadCountChanged"),i=!0),i&&(c.sort(function(e,t){return t.last_activity.getTime()-e.last_activity.getTime()}),l&&l.$apply(),u&&u.$apply())})}}var a={},s=[],c=[],l=null,u=null;return n.registerListener("roomsUpdated",function(e){s=e,i(e)}),n.registerListener("roomRead",function(e){for(var t=0;t<c.length;t++){var o=c[t];if(o.id===e.roomHash){o.unread_count=0;break}}n.call("unreadCountChanged")}),n.registerListener("roomMessage",function(e){for(var t=e.message,o=0;o<c.length;o++)if(c[o].id===t.RoomHash){c[o].last_message=(t.sender===window.localStorage.getItem("hashedId")?"You: ":c[o].from+": ")+t.content,c[o].last_activity=new Date(t.timeSent),t.sender!==window.localStorage.getItem("hashedId")&&(c[o].unread_count++,n.call("unreadCountChanged"));break}c.sort(function(e,t){return t.last_activity.getTime()-e.last_activity.getTime()})}),a.getTotalUnreadCount=function(){for(var t=e.defer(),o=0,n=0;n<c.length;n++)o+=c[n].unread_count;return t.resolve(o),t.promise},a.setChatsPageScope=function(e){l=e},a.setNotifsPageScope=function(e){u=e},a.getChats=function(){return c},a.getRoom=function(e){for(var t=0;t<s.length;t++)if(s[t].hash===e)return s[t];return null},a.getLatestRoomInfo=function(n){var r=e.defer();return window.cordova&&o.isInitialized()?o.getSingleRoom(n).then(function(e){r.resolve(e)}):t.getSingleRoom(n).$promise.then(function(e){r.resolve(e)}),r.promise},a.updateRooms=function(){window.cordova&&o.isInitialized()?o.getRooms().then(function(e){n.call("roomsUpdated",e)}):t.getRooms().$promise.then(function(e){var t=[];e.forEach(function(e){t.push(e)}),n.call("roomsUpdated",t)})},a.getRoomLetter=function(o){var n=e.defer();return t.getSingleRoom(o).$promise.then(function(e){n.resolve(e.letter)},function(){n.reject()}),n.promise},n.registerListener("loginCompleted",a.updateRooms),a}]),angular.module("letterbox.services").service("socket",["$q","eventbus",function(e,t){var o="http://ec2-52-74-138-177.ap-southeast-1.compute.amazonaws.com",n={isInitialized:!1,socketio:null},r={};return r.uninit=function(){n.isInitialized=!1,n.socketio.disconnect(),n.socketio=null},r.init=function(){console.log("Initializing Socket IO...");var e=window.localStorage.getItem("token");!n.isInitialized&&e&&(n.isInitialized=!0,n.socketio=io.connect(o,{query:"token="+e}),n.socketio.connect(),n.socketio.on("connect",function(){t.call("socketConnected")}),n.socketio.on("disconnect",function(){t.call("socketDisconnected")}),n.socketio.on("roomCreated",function(e){t.call("roomCreated",e)}),n.socketio.on("roomMessage",function(e){t.call("roomMessage",e)}),n.socketio.on("letter",function(e){t.call("letterReceived",e)}),n.socketio.on("roomRead",function(e){t.call("roomRead",e)}))},r.isConnected=function(){return n.isInitialized&&n.socketio.connected},r.roomRead=function(t,o){var i=e.defer();if(r.isConnected()){var a={roomHash:t,time:o};n.socketio.emit("roomRead",a),i.resolve(a)}else n.isInitialized&&n.socketio.connected?i.reject({error:"socketio not connected"}):i.reject({error:"socketio not initialized"});return i.promise},r.sendMessage=function(t,o){var i=e.defer();if(r.isConnected()){var o={roomHash:t,message:o,type:"message"};n.socketio.emit("roomMessage",o),i.resolve(o)}else n.isInitialized&&n.socketio.connected?i.reject({error:"socketio not connected"}):i.reject({error:"socketio not initialized"});return i.promise},r.shareDeal=function(t,o,i){var a=e.defer();if(r.isConnected()){var o={roomHash:t,message:o,type:"share",dealId:i};n.socketio.emit("roomMessage",o),a.resolve(o)}else n.isInitialized&&n.socketio.connected?a.reject({error:"socketio not connected"}):a.reject({error:"socketio not initialized"});return a.promise},r}]),angular.module("letterbox.services").service("VibrateService",["$cordovaVibration","$state","ChatService","eventbus",function(e,t,o,n){function r(){e.vibrate(100)}document.addEventListener("deviceready",function(){window.cordova&&(n.registerListener("roomCreated",r),n.registerListener("letterReceived",r))},!1)}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy9yb3V0ZXMuanMiLCJjb250cm9sbGVycy9hcHBDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvY2FyZHNDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvY2F0ZWdvcmllc0NvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9jaGF0Q29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL2NoYXRzQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL2RlYWxDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvZGVhbHNDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvaG9tZUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9sZXR0ZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbGlrZWREZWFsc0NvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9ub3RpZmljYXRpb25zQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL29uYm9hcmRpbmdDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvb3RoZXJMZXR0ZXJDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvb3RoZXJQcm9maWxlQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3Byb2ZpbGVDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcmVzcG9uc2VDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvc2V0dGluZ3NDb250cm9sbGVyLmpzIiwiZGlyZWN0aXZlcy9kZWFsQ2FyZERpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZXMvZGVhbExpa2VCdXR0b25EaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL2ZsaXBDYXJkRGlyZWN0aXZlLmpzIiwiZGlyZWN0aXZlcy9ub1Njcm9sbERpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZXMvcHJvZmlsZUNhcmREaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3Byb2ZpbGVQaWNTbWFsbERpcmVjdGl2ZS5qcyIsInBhdGNoZXMvYW5ndWxhci1pb3M5LXVpd2Vidmlldy5wYXRjaC5qcyIsInNlcnZpY2VzL0xvY2F0aW9uU2VydmljZS5qcyIsInNlcnZpY2VzL2F1dGhTZXJ2aWNlLmpzIiwic2VydmljZXMvYmFja2VuZC5qcyIsInNlcnZpY2VzL2JhY2tncm91bmRTZXJ2aWNlLmpzIiwic2VydmljZXMvY2F0ZWdvcnlTZXJ2aWNlLmpzIiwic2VydmljZXMvY2hhdFNlcnZpY2UuanMiLCJzZXJ2aWNlcy9jaHJvbWVOb3RpZlNlcnZpY2UuanMiLCJzZXJ2aWNlcy9kYlNlcnZpY2UuanMiLCJzZXJ2aWNlcy9kZWFsU2VydmljZS5qcyIsInNlcnZpY2VzL2V2ZW50YnVzLmpzIiwic2VydmljZXMvbGV0dGVyU2VydmljZS5qcyIsInNlcnZpY2VzL2xvY2FsTm90aWZpY2F0aW9uU2VydmljZS5qcyIsInNlcnZpY2VzL21hdGNoU2VydmljZS5qcyIsInNlcnZpY2VzL25vdGlmaWNhdGlvbnNTZXJ2aWNlLmpzIiwic2VydmljZXMvcHJvZmlsZVNlcnZpY2UuanMiLCJzZXJ2aWNlcy9wdXNoU2VydmljZS5qcyIsInNlcnZpY2VzL3JlcG9ydFNlcnZpY2UuanMiLCJzZXJ2aWNlcy9yb29tc1NlcnZpY2UuanMiLCJzZXJ2aWNlcy9zb2NrZXQuanMiLCJzZXJ2aWNlcy92aWJyYXRlU2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJtYWpvciIsIm1pbm9yIiwicmV2aXNpb24iLCJydW4iLCIkaW9uaWNQbGF0Zm9ybSIsIiRyb290U2NvcGUiLCJldmVudGJ1cyIsIiRvbiIsImNvbnNvbGUiLCJsb2ciLCJiaW5kIiwicmVhZHkiLCJ3aW5kb3ciLCJjb3Jkb3ZhIiwicHVzaCIsIklvbmljIiwiUHVzaCIsInBsdWdpbkNvbmZpZyIsImFuZHJvaWQiLCJpY29uIiwiaWNvbkNvbG9yIiwicmVnaXN0ZXIiLCJ0b2tlbiIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJjYWxsIiwibmF2aWdhdG9yIiwic3BsYXNoc2NyZWVuIiwiaGlkZSIsInBsdWdpbnMiLCJLZXlib2FyZCIsImhpZGVLZXlib2FyZEFjY2Vzc29yeUJhciIsImRpc2FibGVTY3JvbGwiLCJTdGF0dXNCYXIiLCJwbGF0Zm9ybUlkIiwiYmFja2dyb3VuZENvbG9yQnlIZXhTdHJpbmciLCJzdHlsZURlZmF1bHQiLCJjb25maWciLCJGYWNlYm9va1Byb3ZpZGVyIiwiaW5pdCIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCIkc3RhdGVQYXJhbXMiLCJvbmJvYXJkU3RlcCIsImFic3RyYWN0Iiwidmlld3MiLCJtZW51Q29udGVudCIsImNhY2hlIiwiZGVmYXVsdFJvdXRlIiwiZ2V0SXRlbSIsIm90aGVyd2lzZSIsIiRzY29wZSIsIiRzdGF0ZSIsIiRsb2NhdGlvbiIsIiRpb25pY1BvcHVwIiwiJGlvbmljTG9hZGluZyIsInNvY2tldCIsIkxvY2F0aW9uU2VydmljZSIsIkxvY2FsTm90aWZpY2F0aW9uU2VydmljZSIsIkJhY2tncm91bmRTZXJ2aWNlIiwiRGJTZXJ2aWNlIiwiUm9vbXNTZXJ2aWNlIiwiQ2hhdFNlcnZpY2UiLCJBdXRoU2VydmljZSIsIlB1c2hTZXJ2aWNlIiwiQ2hyb21lTm90aWZTZXJ2aWNlIiwiVmlicmF0ZVNlcnZpY2UiLCJ1c2VybmFtZSIsInJlZ2lzdGVyTGlzdGVuZXIiLCJ1cGRhdGVMb2NhdGlvbiIsInVwZGF0ZVB1c2hUb2tlbiIsInN5bmMiLCJkYXRhIiwidXBkYXRlUm9vbXMiLCJjb25maXJtIiwidGl0bGUiLCJhcHByb3Zlck5hbWUiLCJ0ZW1wbGF0ZSIsImNzc0NsYXNzIiwidGhlbiIsInJlcyIsImdvIiwiY2hhdElkIiwicm9vbSIsImhhc2giLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJzaG93TG9hZGluZyIsInNob3ciLCJoaWRlTG9hZGluZyIsInJlbmV3VG9rZW4iLCJhbGVydFBvcHVwIiwiYWxlcnQiLCJjdXJyZW50UGFnZSIsInBhdGgiLCJzcGxpdCIsIiRlbGVtZW50IiwiJHRpbWVvdXQiLCIkSW1hZ2VDYWNoZUZhY3RvcnkiLCIkaW9uaWNIaXN0b3J5IiwiYmFja2VuZCIsImxldHRlclNlcnZpY2UiLCJNYXRjaFNlcnZpY2UiLCJSZXBvcnRTZXJ2aWNlIiwiY2hlY2tBbmRHZXRDYXJkIiwiY2FyZHMiLCJsZW5ndGgiLCJnZXRDYXJkIiwiY2hhbmdlQ2FyZCIsImlzTG9hZGluZyIsImdldE1hdGNoIiwibWF0Y2giLCJjcmVhdGVOZXdDYXJkIiwic2VsZWN0Rmlyc3QiLCJyZW1vdmVDbGFzcyIsInJlbW92ZVRvcENhcmQiLCJzaGlmdCIsImhhc2hlZElkIiwibmFtZSIsImZpcnN0TmFtZSIsImFnZSIsImxvY2F0aW9uIiwiTWF0aCIsImZsb29yIiwiZGlzdGFuY2UiLCJiaW8iLCJwcm9maWxlX3BpYyIsInBpY3R1cmVNZWQiLCJxdWVzdGlvbnMiLCJtdXR1YWxfZnJpZW5kc19jb3VudCIsIm11dHVhbEZyaWVuZHMiLCJzdW1tYXJ5IiwidG90YWxfY291bnQiLCJsaWtlZERlYWxzIiwic2VsZWN0b3IiLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImFkZENsYXNzIiwiYWRkQ2FyZCIsIm9wZW5TZW5kTGV0dGVyIiwiY2FyZCIsIm5leHRWaWV3T3B0aW9ucyIsImRpc2FibGVBbmltYXRlIiwiZGlzYWJsZUJhY2siLCJzZXRUYXJnZXRVc2VyQ2FyZCIsInNwbGljZSIsIkNhdGVnb3J5U2VydmljZSIsImdldENhdGVnb3JpZXMiLCJjYXRlZ29yaWVzIiwidmlld0NhdGVnb3J5IiwiY2F0ZWdvcnlUaXRsZSIsImNhdGVnb3J5Iiwidmlld0xpa2VkIiwiJGlvbmljU2Nyb2xsRGVsZWdhdGUiLCIkaW9uaWNNb2RhbCIsIiR3aW5kb3ciLCIkaW9uaWNQb3BvdmVyIiwiRGVhbFNlcnZpY2UiLCJtZXNzYWdlcyIsInJlY2lwaWVudCIsInJlY2lwaWVudElkIiwibWVzc2FnZSIsInZpZXdpbmdEZWFscyIsImZyb21TdWJQYWdlIiwiZGVhbHMiLCJvd24iLCJ1c2VyIiwibXV0dWFsIiwibGltaXQiLCJyb29tSGFzaCIsImdldFJvb20iLCJmcm9tVGVtcGxhdGVVcmwiLCJzY29wZSIsInBvcG92ZXIiLCJvbktleWJvYXJkSGlkZSIsIiRhcHBseSIsInNjcm9sbEJvdHRvbSIsIm9uS2V5Ym9hcmRTaG93Iiwic2NvcGVzIiwic3RhdGVzIiwiZ2V0UmVjaXBpZW50TmFtZSIsImdldFJlY2lwaWVudEhhc2hlZElkIiwiZ2V0TWVzc2FnZXNGcm9tQmFja2VuZCIsInNldEN1cnJlbnRSb29tIiwicm9vbVJlYWQiLCJ0aW1lc3RhbXAiLCJnZXRUaW1lIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImxvYWRQcmV2aW91cyIsInByZXZpb3VzSGVpZ2h0IiwiJCIsImhlaWdodCIsIm1pbiIsIiRnZXRCeUhhbmRsZSIsInNjcm9sbEJ5Iiwib25LZXlQcmVzcyIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsInNlbmRNZXNzYWdlIiwiY29udGVudCIsImFuaW1hdGlvbiIsIm1vZGFsIiwic2hhcmVNb2RhbCIsIm9wZW5TaGFyZU1vZGFsIiwiY2hlY2tEZWFsQ29tcGF0YWJpbGl0eSIsImZldGNoTGlrZWREZWFscyIsImNsb3NlU2hhcmVNb2RhbCIsInJlbW92ZSIsInNob3dQb3BvdmVyIiwiJGV2ZW50Iiwic2hvd090aGVyVXNlclByb2ZpbGUiLCJ1c2VySWQiLCJjbG9zZVBvcG92ZXIiLCJzaG93UmVzcG9uc2VzIiwidmlld0RlYWwiLCJkZWFsIiwic2hvd1NoYXJlIiwiZGVhbElkIiwiaWQiLCJ2aWV3U2hhcmVkRGVhbCIsImdldE93bkxpa2VkRGVhbHMiLCJnZXRVc2VyTGlrZWREZWFscyIsImdldE11dHVhbExpa2VkRGVhbHMiLCJjaGF0cyIsInNldENoYXRzUGFnZVNjb3BlIiwiZ2V0Q2hhdHMiLCIkc2NlIiwiJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZSIsImdldERlYWwiLCJkZWFsU2hhcmVCdXR0b24iLCJzaGFyZURlYWwiLCJnb0JhY2siLCJ6b29tTWluIiwic2hvd0ltYWdlcyIsImluZGV4IiwiYWN0aXZlU2xpZGUiLCJzbGlkZSIsImNsb3NlTW9kYWwiLCJ1cGRhdGVTbGlkZVN0YXR1cyIsInpvb21GYWN0b3IiLCJnZXRTY3JvbGxQb3NpdGlvbiIsInpvb20iLCJlbmFibGVTbGlkZSIsIm9wZW5MaW5rIiwibGluayIsIm9wZW4iLCJjdXJyZW50Q2F0ZWdvcnkiLCJoYXNSZWFjaGVkRW5kIiwib2Zmc2V0IiwibG9hZERlYWxzIiwiZ2V0RmVhdHVyZWREZWFscyIsImFwcGVuZERlYWxzIiwiZ2V0RGVhbHMiLCJpIiwiJGJyb2FkY2FzdCIsIk5vdGlmaWNhdGlvbnNTZXJ2aWNlIiwidXBkYXRlTGV0dGVyQ291bnQiLCJnZXROdW1iZXJPZk5vdGlmaWNhdGlvbnMiLCJudW1iZXJPZkxldHRlcnMiLCJ1cGRhdGVNZXNzYWdlc0NvdW50IiwiZ2V0VG90YWxVbnJlYWRDb3VudCIsImNvdW50IiwibnVtYmVyT2ZNZXNzYWdlcyIsImdvTm90aWZpY2F0aW9ucyIsInJlc2V0Q2xhc3MiLCJzZWxlY3RlZFRhYiIsInVwZGF0ZVF1ZXN0aW9uVmlldyIsImN1cnIiLCJzZWxlY3RlZCIsImN1cnJlbnRRdWVzdGlvbiIsInVwZGF0ZVF1ZXN0aW9uQW5zd2VycyIsImFuc3dlcnMiLCJmb3JFYWNoIiwicXVlc3Rpb24iLCJhbnN3ZXIiLCJyZW1vdmVUb29sdGlwIiwidG9vbHRpcFNob3duIiwicXRpcCIsImNsZWFyQ2FjaGUiLCJ0YXJnZXRVc2VyIiwidGFyZ2V0VXNlckNhcmQiLCJtYXgiLCJ1c2VyTmFtZSIsIndhcm5pbmciLCJuZXh0UXVlc3Rpb24iLCJpbmRleE9mIiwic2VuZEFMZXR0ZXIiLCJwcmV2UXVlc3Rpb24iLCJzZWxlY3RUYWIiLCJ0YWIiLCJzdHlsZSIsImNsYXNzZXMiLCJ3aGVuIiwicmVmcmVzaE5vdGlmaWNhdGlvbnMiLCJnZXROb3RpZmljYXRpb25zTGlzdCIsIm5vdGlmaWNhdGlvbnMiLCJjdXJyZW50VGFiIiwiZ2V0VGFiIiwic2V0VGFiIiwicm9vbU1lc3NhZ2UiLCJSb29tSGFzaCIsImxhc3RfbWVzc2FnZSIsInNlbmRlciIsImZyb20iLCJsYXN0X2FjdGl2aXR5IiwiRGF0ZSIsInRpbWVTZW50IiwidW5yZWFkX2NvdW50Iiwic29ydCIsImEiLCJiIiwic2V0Tm90aWZzUGFnZVNjb3BlIiwic2VsZWN0Tm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uIiwiaXNSZWFkIiwic2VsZWN0ZWRMZXR0ZXIiLCJtYXJrTGV0dGVyQXNSZWFkIiwicmVzcG9uc2VJZCIsIiRjb3Jkb3ZhT2F1dGgiLCIkY29yZG92YUluQXBwQnJvd3NlciIsIiRjb3Jkb3ZhRmFjZWJvb2siLCJGYWNlYm9vayIsInVwZGF0ZVN0YXJ0QW5kRW5kVmFycyIsImN1cnJlbnRJbmRleCIsImlzQXRTdGFydCIsInNsaWRlc0NvdW50IiwiaXNBdEVuZCIsInNob3dFcnJvciIsIm9rVHlwZSIsIm9wZW5UZXJtc09mVXNlIiwiaGFyZHdhcmViYWNrIiwiY2xvc2VidXR0b25jYXB0aW9uIiwidG9vbGJhcnBvc2l0aW9uIiwiYXV0aGVudGljYXRlVG9rZW4iLCJmYlRva2VuIiwiYXV0aFRva2VuIiwic3VjY2VzcyIsImJlZ2luT25ib2FyZGluZyIsImVyciIsImRvTG9naW4iLCJsb2dpbiIsImF1dGhSZXNwb25zZSIsImFjY2Vzc1Rva2VuIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJyZXR1cm5fc2NvcGVzIiwiaXNSZWdpc3RlcmVkIiwic3RhcnRPbmJvYXJkIiwicHJldlNsaWRlIiwicHJldmlvdXMiLCJuZXh0U2xpZGUiLCJuZXh0IiwiZ2V0UmFuZG9tUXVlc3Rpb25zIiwiJHByb21pc2UiLCJnZXROZXdRbiIsInFuSWRzIiwibWFwIiwicW4iLCJnZXRPbmVSYW5kb21RdWVzdGlvbiIsInNlbGVjdE9wdGlvbiIsIm9wdGlvbiIsImNvbXBsZXRlT25ib2FyZGluZ1N0ZXAxIiwic2V0UXVlc3Rpb25zQW5kQW5zd2VycyIsImNvbXBsZXRlT25ib2FyZGluZyIsImNsZWFySGlzdG9yeSIsImlzTG9nZ2VkSW4iLCJnZXRSb29tTGV0dGVyIiwibGV0dGVyIiwiUHJvZmlsZVNlcnZpY2UiLCJnZXRPdGhlclByb2ZpbGUiLCJpc0Jpb1ZhbGlkIiwicHJvZmlsZSIsImhhc0Fuc3dlcmVkQWxsUXVlc3Rpb25zIiwic2hvd1N1Y2Nlc3MiLCJwcm9maWxlUGhvdG9zIiwiaXNMb2FkaW5nUGhvdG9zIiwiZ2V0UHJvZmlsZSIsIm5hbWVBbmRBZ2UiLCJvcGVuUHJvZmlsZVBob3RvTW9kYWwiLCJnZXRQcm9maWxlUGljdHVyZXMiLCJwaG90b3MiLCJ1cGRhdGVQcm9maWxlUGhvdG8iLCJoaWRlUHJvZmlsZVBob3RvTW9kYWwiLCJ1cGRhdGVQcm9maWxlUGljdHVyZSIsInBpY3R1cmVUaHVtYiIsIm9sZFFuIiwiZ2V0TmV3UXVlc3Rpb24iLCJvbkVudGVyVGV4dCIsInVwZGF0ZVByb2ZpbGUiLCJlcnJvcnMiLCJ1cGRhdGVCaW8iLCJ1cGRhdGVRdWVzdGlvbnMiLCJqb2luIiwiZ2V0Tm90aWZpY2F0aW9uIiwiaXNFeGlzdGluZ0NoYXQiLCJnZXROb3RpZmljYXRpb25Gcm9tSWQiLCJudW1Db3JyZWN0IiwicXVlc3Rpb25zQW5zd2VycyIsImZpbHRlciIsIm9iaiIsImlzQ29ycmVjdCIsInJlamVjdExldHRlciIsImFwcHJvdmVMZXR0ZXIiLCJyZXBvcnRVc2VyIiwiY2FsbGJhY2siLCJzaG93UmVwb3J0UG9wdXAiLCJWRVJTSU9OIiwibWluQWdlIiwibWF4QWdlIiwidmVyc2lvbk1ham9yIiwidmVyc2lvbk1pbm9yIiwidmVyc2lvblJldmlzaW9uIiwicGVyZmVjdE1hdGNoIiwicHJlZmVycmVkR2VuZGVyIiwiZGlzdGFuY2VSYWRpdXMiLCJwcmVmZXJlbmNlIiwib25DaGFuZ2VQZXJmZWN0TWF0Y2giLCJ1cGRhdGVQZXJmZWN0TWF0Y2giLCJvbkNoYW5nZVByZWZlcnJlZEdlbmRlciIsInVwZGF0ZUdlbmRlclByZWZlcmVuY2UiLCJvbkNoYW5nZURpc3RhbmNlUmFkaXVzIiwiJHdhdGNoIiwiaXNOYU4iLCJvcGVuUHJpdmFjeVBvbGljeSIsImxvZ291dCIsIm9rVGV4dCIsImNhbmNlbFRleHQiLCJmZWVkYmFjayIsImRpcmVjdGl2ZSIsIiRkb2N1bWVudCIsInJlc3RyaWN0IiwicmVwbGFjZSIsImxlYXJuTW9yZSIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJ0b2dnbGVMaWtlIiwiY3RybCIsImlzTGlrZWQiLCJsaWtlQ291bnQiLCJ0b2dnbGVEZWFsTGlrZSIsIiRhdHRyIiwib24iLCJlIiwidG9nZ2xlQ2xhc3MiLCJ0aGlzIiwidHJhbnNjbHVkZSIsInNob3dQcm9maWxlUGljIiwiJHByb3ZpZGUiLCJkZWNvcmF0b3IiLCIkZGVsZWdhdGUiLCJpc0lPUzlVSVdlYlZpZXciLCJ1c2VyQWdlbnQiLCJ0ZXN0IiwiYXBwbHlJT1M5U2hpbSIsImJyb3dzZXIiLCJjbGVhclBlbmRpbmdMb2NhdGlvblVybCIsInBlbmRpbmdMb2NhdGlvblVybCIsIm9yaWdpbmFsVXJsRm4iLCJhcmd1bWVudHMiLCJhcHBseSIsInNlcnZpY2UiLCIkY29yZG92YUdlb2xvY2F0aW9uIiwibG9jYXRpb25PYnRhaW5lZENhbGxiYWNrIiwicG9zaXRpb24iLCJ1cGRhdGVCYWNrZW5kTG9jYXRpb24iLCJjb29yZHMiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImdldENvcmRvdmFMb2NhdGlvbiIsIm9wdGlvbnMiLCJ0aW1lb3V0IiwiZW5hYmxlSGlnaEFjY3VyYWN5IiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwiZ2V0SHRtbDVMb2NhdGlvbiIsImdlb2xvY2F0aW9uIiwidXBkYXRlVXNlckxvY2F0aW9uIiwiJHEiLCJzYXZlRGV0YWlscyIsImxldHRlcmJveF90b2tlbiIsImdlbmRlclByZWZlcmVuY2UiLCJkZWZlcnJlZCIsImRlZmVyIiwiYXV0aCIsInVwZGF0ZVZlcnNpb24iLCJyZXNvbHZlIiwiZXJyb3IiLCJyZWplY3QiLCJwcm9taXNlIiwiY2xlYXJQdXNoVG9rZW4iLCJ1bmluaXQiLCJpc0luaXRpYWxpemVkIiwiY2xlYXJBbGwiLCIkcmVzb3VyY2UiLCIkaHR0cCIsImdldFRva2VuIiwiVVJMIiwiYXV0aFBhdGgiLCJyZW5ld1BhdGgiLCJ1c2VyU2VsZlBhdGgiLCJvdGhlclVzZXJQYXRoIiwicHVzaFRva2VuUGF0aCIsInBlcmZlY3RNYXRjaFBhdGgiLCJ1cGRhdGVMb2NhdGlvblBhdGgiLCJ1cGRhdGVCaW9QYXRoIiwidXNlclBob3RvUGF0aCIsInVwZGF0ZUdlbmRlclByZWZlcmVuY2VQYXRoIiwibWF0Y2hQYXRoIiwibWF0Y2hlc1BhdGgiLCJxdWVzdGlvbnNQYXRoIiwib25lUXVlc3Rpb25QYXRoIiwibWVzc2FnZXNQYXRoIiwicm9vbXNQYXRoIiwib25lUm9vbVBhdGgiLCJyb29tTWVzc2FnZVBhdGgiLCJsZXR0ZXJzUGF0aCIsInNpbmdsZUxldHRlclBhdGgiLCJyZXBvcnRQYXRoIiwiZ2V0VXNlclZlcnNpb25QYXRoIiwic2V0VmVyc2lvblBhdGgiLCJmZWF0dXJlZERlYWxzUGF0aCIsImRlYWxDYXRlZ29yaWVzUGF0aCIsImRlYWxzQnlDYXRQYXRoIiwiZGVhbEJ5SWRQYXRoIiwidXNlckxpa2VkRGVhbHNQYXRoIiwibXV0dWFsTGlrZWREZWFsc1BhdGgiLCJjb25jYXQiLCJnZXQiLCJtZXRob2QiLCJtYXRjaEdldHRlciIsIm1hdGNoZXNHZXR0ZXIiLCJpc0FycmF5IiwidXNlclBob3RvSGFuZGxlciIsInNldFBob3RvIiwicGFyYW1zIiwidXNlclNlbGZHZXR0ZXIiLCJwdXNoVG9rZW5VcGRhdGVyIiwicGVyZmVjdE1hdGNoVXBkYXRlciIsInVwZGF0ZVVzZXJCaW8iLCJxdWVzdGlvbnNIYW5kbGVyIiwic2luZ2xlUXVlc3Rpb25HZXR0ZXIiLCJtZXNzYWdlc0dldHRlciIsInJvb21zR2V0dGVyIiwic2luZ2xlUm9vbUdldHRlciIsInJvb21JZCIsInJvb21NZXNzYWdlR2V0dGVyIiwib3RoZXJVc2VyR2V0dGVyIiwibGV0dGVyc0hhbmRsZXIiLCJjcmVhdGVMZXR0ZXIiLCJzaW5nbGVMZXR0ZXJIYW5kbGVyIiwibGV0dGVySWQiLCJyZWFkTGV0dGVyIiwicmVwb3J0SGFuZGxlciIsImZlYXR1cmVkRGVhbHNIYW5kbGVyIiwiZGVhbENhdGVnb3JpZXNIYW5kbGVyIiwiZGVhbHNCeUNhdEhhbmRsZXIiLCJkZWFsQ2F0IiwiZGVhbEJ5SWRIYW5kbGVyIiwibGlrZURlYWwiLCJ1c2VyTGlrZWREZWFsc0hhbmRsZXIiLCJvdGhlclVzZXJJZCIsIm11dHVhbExpa2VkRGVhbHNIYW5kbGVyIiwib3RoZXJVc2VyVmVyc2lvbkhhbmRsZXIiLCJvd25Vc2VyVmVyc2lvbkhhbmRsZXIiLCJ1cGRhdGUiLCJmYl90b2tlbiIsIm1heERpc3RhbmNlIiwicHJldmlvdXNJZCIsImdldE1hdGNoZXMiLCJnZXRVc2VyU2VsZiIsInB1c2h0b2tlbiIsInVwZGF0ZXIiLCJwdXNoVG9rZW4iLCIkdXBkYXRlUHVzaFRva2VuIiwiJGNsZWFyUHVzaFRva2VuIiwiJHVwZGF0ZVBlcmZlY3RNYXRjaCIsInN1Y2Nlc3NQcm9taXNlIiwibG9jYXRpb25VcGRhdGVyIiwiJHVwZGF0ZUxvY2F0aW9uIiwiZ2V0UHJvZmlsZVBob3RvcyIsInNldFByb2ZpbGVQaG90byIsInBpY3R1cmVJZCIsImVycm9yUHJvbWlzZSIsImhhbmRsZXIiLCIkc2V0UGhvdG8iLCJiaW9VcGRhdGVyIiwiJHVwZGF0ZUJpbyIsImdlbmRlclByZWZlcmVuY2VVcGRhdGVyIiwiJHVwZGF0ZUdlbmRlclByZWZlcmVuY2UiLCJjdXJyZW50SWRzIiwiY3VycmVudFF1ZXN0aW9uSWRzIiwiJHVwZGF0ZVF1ZXN0aW9ucyIsImdldE1lc3NhZ2VzIiwic2luY2UiLCJnZXRSb29tcyIsImdldFNpbmdsZVJvb20iLCJnZXRSb29tTWVzc2FnZXMiLCJnZXRPdGhlclVzZXIiLCJnZXRBbGxMZXR0ZXJzIiwicXVlc3Rpb25zV2l0aEFuc3dlcnMiLCIkY3JlYXRlTGV0dGVyIiwibGV0dGVySGFzaCIsIiRyZWFkTGV0dGVyIiwiJGFwcHJvdmVMZXR0ZXIiLCIkcmVqZWN0TGV0dGVyIiwicmVhc29uIiwiJHJlcG9ydFVzZXIiLCJnZXREZWFsQ2F0ZWdvcmllcyIsImNhdHMiLCJjYXQiLCJnZXREZWFsc0J5Q2F0IiwiZ2V0RGVhbEJ5SWQiLCIkbGlrZURlYWwiLCJnZXRPdGhlclVzZXJWZXJzaW9uIiwiJHVwZGF0ZSIsIm9uUGF1c2UiLCJpc0FjdGl2ZSIsIm9uUGF1c2VMaXN0ZW5lcnMiLCJvblJlc3VtZSIsIm9uUmVzdW1lTGlzdGVuZXJzIiwib25EZXZpY2VSZWFkeSIsImRvY3VtZW50IiwiaXNJbkJhY2tncm91bmQiLCJoYXNGb2N1cyIsInJlZ2lzdGVyT25SZXN1bWUiLCJyZWdpc3Rlck9uUGF1c2UiLCJpbnNlcnRNZXNzYWdlSW50b0RiIiwiYWRkTWVzc2FnZSIsInR5cGUiLCJEZWFsSWQiLCJtYXJrTWVzc2FnZXNJbkRiQXNSZWFkIiwidGltZSIsIm1hcmtNZXNzYWdlc0FzUmVhZCIsImdldENoYXRNZXNzYWdlcyIsImNoYXRNZXNzYWdlcyIsIm9uV2luZG93Rm9jdXMiLCJjdXJyZW50TWVzc2FnZXMiLCJjdXJyZW50Um9vbSIsImluY2x1ZGVzIiwiY3VycmVudFNjb3BlIiwiY3VycmVudFNjcm9sbERlbGVnYXRlIiwiZm9ybWF0dGVkTWVzc2FnZSIsImZvcm1hdE1lc3NhZ2UiLCJzY3JvbGxEZWxlZ2F0ZSIsImdldExhdGVzdFRpbWVTZW50IiwibGF0ZXN0VGltZSIsImZvcm1hdHRlZCIsImlzT3duZXIiLCJEZWFsIiwiZGZkIiwiZ2V0UmVjaXBpZW50VXNlckRhdGEiLCJyYXdNZXNzYWdlcyIsInJhd01lc3NhZ2UiLCJpbnN0YW5jZSIsIk5vdGlmaWNhdGlvbiIsImJvZHkiLCJvbnNob3ciLCJjbG9zZSIsIm1vek5vdGlmaWNhdGlvbiIsIndlYmtpdE5vdGlmaWNhdGlvbiIsInBlcm1pc3Npb24iLCJyZXF1ZXN0UGVybWlzc2lvbiIsInNlbmRlck5hbWUiLCJjaGVja0luaXQiLCJnZXRSb29tc0Zyb21EYiIsImRiIiwic3FsaXRlIiwidHJhbnNhY3Rpb24iLCJ0eCIsImV4ZWN1dGVTcWwiLCJyb29tcyIsInJvd3MiLCJyb3ciLCJpdGVtIiwidGh1bWJuYWlsIiwicHJvZmlsZVBpY3R1cmUiLCJjcmVhdGVkQXQiLCJzcWxpdGVQbHVnaW4iLCJvcGVuRGF0YWJhc2UiLCJjcmVhdGVGcm9tTG9jYXRpb24iLCJ1c2VyVmVyc2lvbiIsInVzZXJfdmVyc2lvbiIsImFkZFJvb20iLCJ1c2VySGFzaCIsInVzZXJGaXJzdE5hbWUiLCJ0aHVtYm5haWxQaWMiLCJtZWRpdW1QaWMiLCJjbnQiLCJsYXRlc3RNZXNzYWdlIiwidW5yZWFkQ291bnQiLCJpc0Nvbm5lY3RlZCIsImdldFVucmVhZENvdW50cyIsIm1heHRpbWUiLCJnZXRMYXN0ZXN0TWVzc2FnZSIsImRlbGV0ZVJvb20iLCJkZWxldGVSb29tTWVzc2FnZXMiLCJnZXRBbGxEZWFscyIsInZlcnNpb24iLCJhc3luY1J1biIsImZuIiwiYXJnIiwic3RhY2siLCJFdmVudGJ1cyIsImxpc3RlbmVycyIsImRlcmVnaXN0ZXJBbGxMaXN0ZW5lcnMiLCJBcnJheSIsImxpc3RlbmVyIiwiYXJndW1lbnQiLCJyZWdpc3Rlckxpc3RlbmVycyIsImxvY2FsIiwiSlNPTiIsInBhcnNlIiwic2NoZWR1bGUiLCJ0ZXh0Iiwic21hbGxJY29uIiwicm9vbURhdGEiLCJsZXR0ZXJEYXRhIiwiTGV0dGVySGFzaCIsIkxvY2FsTm90aWZpY2F0aW9uIiwiY2xlYXJMb2NhbE5vdGlmaWNhdGlvbnMiLCJjb2RlIiwiQ2FjaGUiLCJjb252ZXJ0TGV0dGVyVG9Ob3RpZiIsIkxldHRlckFuc3dlcnMiLCJvcHRpb24wIiwiV3lyUXVlc3Rpb24iLCJvcHRpb24xIiwiVXNlckFjY291bnQiLCJnZW5kZXIiLCJmcm9tR2VuZGVyIiwiZ2V0WWVhciIsImJpcnRoZGF5IiwicHJvZmlsZVBpY1RodW1iIiwicHJvZmlsZVBpY01lZCIsImN1cnJlbnROb3RpZmljYXRpb25zIiwibmV3VGFiIiwibGV0dGVycyIsInJlc3VsdCIsImZvdW5kIiwibm90aWYiLCJwaWN0dXJlcyIsInBob3RvIiwicmVwb3J0Iiwic3ViVGl0bGUiLCJidXR0b25zIiwib25UYXAiLCJmb3JtYXRDaGF0IiwidXBkYXRlQ2hhdHMiLCJnZXRMYXRlc3RSb29tSW5mbyIsImNoYXQiLCJjaGF0UHJlc2VudCIsImNoYXRNb2RpZmllZCIsImoiLCJjaGF0c1BhZ2VTY29wZSIsIm5vdGlmc1BhZ2VTY29wZSIsInJvb21zQ2FjaGUiLCJ0b3RhbCIsIklPQ29udGFpbmVyIiwic29ja2V0aW8iLCJTb2NrZXRTZXJ2aWNlIiwiZGlzY29ubmVjdCIsImlvIiwiY29ubmVjdCIsInF1ZXJ5IiwiY29ubmVjdGVkIiwiZW1pdCIsIiRjb3Jkb3ZhVmlicmF0aW9uIiwidmlicmF0ZSJdLCJtYXBwaW5ncyI6IkFBQ0FBLFFBQUFDLE9BQUEsNEJBQ0FELFFBQUFDLE9BQUEsMkJBQ0FELFFBQUFDLE9BQUEseUJBRUFELFFBQUFDLE9BQUEsYUFBQSxRQUNBLHFCQUNBLHdCQUNBLHVCQUNBLHFCQUNBLFdBQ0EsZ0JBQ0EsWUFDQSxxQkFDQSw4QkFDQSxZQUNBLGFBQ0EseUJBR0FDLFNBQUEsV0FDQUMsTUFBQSxFQUNBQyxNQUFBLEVBQ0FDLFNBQUEsSUFHQUMsS0FBQSxpQkFBQSxhQUFBLFdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQUQsRUFBQUUsSUFBQSxvQkFBQUMsUUFBQUMsSUFBQUMsS0FBQUYsVUFFQUosRUFBQU8sTUFBQSxXQU9BLEdBQUFDLE9BQUFDLFFBQUEsQ0FDQSxHQUFBQyxHQUFBLEdBQUFDLE9BQUFDLE1BQ0FDLGNBQ0FDLFNBQ0FDLEtBQUEsZUFDQUMsVUFBQSxhQUlBTixHQUFBTyxTQUFBLFNBQUFDLEdBQ0FWLE9BQUFXLGFBQUFDLFFBQUEsWUFBQUYsRUFBQUEsT0FDQWhCLEVBQUFtQixLQUFBLGtCQUdBLG1CQUFBQyxXQUFBQyxjQUNBRCxVQUFBQyxhQUFBQyxPQUlBaEIsT0FBQUMsU0FBQUQsT0FBQUMsUUFBQWdCLFFBQUFDLFdBQ0FqQixRQUFBZ0IsUUFBQUMsU0FBQUMsMEJBQUEsR0FDQWxCLFFBQUFnQixRQUFB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QSxHQUFBaGhCLElBQ0FRLFNBQUFBLEVBQ0FSLFFBQUFBLEVBQ0FrZCxLQUFBLFFBQ0ExWixPQUFBQSxFQUVBMmhCLEdBQUFDLFNBQUFPLEtBQUEsY0FBQTNsQixHQUNBK1QsRUFBQUksUUFBQW5VLE9BQ0FtbEIsR0FBQTFRLGVBQUEwUSxFQUFBQyxTQUFBTSxVQUNBM1IsRUFBQU0sUUFBQUQsTUFBQSwyQkFFQUwsRUFBQU0sUUFBQUQsTUFBQSw0QkFFQSxPQUFBTCxHQUFBTyxTQUdBK1EsS0MxR0E3dkIsUUFBQUMsT0FBQSxzQkFFQWtkLFFBQUEsa0JBQUEsb0JBQUEsU0FBQSxjQUFBLFdBQUEsU0FBQWlULEVBQUF6c0IsRUFBQVUsRUFBQTVELEdBQ0EsUUFBQTR2QixLQUNBRCxFQUFBQyxRQUFBLEtBR0FsSixTQUFBdmhCLGlCQUFBLGNBQUEsV0FDQTdFLE9BQUFDLFVBQ0FQLEVBQUFrRSxpQkFBQSxjQUFBMHJCLEdBQ0E1dkIsRUFBQWtFLGlCQUFBLGlCQUFBMHJCLE1BRUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEluaXRpYWxpemUgbW9kdWxlc1xuYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5jb250cm9sbGVycycsIFtdKTtcbmFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guZGlyZWN0aXZlcycsIFtdKTtcbmFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guc2VydmljZXMnLCBbXSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3gnLCBbJ2lvbmljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lvbmljLnNlcnZpY2UuY29yZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsZXR0ZXJib3guY29udHJvbGxlcnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGV0dGVyYm94LmRpcmVjdGl2ZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGV0dGVyYm94LnNlcnZpY2VzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZhY2Vib29rJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FuZ3VsYXJNb21lbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndWkuc2xpZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21vbm9zcGFjZWQuZWxhc3RpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpb25pYy5pb24uaW1hZ2VDYWNoZUZhY3RvcnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmdDb3Jkb3ZhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25nUmVzb3VyY2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmdJT1M5VUlXZWJWaWV3UGF0Y2gnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSlcblxuLmNvbnN0YW50KCdWRVJTSU9OJywge1xuICBtYWpvcjogMCxcbiAgbWlub3I6IDIsXG4gIHJldmlzaW9uOiAwXG59KVxuXG4ucnVuKGZ1bmN0aW9uKCRpb25pY1BsYXRmb3JtLCAkcm9vdFNjb3BlLCBldmVudGJ1cykge1xuICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZUVycm9yXCIsIGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkpO1xuXG4gICRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gaWYgKHR5cGVvZiBhbmFseXRpY3MgIT09ICd1bmRlZmluZWQnKXtcbiAgICAvLyAgIGFuYWx5dGljcy5zdGFydFRyYWNrZXJXaXRoSWQoJ1VBLTY5NTIzMTI1LTInKTtcbiAgICAvLyAgIGFuYWx5dGljcy50cmFja1ZpZXcoJ0xldHRlcmJveCcpO1xuICAgIC8vIH1cblxuICAgIGlmICh3aW5kb3cuY29yZG92YSkge1xuICAgICAgdmFyIHB1c2ggPSBuZXcgSW9uaWMuUHVzaCh7XG4gICAgICAgIFwicGx1Z2luQ29uZmlnXCI6IHtcbiAgICAgICAgICBcImFuZHJvaWRcIjoge1xuICAgICAgICAgICAgXCJpY29uXCI6IFwibm90aWZpY2F0aW9uXCIsXG4gICAgICAgICAgICBcImljb25Db2xvclwiOiBcIiNmYTVjNGZcIlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBwdXNoLnJlZ2lzdGVyKGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHVzaFRva2VuJywgdG9rZW4udG9rZW4pO1xuICAgICAgICBldmVudGJ1cy5jYWxsKCdwdXNoVG9rZW5TZXQnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvci5zcGxhc2hzY3JlZW4gIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG5hdmlnYXRvci5zcGxhc2hzY3JlZW4uaGlkZSgpO1xuICAgIH1cbiAgICAvLyBIaWRlIHRoZSBhY2Nlc3NvcnkgYmFyIGJ5IGRlZmF1bHQgKHJlbW92ZSB0aGlzIHRvIHNob3cgdGhlIGFjY2Vzc29yeSBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgLy8gZm9yIGZvcm0gaW5wdXRzKVxuICAgIGlmICh3aW5kb3cuY29yZG92YSAmJiB3aW5kb3cuY29yZG92YS5wbHVnaW5zLktleWJvYXJkKSB7XG4gICAgICBjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuaGlkZUtleWJvYXJkQWNjZXNzb3J5QmFyKHRydWUpO1xuICAgICAgY29yZG92YS5wbHVnaW5zLktleWJvYXJkLmRpc2FibGVTY3JvbGwodHJ1ZSk7XG5cbiAgICB9XG4gICAgaWYgKHdpbmRvdy5TdGF0dXNCYXIgJiYgd2luZG93LmNvcmRvdmEucGxhdGZvcm1JZCA9PSAnYW5kcm9pZCcpIHtcbiAgICAgIHdpbmRvdy5TdGF0dXNCYXIuYmFja2dyb3VuZENvbG9yQnlIZXhTdHJpbmcoJyNDODRBM0YnKTtcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5TdGF0dXNCYXIpIHtcbiAgICAgIC8vIG9yZy5hcGFjaGUuY29yZG92YS5zdGF0dXNiYXIgcmVxdWlyZWRcbiAgICAgIFN0YXR1c0Jhci5zdHlsZURlZmF1bHQoKTtcbiAgICB9XG4gIH0pO1xufSlcblxuLmNvbmZpZyhmdW5jdGlvbihGYWNlYm9va1Byb3ZpZGVyKSB7XG4gIEZhY2Vib29rUHJvdmlkZXIuaW5pdCgnMTY3NDgyODk5NjA2MjkyOCcpO1xufSk7XG5cbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3gnKVxuXG4uY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgJHN0YXRlUHJvdmlkZXJcblxuICAuc3RhdGUoJ2xvZ2luJywge1xuICAgIHVybDogJy9sb2dpbicsXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvbG9naW4uaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ09uYm9hcmRpbmdDdHJsJ1xuICB9KVxuXG4gIC5zdGF0ZSgnb25ib2FyZGluZycsIHtcbiAgICB1cmw6ICcvb25ib2FyZGluZy86b25ib2FyZFN0ZXAnLFxuICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbiAoJHN0YXRlUGFyYW1zKXtcbiAgICAgIHJldHVybiAndGVtcGxhdGVzL29uYm9hcmQnICsgJHN0YXRlUGFyYW1zLm9uYm9hcmRTdGVwICsgJy5odG1sJztcbiAgICB9LFxuICAgIGNvbnRyb2xsZXI6ICdPbmJvYXJkaW5nQ3RybCdcbiAgfSlcblxuICAuc3RhdGUoJ2FwcCcsIHtcbiAgICB1cmw6ICcvYXBwJyxcbiAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9tZW51Lmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdBcHBDdHJsJ1xuICB9KVxuXG4gIC5zdGF0ZSgnYXBwLmhvbWUnLCB7XG4gICAgdXJsOiAnL2hvbWUnLFxuICAgIHZpZXdzOiB7XG4gICAgICAnbWVudUNvbnRlbnQnOiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2hvbWUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ3RybCdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLnN0YXRlKCdhcHAubGV0dGVyJywge1xuICAgIHVybDogJy9sZXR0ZXInLFxuICAgIHZpZXdzOiB7XG4gICAgICAnbWVudUNvbnRlbnQnOiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2xldHRlci5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xldHRlckN0cmwnXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIC5zdGF0ZSgnYXBwLmNoYXRzJywge1xuICAgIHVybDogJy9jaGF0cycsXG4gICAgdmlld3M6IHtcbiAgICAgICdtZW51Q29udGVudCc6IHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvY2hhdHMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDaGF0c0N0cmwnXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIC5zdGF0ZSgnYXBwLmNoYXQnLCB7XG4gICAgdXJsOiAnL2NoYXRzLzpjaGF0SWQnLFxuICAgIHZpZXdzOiB7XG4gICAgICAnbWVudUNvbnRlbnQnOiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2NoYXQuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDaGF0Q3RybCcsXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIC5zdGF0ZSgnYXBwLm5vdGlmaWNhdGlvbnMnLCB7XG4gICAgdXJsOiAnL25vdGlmaWNhdGlvbnMnLFxuICAgIHZpZXdzOiB7XG4gICAgICAnbWVudUNvbnRlbnQnOiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL25vdGlmaWNhdGlvbnMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdOb3RpZmljYXRpb25zQ3RybCdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLnN0YXRlKCdhcHAuY2F0ZWdvcmllcycsIHtcbiAgICB1cmw6ICcvY2F0ZWdvcmllcycsXG4gICAgdmlld3M6IHtcbiAgICAgICdtZW51Q29udGVudCc6IHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvY2F0ZWdvcmllcy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0NhdGVnb3JpZXNDdHJsJ1xuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICAuc3RhdGUoJ2FwcC5kZWFscycsIHtcbiAgICB1cmw6ICcvZGVhbHMvOmNhdGVnb3J5JyxcbiAgICB2aWV3czoge1xuICAgICAgJ21lbnVDb250ZW50Jzoge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9kZWFscy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0RlYWxzQ3RybCdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLnN0YXRlKCdhcHAuZGVhbCcsIHtcbiAgICB1cmw6ICcvZGVhbC86ZGVhbElkLzpyb29tSGFzaCcsXG4gICAgdmlld3M6IHtcbiAgICAgICdtZW51Q29udGVudCc6IHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvZGVhbC5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0RlYWxDdHJsJ1xuICAgICAgfVxuICAgIH0sXG4gICAgY2FjaGU6IGZhbHNlXG4gIH0pXG5cbiAgLnN0YXRlKCdhcHAubGlrZWQtZGVhbHMnLCB7XG4gICAgdXJsOiAnL2xpa2VkLWRlYWxzJyxcbiAgICB2aWV3czoge1xuICAgICAgJ21lbnVDb250ZW50Jzoge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9saWtlZC1kZWFscy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xpa2VkRGVhbHNDdHJsJ1xuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICAuc3RhdGUoJ2FwcC5yZXNwb25zZScsIHtcbiAgICB1cmw6ICcvcmVzcG9uc2VzLzpyZXNwb25zZUlkOmlzRXhpc3RpbmdDaGF0JyxcbiAgICB2aWV3czoge1xuICAgICAgJ21lbnVDb250ZW50Jzoge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9yZXNwb25zZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1Jlc3BvbnNlQ3RybCdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLnN0YXRlKCdhcHAucHJvZmlsZScsIHtcbiAgICB1cmw6ICcvcHJvZmlsZScsXG4gICAgdmlld3M6IHtcbiAgICAgICdtZW51Q29udGVudCc6IHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvcHJvZmlsZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsJ1xuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICAuc3RhdGUoJ2FwcC5vdGhlci1wcm9maWxlJywge1xuICAgIHVybDogJy9vdGhlci1wcm9maWxlLzp1c2VySWQnLFxuICAgIHZpZXdzOiB7XG4gICAgICAnbWVudUNvbnRlbnQnOiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL290aGVyLXByb2ZpbGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdPdGhlclByb2ZpbGVDdHJsJ1xuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICAuc3RhdGUoJ2FwcC5vdGhlci1sZXR0ZXInLCB7XG4gICAgdXJsOiAnL290aGVyLWxldHRlci86cm9vbUhhc2gnLFxuICAgIHZpZXdzOiB7XG4gICAgICAnbWVudUNvbnRlbnQnOiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL290aGVyLWxldHRlci5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ090aGVyTGV0dGVyQ3RybCdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLnN0YXRlKCdhcHAuc2V0dGluZ3MnLCB7XG4gICAgdXJsOiAnL3NldHRpbmdzJyxcbiAgICB2aWV3czoge1xuICAgICAgJ21lbnVDb250ZW50Jzoge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9zZXR0aW5ncy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1NldHRpbmdzQ3RybCdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIDtcblxuICAvLyBpZiBub25lIG9mIHRoZSBhYm92ZSBzdGF0ZXMgYXJlIG1hdGNoZWQsIHVzZSB0aGlzIGFzIHRoZSBmYWxsYmFja1xuICB2YXIgZGVmYXVsdFJvdXRlID0gJy9sb2dpbic7XG4gIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpIHtcbiAgICBkZWZhdWx0Um91dGUgPSAnL2FwcC9ob21lJztcbiAgfVxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKGRlZmF1bHRSb3V0ZSk7XG59KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5jb250cm9sbGVycycpXG5cbi5jb250cm9sbGVyKCdBcHBDdHJsJywgZnVuY3Rpb24oJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljUG9wdXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY0xvYWRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50YnVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvY2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9jYWxOb3RpZmljYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCYWNrZ3JvdW5kU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGJTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb29tc1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYXRTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRoU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHVzaFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENocm9tZU5vdGlmU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlicmF0ZVNlcnZpY2UpIHsgLy8gTGVhdmUgVmlicmF0ZVNlcnZpY2UgaGVyZSB0byBpbml0IHRoZSBzZXJ2aWNlXG5cbiAgJHNjb3BlLnVzZXJuYW1lID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmaXJzdE5hbWUnKSA/IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZmlyc3ROYW1lJykgOiAnJztcbiAgLy8gV2l0aCB0aGUgbmV3IHZpZXcgY2FjaGluZyBpbiBJb25pYywgQ29udHJvbGxlcnMgYXJlIG9ubHkgY2FsbGVkXG4gIC8vIHdoZW4gdGhleSBhcmUgcmVjcmVhdGVkIG9yIG9uIGFwcCBzdGFydCwgaW5zdGVhZCBvZiBldmVyeSBwYWdlIGNoYW5nZS5cbiAgLy8gVG8gbGlzdGVuIGZvciB3aGVuIHRoaXMgcGFnZSBpcyBhY3RpdmUgKGZvciBleGFtcGxlLCB0byByZWZyZXNoIGRhdGEpLFxuICAvLyBsaXN0ZW4gZm9yIHRoZSAkaW9uaWNWaWV3LmVudGVyIGV2ZW50OlxuICAvLyRzY29wZS4kb24oJyRpb25pY1ZpZXcuZW50ZXInLCBmdW5jdGlvbihlKSB7XG4gIC8vfSk7XG5cbiAgLy8gRXZlbnRidXMgZm9yIGxvb3NlIGNvdXBsaW5nIG9mIGNvbXBvbmVudHNcbiAgLy8gSW5pdGlhbGl6ZSBEYlNlcnZpY2Ugd2hlbiBsb2dnZWQgaW5cbiAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcignbG9naW5Db21wbGV0ZWQnLCBEYlNlcnZpY2UuaW5pdCk7XG4gIC8vIEluaXRpYWxpemUgc29ja2V0aW8gd2hlbiBsb2dnZWQgaW5cbiAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcignbG9naW5Db21wbGV0ZWQnLCBzb2NrZXQuaW5pdCk7XG4gIC8vIFVwZGF0ZSB1c2VyIGxvY2F0aW9uIHdoZW4gbG9nZ2VkIGluXG4gIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ2xvZ2luQ29tcGxldGVkJywgTG9jYXRpb25TZXJ2aWNlLnVwZGF0ZUxvY2F0aW9uKTtcblxuICBldmVudGJ1cy5yZWdpc3Rlckxpc3RlbmVyKCdsb2dpbkNvbXBsZXRlZCcsIFB1c2hTZXJ2aWNlLnVwZGF0ZVB1c2hUb2tlbik7XG5cbiAgLy8gVXBkYXRlICRzY29wZS51c2VybmFtZSBvbiBsb2dpbiBjb21wbGV0ZWRcbiAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcignbG9naW5Db21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUudXNlcm5hbWUgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZpcnN0TmFtZScpO1xuICB9KTtcblxuICAvLyBJbml0aWFsaXplIENoYXRTZXJ2aWNlIHdoZW4gZGIgaW5pdGlhbGl6ZWRcbiAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcignZGJJbml0aWFsaXplZCcsIENoYXRTZXJ2aWNlLmluaXQpO1xuICAvLyBTeW5jIGRhdGFiYXNlIHdpdGggYmFja2VuZCB3aGVuZXZlciBzb2NrZXQgaXMgcmVjb25uZWN0ZWRcbiAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcignZGJJbml0aWFsaXplZCcsIENoYXRTZXJ2aWNlLnN5bmMpO1xuXG4gIC8vIFN5bmMgZGF0YWJhc2Ugd2l0aCBiYWNrZW5kIHdoZW5ldmVyIHNvY2tldCBpcyByZWNvbm5lY3RlZFxuICBldmVudGJ1cy5yZWdpc3Rlckxpc3RlbmVyKCdzb2NrZXRDb25uZWN0ZWQnLCBDaGF0U2VydmljZS5zeW5jKTtcblxuICBldmVudGJ1cy5yZWdpc3Rlckxpc3RlbmVyKCdwdXNoVG9rZW5TZXQnLCBQdXNoU2VydmljZS51cGRhdGVQdXNoVG9rZW4pO1xuXG4gIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ3Jvb21DcmVhdGVkJywgZnVuY3Rpb24oZGF0YSkge1xuICAgIFJvb21zU2VydmljZS51cGRhdGVSb29tcygpO1xuICAgICRpb25pY1BvcHVwLmNvbmZpcm0oe1xuICAgICAgdGl0bGU6IGRhdGEuYXBwcm92ZXJOYW1lICsgJyBqdXN0IHN0YXJ0ZWQgYSBjaGF0IHdpdGggeW91IScsXG4gICAgICB0ZW1wbGF0ZTogJ1N0YXJ0IGNoYXR0aW5nPycsXG4gICAgICBjc3NDbGFzczogXCJwb3B1cC1hbGVydFwiXG4gICAgfSkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgJHN0YXRlLmdvKCdhcHAuY2hhdCcsIHtjaGF0SWQ6IGRhdGEucm9vbS5oYXNofSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ2xldHRlclJlY2VpdmVkJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICRpb25pY1BvcHVwLmNvbmZpcm0oe1xuICAgICAgdGl0bGU6ICdOZXcgTGV0dGVyIFJlY2VpdmVkIScsXG4gICAgICB0ZW1wbGF0ZTogJ1Byb2NlZWQgdG8gbm90aWZpY2F0aW9ucz8nLFxuICAgICAgY3NzQ2xhc3M6IFwicG9wdXAtYWxlcnRcIlxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZiAocmVzKSB7XG4gICAgICAgICRzdGF0ZS5nbygnYXBwLm5vdGlmaWNhdGlvbnMnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBldmVudGJ1cy5jYWxsKCd3aW5kb3dGb2N1c2VkJyk7XG4gIH0sIGZhbHNlKTtcblxuICAkc2NvcGUuc2hvd0xvYWRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAkaW9uaWNMb2FkaW5nLnNob3coe1xuICAgICAgdGVtcGxhdGU6ICc8aW9uLXNwaW5uZXIgaWNvbj1cInJpcHBsZVwiPjwvaW9uLXNwaW5uZXI+J1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5oaWRlTG9hZGluZyA9IGZ1bmN0aW9uKCl7XG4gICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gIH07XG5cbiAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkge1xuICAgICRzY29wZS5zaG93TG9hZGluZygpO1xuICAgIEF1dGhTZXJ2aWNlLnJlbmV3VG9rZW4oKVxuICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgJHNjb3BlLmhpZGVMb2FkaW5nKCk7XG4gICAgICBldmVudGJ1cy5jYWxsKCdsb2dpbkNvbXBsZXRlZCcpO1xuICAgICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaXNSZWdpc3RlcmVkJykgPT09ICdmYWxzZScpIHtcbiAgICAgICAgJHN0YXRlLmdvKCdvbmJvYXJkaW5nJywge29uYm9hcmRTdGVwOiAwfSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAkc2NvcGUuaGlkZUxvYWRpbmcoKTtcbiAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogJ0F1dGhlbnRpY2F0aW9uIEVycm9yIScsXG4gICAgICAgIHRlbXBsYXRlOiAnUGxlYXNlIGxvZyBpbiBhZ2FpbicsXG4gICAgICAgIGNzc0NsYXNzOiBcInBvcHVwLWFsZXJ0XCJcbiAgICAgIH0pO1xuICAgICAgYWxlcnRQb3B1cC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gIH1cblxuICAkc2NvcGUuY3VycmVudFBhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJGxvY2F0aW9uLnBhdGgoKS5zcGxpdCgnLycpWzJdO1xuICB9O1xufSk7XG5cbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guY29udHJvbGxlcnMnKVxuXG4uY29udHJvbGxlcignQ2FyZHNDdHJsJywgZnVuY3Rpb24oJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkSW1hZ2VDYWNoZUZhY3RvcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljSGlzdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudGJ1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldHRlclNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0Y2hTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcG9ydFNlcnZpY2UpIHtcblxuICAkc2NvcGUuY2FyZHMgPSBbXTtcbiAgJHNjb3BlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ2VudGVySG9tZScsIGdldENhcmQpO1xuICBldmVudGJ1cy5yZWdpc3Rlckxpc3RlbmVyKCdjbG9zZUxldHRlcicsIHJlbW92ZVRvcENhcmQpO1xuICBldmVudGJ1cy5yZWdpc3Rlckxpc3RlbmVyKCdjaGFuZ2VHZW5kZXInLCBjaGVja0FuZEdldENhcmQpO1xuICBnZXRDYXJkKCk7XG5cbiAgJHNjb3BlLmNoYW5nZUNhcmQgPSBmdW5jdGlvbigpIHtcbiAgICBzZWxlY3RGaXJzdCgnLnByb2ZpbGUtY2FyZCcpLmFkZENsYXNzKCdtb3Zpbmctb3V0Jyk7XG4gICAgJHRpbWVvdXQoJHNjb3BlLmFkZENhcmQsIDEwMCk7XG4gIH07XG5cbiAgJHNjb3BlLm9wZW5TZW5kTGV0dGVyID0gZnVuY3Rpb24oY2FyZCkge1xuICAgICRpb25pY0hpc3RvcnkubmV4dFZpZXdPcHRpb25zKHtcbiAgICAgIGRpc2FibGVBbmltYXRlOiBmYWxzZSxcbiAgICAgIGRpc2FibGVCYWNrOiBmYWxzZVxuICAgIH0pO1xuICAgIGxldHRlclNlcnZpY2Uuc2V0VGFyZ2V0VXNlckNhcmQoY2FyZCk7XG4gICAgJHN0YXRlLmdvKCdhcHAubGV0dGVyJyk7XG4gIH07XG5cbiAgJHNjb3BlLmFkZENhcmQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoISRzY29wZS5pc0xvYWRpbmcpIHtcbiAgICAgICRzY29wZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgTWF0Y2hTZXJ2aWNlLmdldE1hdGNoKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICAgICRzY29wZS5jYXJkcy5wdXNoKGNyZWF0ZU5ld0NhcmQobWF0Y2gpKTtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gdGltZW91dCBmb3IgbW92aW5nIG91dCBhbmltYXRpb25cbiAgICAgICAgICAkc2NvcGUuY2FyZHMuc3BsaWNlKDAsIDEpO1xuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gdGltZW91dCBmb3IgbW92aW5nIGluIGFuaW1hdGlvblxuICAgICAgICAgICAgc2VsZWN0Rmlyc3QoJy5wcm9maWxlLWNhcmQnKS5yZW1vdmVDbGFzcygnbW92aW5nLWluJyk7XG4gICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAkc2NvcGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH0sIDIwMCk7XG4gICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuY2FyZHMuc3BsaWNlKDAsIDEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb25zXG4gICAqL1xuICBmdW5jdGlvbiBjaGVja0FuZEdldENhcmQoKSB7XG4gICAgLy8gaWYgdGhlcmUgaXMgY2FyZCBjdXJyZW50bHkgbG9hZGVkLCBjaGFuZ2UgaXRcbiAgICAvLyBvdGhlcndpc2UsIGxvYWQgbmV3IGNhcmRcbiAgICBpZiAoJHNjb3BlLmNhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZ2V0Q2FyZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkc2NvcGUuY2hhbmdlQ2FyZCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENhcmQoKSB7XG4gICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSAmJiAkc2NvcGUuY2FyZHMubGVuZ3RoID09PSAwICYmICEkc2NvcGUuaXNMb2FkaW5nKSB7XG4gICAgICAkc2NvcGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgIE1hdGNoU2VydmljZS5nZXRNYXRjaCgpXG4gICAgICAudGhlbihmdW5jdGlvbihtYXRjaCkge1xuICAgICAgICAkc2NvcGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICRzY29wZS5jYXJkcy5wdXNoKGNyZWF0ZU5ld0NhcmQobWF0Y2gpKTtcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGVjdEZpcnN0KCcucHJvZmlsZS1jYXJkJykucmVtb3ZlQ2xhc3MoJ21vdmluZy1pbicpO1xuICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVUb3BDYXJkKCkge1xuICAgICRzY29wZS5jYXJkcy5zaGlmdCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlTmV3Q2FyZChtYXRjaCkge1xuICAgIHJldHVybiB7XG4gICAgICBoYXNoZWRJZDogbWF0Y2guaGFzaGVkSWQsXG4gICAgICBuYW1lOiBtYXRjaC5maXJzdE5hbWUsXG4gICAgICBhZ2U6IG1hdGNoLmFnZSxcbiAgICAgIGxvY2F0aW9uOiBNYXRoLmZsb29yKG1hdGNoLmRpc3RhbmNlKSArICdrbScsXG4gICAgICBiaW86IG1hdGNoLmJpbyxcbiAgICAgIHByb2ZpbGVfcGljOiBtYXRjaC5waWN0dXJlTWVkLFxuICAgICAgcXVlc3Rpb25zOiBtYXRjaC5xdWVzdGlvbnMsXG4gICAgICBtdXR1YWxfZnJpZW5kc19jb3VudDogKHR5cGVvZiBtYXRjaC5tdXR1YWxGcmllbmRzID09PSAndW5kZWZpbmVkJykgPyAndW5rbm93bicgOiBtYXRjaC5tdXR1YWxGcmllbmRzLnN1bW1hcnkudG90YWxfY291bnQsXG4gICAgICBsaWtlZERlYWxzOiBtYXRjaC5saWtlZERlYWxzXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlbGVjdEZpcnN0KHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudCgkZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG4gIH1cbn0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LmNvbnRyb2xsZXJzJylcblxuLmNvbnRyb2xsZXIoJ0NhdGVnb3JpZXNDdHJsJywgZnVuY3Rpb24oICRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2F0ZWdvcnlTZXJ2aWNlKSB7XG4gICRzY29wZS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gIENhdGVnb3J5U2VydmljZS5nZXRDYXRlZ29yaWVzKClcbiAgICAudGhlbihmdW5jdGlvbihjYXRlZ29yaWVzKSB7XG4gICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGNhdGVnb3JpZXM7XG4gICAgICAkc2NvcGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfSk7XG5cbiAgJHNjb3BlLnZpZXdDYXRlZ29yeSA9IGZ1bmN0aW9uKGNhdGVnb3J5VGl0bGUpIHtcbiAgICAkc3RhdGUuZ28oJ2FwcC5kZWFscycsIHsgY2F0ZWdvcnk6IGNhdGVnb3J5VGl0bGUgfSk7XG4gIH07XG5cbiAgJHNjb3BlLnZpZXdMaWtlZCA9IGZ1bmN0aW9uKCkge1xuICAgICRzdGF0ZS5nbygnYXBwLmxpa2VkLWRlYWxzJyk7XG4gIH07XG59KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5jb250cm9sbGVycycpXG5cbi5jb250cm9sbGVyKCdDaGF0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZVBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY1Njcm9sbERlbGVnYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTW9kYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNQb3BvdmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljUG9wdXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhdFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWFsU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvb21zU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldCkge1xuXG4gICRzY29wZS5tZXNzYWdlcyA9IFtdO1xuICAkc2NvcGUucmVjaXBpZW50ID0gJyc7XG4gICRzY29wZS5yZWNpcGllbnRJZCA9ICcnO1xuICAkc2NvcGUuZGF0YSA9IHttZXNzYWdlOiAnJ307XG4gICRzY29wZS52aWV3aW5nRGVhbHMgPSAnbXV0dWFsJztcbiAgJHNjb3BlLmZyb21TdWJQYWdlID0gZmFsc2U7XG4gICRzY29wZS5kZWFscyA9IHtcbiAgICBvd246IFtdLFxuICAgIHVzZXI6IFtdLFxuICAgIG11dHVhbDogW11cbiAgfTtcbiAgJHNjb3BlLmxpbWl0ID0gNDA7XG5cbiAgJHNjb3BlLnJvb21IYXNoID0gJHN0YXRlUGFyYW1zLmNoYXRJZDtcbiAgJHNjb3BlLnJvb20gPSBSb29tc1NlcnZpY2UuZ2V0Um9vbSgkc2NvcGUucm9vbUhhc2gpO1xuXG4gICRpb25pY1BvcG92ZXIuZnJvbVRlbXBsYXRlVXJsKCd0ZW1wbGF0ZXMvY2hhdHBvcG92ZXIuaHRtbCcsIHtcbiAgICBzY29wZTogJHNjb3BlXG4gIH0pLnRoZW4oZnVuY3Rpb24ocG9wb3Zlcikge1xuICAgICRzY29wZS5wb3BvdmVyID0gcG9wb3ZlcjtcbiAgfSk7XG5cbiAgdmFyIG9uS2V5Ym9hcmRIaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLmxpbWl0ID0gNDA7XG4gICAgJHNjb3BlLiRhcHBseSgpO1xuICAgICRpb25pY1Njcm9sbERlbGVnYXRlLnNjcm9sbEJvdHRvbSh0cnVlKTtcbiAgfTtcblxuICB2YXIgb25LZXlib2FyZFNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUubGltaXQgPSA0MDtcbiAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgJGlvbmljU2Nyb2xsRGVsZWdhdGUuc2Nyb2xsQm90dG9tKGZhbHNlKTtcbiAgfTtcblxuICAkc2NvcGUuJG9uKFwiJGlvbmljVmlldy5lbnRlclwiLCBmdW5jdGlvbihzY29wZXMsIHN0YXRlcykge1xuICAgIENoYXRTZXJ2aWNlLmdldFJlY2lwaWVudE5hbWUoJHNjb3BlLnJvb21IYXNoKS50aGVuKGZ1bmN0aW9uKHJlY2lwaWVudCkge1xuICAgICAgJHNjb3BlLnJlY2lwaWVudCA9IHJlY2lwaWVudDtcbiAgICB9KTtcblxuICAgIENoYXRTZXJ2aWNlLmdldFJlY2lwaWVudEhhc2hlZElkKCRzY29wZS5yb29tSGFzaCkudGhlbihmdW5jdGlvbihoYXNoZWRJZCkge1xuICAgICAgJHNjb3BlLnJlY2lwaWVudElkID0gaGFzaGVkSWQ7XG4gICAgfSk7XG5cbiAgICBDaGF0U2VydmljZS5nZXRNZXNzYWdlc0Zyb21CYWNrZW5kKCRzY29wZS5yb29tSGFzaCkudGhlbihmdW5jdGlvbihtZXNzYWdlcykge1xuICAgICAgQ2hhdFNlcnZpY2Uuc2V0Q3VycmVudFJvb20oJHNjb3BlLnJvb21IYXNoLCAkc2NvcGUsICRpb25pY1Njcm9sbERlbGVnYXRlKTtcbiAgICAgIGlmICghJHNjb3BlLmZyb21TdWJQYWdlKSB7XG4gICAgICAgICRzY29wZS5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuICAgICAgICBpZiAobWVzc2FnZXMubGVuZ3RoKSBzb2NrZXQucm9vbVJlYWQoJHNjb3BlLnJvb21IYXNoLCBtZXNzYWdlc1ttZXNzYWdlcy5sZW5ndGgtMV0udGltZXN0YW1wLmdldFRpbWUoKSk7XG4gICAgICAgICRpb25pY1Njcm9sbERlbGVnYXRlLnNjcm9sbEJvdHRvbShmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbmF0aXZlLmtleWJvYXJkaGlkZScsIG9uS2V5Ym9hcmRIaWRlLCBmYWxzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ25hdGl2ZS5rZXlib2FyZHNob3cnLCBvbktleWJvYXJkU2hvdywgZmFsc2UpO1xuICB9KTtcblxuICAkc2NvcGUuJG9uKFwiJGlvbmljVmlldy5sZWF2ZVwiLCBmdW5jdGlvbihzY29wZXMsIHN0YXRlcykge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCduYXRpdmUua2V5Ym9hcmRoaWRlJywgb25LZXlib2FyZEhpZGUsIGZhbHNlKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbmF0aXZlLmtleWJvYXJkc2hvdycsIG9uS2V5Ym9hcmRTaG93LCBmYWxzZSk7XG4gIH0pO1xuXG4gICRzY29wZS5sb2FkUHJldmlvdXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJldmlvdXNIZWlnaHQgPSAkKCcubWVzc2FnZXMtbGlzdCA+IC5saXN0JykuaGVpZ2h0KCk7XG4gICAgJHNjb3BlLmxpbWl0ID0gTWF0aC5taW4oJHNjb3BlLmxpbWl0ICsgMTUsICRzY29wZS5tZXNzYWdlcy5sZW5ndGgpO1xuICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICAkaW9uaWNTY3JvbGxEZWxlZ2F0ZS4kZ2V0QnlIYW5kbGUoJ2NoYXRTY3JvbGwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNjcm9sbEJ5KDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm1lc3NhZ2VzLWxpc3QgPiAubGlzdCcpLmhlaWdodCgpIC0gcHJldmlvdXNIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UpO1xuICB9XG5cbiAgJHNjb3BlLm9uS2V5UHJlc3MgPSBmdW5jdGlvbihldmVudCkge1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICRzY29wZS5zZW5kTWVzc2FnZSgpO1xuICAgIH1cbiAgfTtcblxuICAkc2NvcGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29udGVudCA9ICRzY29wZS5kYXRhLm1lc3NhZ2U7XG4gICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC5sZW5ndGggIT09IDApIHtcbiAgICAgIHNvY2tldC5zZW5kTWVzc2FnZSgkc2NvcGUucm9vbUhhc2gsIGNvbnRlbnQpO1xuICAgICAgJHNjb3BlLmRhdGEubWVzc2FnZSA9ICcnO1xuICAgIH1cbiAgfTtcblxuICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ3RlbXBsYXRlcy9kZWFsLXNoYXJlLW1vZGFsLmh0bWwnLCB7XG4gICAgc2NvcGU6ICRzY29wZSxcbiAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCdcbiAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICRzY29wZS5zaGFyZU1vZGFsID0gbW9kYWw7XG4gIH0pO1xuXG4gICRzY29wZS5vcGVuU2hhcmVNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgIERlYWxTZXJ2aWNlLmNoZWNrRGVhbENvbXBhdGFiaWxpdHkoJHNjb3BlLnJlY2lwaWVudElkKVxuICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgJHNjb3BlLmZldGNoTGlrZWREZWFscygpO1xuICAgICAgJHNjb3BlLnNoYXJlTW9kYWwuc2hvdygpO1xuICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgIHRpdGxlOiAkc2NvcGUucmVjaXBpZW50ICsgJ1xcJ3MgTGV0dGVyYm94IGRvZXNuXFwndCBzdXBwb3J0IGN1dG91dHMgeWV0IScsXG4gICAgICAgIHRlbXBsYXRlOiAnVHJ5IGluZm9ybWluZyAnICsgJHNjb3BlLnJlY2lwaWVudCArICcgdG8gZ2V0IHRoZSBsYXRlc3QgTGV0dGVyYm94IGFwcCcsXG4gICAgICAgIGNzc0NsYXNzOiBcInBvcHVwLWFsZXJ0XCJcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5jbG9zZVNoYXJlTW9kYWwgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hhcmVNb2RhbC5oaWRlKCk7XG4gIH07XG5cbiAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hhcmVNb2RhbC5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgJHNjb3BlLnNob3dQb3BvdmVyID0gZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgJHNjb3BlLnBvcG92ZXIuc2hvdygkZXZlbnQpO1xuICB9O1xuXG4gICRzY29wZS5zaG93T3RoZXJVc2VyUHJvZmlsZSA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TG9hZGluZygpO1xuICAgIENoYXRTZXJ2aWNlLmdldFJlY2lwaWVudEhhc2hlZElkKCRzY29wZS5yb29tSGFzaCkudGhlbihmdW5jdGlvbih1c2VySWQpIHtcbiAgICAgICRzY29wZS5oaWRlTG9hZGluZygpO1xuICAgICAgJHNjb3BlLmZyb21TdWJQYWdlID0gdHJ1ZTtcbiAgICAgICRzdGF0ZS5nbygnYXBwLm90aGVyLXByb2ZpbGUnLCB7IHVzZXJJZDogdXNlcklkIH0pO1xuICAgIH0pO1xuICAgICRzY29wZS5jbG9zZVBvcG92ZXIoKTtcbiAgfTtcblxuICAkc2NvcGUuc2hvd0xvYWRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAkaW9uaWNMb2FkaW5nLnNob3coe1xuICAgICAgdGVtcGxhdGU6ICc8aW9uLXNwaW5uZXIgaWNvbj1cImRvdHNcIj48L2lvbi1zcGlubmVyPidcbiAgICB9KTtcbiAgfTtcbiAgJHNjb3BlLmhpZGVMb2FkaW5nID0gZnVuY3Rpb24oKXtcbiAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgfTtcblxuICAkc2NvcGUuc2hvd1Jlc3BvbnNlcyA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5jbG9zZVBvcG92ZXIoKTtcbiAgICAkc2NvcGUuZnJvbVN1YlBhZ2UgPSB0cnVlO1xuICAgICRzdGF0ZS5nbygnYXBwLm90aGVyLWxldHRlcicsIHsgcm9vbUhhc2g6ICRzY29wZS5yb29tSGFzaCB9KTtcbiAgfTtcblxuICAkc2NvcGUuY2xvc2VQb3BvdmVyID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnBvcG92ZXIuaGlkZSgpO1xuICB9O1xuXG4gICRzY29wZS52aWV3RGVhbCA9IGZ1bmN0aW9uKGRlYWwpIHtcbiAgICBEZWFsU2VydmljZS5zaG93U2hhcmUgPSB0cnVlO1xuICAgICRzY29wZS5mcm9tU3ViUGFnZSA9IHRydWU7XG4gICAgJHN0YXRlLmdvKCdhcHAuZGVhbCcsIHsgZGVhbElkOiBkZWFsLmlkLCByb29tSGFzaDogJHNjb3BlLnJvb21IYXNoIH0pO1xuICAgICRzY29wZS5jbG9zZVNoYXJlTW9kYWwoKTtcbiAgfTtcblxuICAkc2NvcGUudmlld1NoYXJlZERlYWwgPSBmdW5jdGlvbihkZWFsKSB7XG4gICAgRGVhbFNlcnZpY2Uuc2hvd1NoYXJlID0gZmFsc2U7XG4gICAgJHNjb3BlLmZyb21TdWJQYWdlID0gdHJ1ZTtcbiAgICAkc3RhdGUuZ28oJ2FwcC5kZWFsJywgeyBkZWFsSWQ6IGRlYWwuaWQgfSk7XG4gIH07XG5cbiAgJHNjb3BlLmZldGNoTGlrZWREZWFscyA9IGZ1bmN0aW9uKCkge1xuICAgIERlYWxTZXJ2aWNlLmdldE93bkxpa2VkRGVhbHMoKS50aGVuKGZ1bmN0aW9uKGRlYWxzKSB7XG4gICAgICAkc2NvcGUuZGVhbHNbJ293biddID0gZGVhbHM7XG4gICAgfSk7XG5cbiAgICBEZWFsU2VydmljZS5nZXRVc2VyTGlrZWREZWFscygkc2NvcGUucmVjaXBpZW50SWQpLnRoZW4oZnVuY3Rpb24oZGVhbHMpIHtcbiAgICAgICRzY29wZS5kZWFsc1sndXNlciddID0gZGVhbHM7XG4gICAgfSk7XG5cbiAgICBEZWFsU2VydmljZS5nZXRNdXR1YWxMaWtlZERlYWxzKCRzY29wZS5yZWNpcGllbnRJZCkudGhlbihmdW5jdGlvbihkZWFscykge1xuICAgICAgJHNjb3BlLmRlYWxzWydtdXR1YWwnXSA9IGRlYWxzO1xuICAgIH0pO1xuICB9O1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LmNvbnRyb2xsZXJzJylcblxuLmNvbnRyb2xsZXIoJ0NoYXRzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm9vbXNTZXJ2aWNlKSB7XG5cbiAgJHNjb3BlLmNoYXRzID0gW107XG5cbiAgJHNjb3BlLiRvbignJGlvbmljVmlldy5lbnRlcicsIGZ1bmN0aW9uKCkge1xuICAgIFJvb21zU2VydmljZS5zZXRDaGF0c1BhZ2VTY29wZSgkc2NvcGUpO1xuICAgICRzY29wZS5jaGF0cyA9IFJvb21zU2VydmljZS5nZXRDaGF0cygpO1xuICAgIFJvb21zU2VydmljZS51cGRhdGVSb29tcygpO1xuICB9KTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5jb250cm9sbGVycycpXG5cbi5jb250cm9sbGVyKCdEZWFsQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZVBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNIaXN0b3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY01vZGFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY1Njcm9sbERlbGVnYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlYWxTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYXRTZXJ2aWNlKSB7XG5cbiAgLy8gTG9hZHMgZGVhbFxuICB2YXIgZGVhbElkID0gJHN0YXRlUGFyYW1zLmRlYWxJZDtcbiAgRGVhbFNlcnZpY2UuZ2V0RGVhbChkZWFsSWQpLnRoZW4oZnVuY3Rpb24oZGVhbCkge1xuICAgICRzY29wZS5kZWFsID0gZGVhbDtcbiAgfSk7XG5cbiAgJHNjb3BlLmRlYWxTaGFyZUJ1dHRvbiA9IERlYWxTZXJ2aWNlLnNob3dTaGFyZTtcblxuICAkc2NvcGUuc2hhcmVEZWFsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJvb21IYXNoID0gJHN0YXRlUGFyYW1zLnJvb21IYXNoO1xuICAgIHNvY2tldC5zaGFyZURlYWwocm9vbUhhc2gsICRzY29wZS5kZWFsLnRpdGxlLCAkc2NvcGUuZGVhbC5pZCk7XG4gICAgJGlvbmljSGlzdG9yeS5nb0JhY2soLTEpO1xuICB9O1xuXG4gICRzY29wZS56b29tTWluID0gMTtcblxuICAkc2NvcGUuc2hvd0ltYWdlcyA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgJHNjb3BlLmFjdGl2ZVNsaWRlID0gaW5kZXg7XG4gICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCd0ZW1wbGF0ZXMvZGVhbC1pbWFnZXMtbW9kYWwuaHRtbCcsIHtcbiAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCdcbiAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAkc2NvcGUubW9kYWwgPSBtb2RhbDtcbiAgICAgICRzY29wZS5tb2RhbC5zaG93KCk7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLnNsaWRlID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLnNsaWRlKGluZGV4KTtcbiAgfTtcblxuICAkc2NvcGUuY2xvc2VNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5tb2RhbC5oaWRlKCk7XG4gICAgJHNjb3BlLm1vZGFsLnJlbW92ZSgpO1xuICB9O1xuXG4gICRzY29wZS51cGRhdGVTbGlkZVN0YXR1cyA9IGZ1bmN0aW9uKHNsaWRlKSB7IC8vIGVuc3VyZXMgeW91IGNhbm5vdCBzd2l0Y2ggcGljdHVyZXMgd2hlbiB6b29tZWQgaW5cbiAgICB2YXIgem9vbUZhY3RvciA9ICRpb25pY1Njcm9sbERlbGVnYXRlLiRnZXRCeUhhbmRsZSgnc2Nyb2xsSGFuZGxlJyArIHNsaWRlKS5nZXRTY3JvbGxQb3NpdGlvbigpLnpvb207XG4gICAgaWYgKHpvb21GYWN0b3IgPT0gJHNjb3BlLnpvb21NaW4pIHtcbiAgICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUuZW5hYmxlU2xpZGUodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUuZW5hYmxlU2xpZGUoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAkc2NvcGUub3BlbkxpbmsgPSBmdW5jdGlvbihsaW5rKSB7XG4gICAgd2luZG93Lm9wZW4obGluaywgJ19zeXN0ZW0nKTtcbiAgfTtcbn0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LmNvbnRyb2xsZXJzJylcblxuLmNvbnRyb2xsZXIoJ0RlYWxzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGVQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljU2Nyb2xsRGVsZWdhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVhbFNlcnZpY2UpIHtcbiAgdmFyIGNhdGVnb3J5ID0gJHN0YXRlUGFyYW1zLmNhdGVnb3J5O1xuICAkc2NvcGUuY3VycmVudENhdGVnb3J5ID0gY2F0ZWdvcnk7XG5cbiAgJHNjb3BlLmRlYWxzID0gW107XG4gICRzY29wZS5oYXNSZWFjaGVkRW5kID0gZmFsc2U7XG5cbiAgLy8gRm9yY2Ugc2hhcmUgYnV0dG9uIHRvIGJlIGRpc2FibGVkIGlmIG5hdmlnYXRpbmcgZnJvbSB0aGUgZGVhbHMgcGFnZVxuICBEZWFsU2VydmljZS5zaG93U2hhcmUgPSBmYWxzZTtcblxuICB2YXIgbGltaXQgPSAzO1xuICB2YXIgb2Zmc2V0ID0gMDtcblxuICAkc2NvcGUubG9hZERlYWxzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCRzY29wZS5jdXJyZW50Q2F0ZWdvcnkgPT09IFwiRmVhdHVyZWRcIikge1xuICAgICAgRGVhbFNlcnZpY2UuZ2V0RmVhdHVyZWREZWFscyhvZmZzZXQsIGxpbWl0KS50aGVuKCRzY29wZS5hcHBlbmREZWFscyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIERlYWxTZXJ2aWNlLmdldERlYWxzKCRzY29wZS5jdXJyZW50Q2F0ZWdvcnksIG9mZnNldCwgbGltaXQpLnRoZW4oJHNjb3BlLmFwcGVuZERlYWxzKTtcbiAgICB9XG4gIH1cblxuICAkc2NvcGUuYXBwZW5kRGVhbHMgPSBmdW5jdGlvbihkZWFscykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGltaXQ7IGkrKykge1xuICAgICAgaWYgKGRlYWxzW2ldKSB7XG4gICAgICAgICRzY29wZS5kZWFscy5wdXNoKGRlYWxzW2ldKTtcbiAgICAgICAgb2Zmc2V0Kys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc2NvcGUuaGFzUmVhY2hlZEVuZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGwuaW5maW5pdGVTY3JvbGxDb21wbGV0ZScpO1xuICB9XG5cbiAgJHNjb3BlLnZpZXdMaWtlZCA9IGZ1bmN0aW9uKCkge1xuICAgICRzdGF0ZS5nbygnYXBwLmxpa2VkLWRlYWxzJyk7XG4gIH1cbn0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LmNvbnRyb2xsZXJzJylcblxuLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgZnVuY3Rpb24oJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljSGlzdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvbnNTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm9vbXNTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRidXMpIHtcblxuICAkc2NvcGUubnVtYmVyT2ZMZXR0ZXJzID0gMDtcbiAgJHNjb3BlLm51bWJlck9mTWVzc2FnZXMgPSAwO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxldHRlckNvdW50KCkge1xuICAgIE5vdGlmaWNhdGlvbnNTZXJ2aWNlLmdldE51bWJlck9mTm90aWZpY2F0aW9ucygpXG4gICAgLnRoZW4oZnVuY3Rpb24obnVtYmVyT2ZMZXR0ZXJzKSB7XG4gICAgICAkc2NvcGUubnVtYmVyT2ZMZXR0ZXJzID0gbnVtYmVyT2ZMZXR0ZXJzO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTWVzc2FnZXNDb3VudCgpIHtcbiAgICBSb29tc1NlcnZpY2UuZ2V0VG90YWxVbnJlYWRDb3VudCgpLnRoZW4oZnVuY3Rpb24oY291bnQpIHtcbiAgICAgICRzY29wZS5udW1iZXJPZk1lc3NhZ2VzID0gY291bnQ7XG4gICAgfSk7XG4gIH1cblxuICBldmVudGJ1cy5yZWdpc3Rlckxpc3RlbmVyKCdsZXR0ZXJSZWNlaXZlZCcsIHVwZGF0ZUxldHRlckNvdW50KTtcbiAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcigndW5yZWFkQ291bnRDaGFuZ2VkJywgdXBkYXRlTWVzc2FnZXNDb3VudCk7XG5cbiAgJHNjb3BlLiRvbignJGlvbmljVmlldy5lbnRlcicsIGZ1bmN0aW9uKCkge1xuICAgIGV2ZW50YnVzLmNhbGwoJ2VudGVySG9tZScpO1xuICAgICRpb25pY0hpc3RvcnkubmV4dFZpZXdPcHRpb25zKHtcbiAgICAgIGRpc2FibGVCYWNrOiB0cnVlXG4gICAgfSk7XG4gICAgdXBkYXRlTGV0dGVyQ291bnQoKTtcbiAgICB1cGRhdGVNZXNzYWdlc0NvdW50KCk7XG4gIH0pO1xuXG4gICRzY29wZS5nb05vdGlmaWNhdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAkc3RhdGUuZ28oJ2FwcC5ub3RpZmljYXRpb25zJyk7XG4gIH07XG59KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5jb250cm9sbGVycycpXG5cbi5jb250cm9sbGVyKCdMZXR0ZXJDdHJsJywgZnVuY3Rpb24oJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY0hpc3RvcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldHRlclNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50YnVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dCkge1xuXG4gIC8vIE1ha2VzIHN1cmUgdGhhdCBjYWNoZSBpcyBjbGVhcmVkIGFmdGVyIGV2ZXJ5IHRpbWUgdXNlciBzdWJtaXRzL2Nsb3NlcyBsZXR0ZXJcbiAgJHNjb3BlLiRvbihcIiRpb25pY1ZpZXcuYWZ0ZXJMZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgJCgnLmJ1dHRvbi1uZXh0JykucXRpcCgnZGVzdHJveScpO1xuICAgICRpb25pY0hpc3RvcnkuY2xlYXJDYWNoZSgpO1xuICB9KTtcblxuICB2YXIgdGFyZ2V0VXNlciA9IGxldHRlclNlcnZpY2UudGFyZ2V0VXNlckNhcmQ7XG5cbiAgdmFyIHF1ZXN0aW9ucyA9IHRhcmdldFVzZXIucXVlc3Rpb25zO1xuICBpZiAoIXF1ZXN0aW9ucykge1xuICAgICRpb25pY0hpc3RvcnkubmV4dFZpZXdPcHRpb25zKHtcbiAgICAgIGRpc2FibGVCYWNrOiB0cnVlXG4gICAgfSk7XG5cbiAgICAkc3RhdGUuZ28oJ2FwcC5ob21lJyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHNlbGVjdGVkID0gWy0xLCAtMSwgLTEsIC0xLCAtMV07XG5cbiAgICAkc2NvcGUuY3VyciA9IDA7XG4gICAgJHNjb3BlLm1heCA9IHF1ZXN0aW9ucy5sZW5ndGggLSAxO1xuICAgICRzY29wZS5jYXJkID0gbGV0dGVyU2VydmljZS50YXJnZXRVc2VyQ2FyZDtcbiAgICAkc2NvcGUudXNlck5hbWUgPSB0YXJnZXRVc2VyLm5hbWU7XG4gICAgJHNjb3BlLmN1cnJlbnRRdWVzdGlvbiA9IHRhcmdldFVzZXIucXVlc3Rpb25zWzBdO1xuICAgICRzY29wZS53YXJuaW5nID0gJyc7XG4gICAgJHNjb3BlLnRvb2x0aXBTaG93biA9IGZhbHNlO1xuICAgICRzY29wZS5zZWxlY3RlZFRhYiA9IC0xO1xuICB9XG5cbiAgJHNjb3BlLm5leHRRdWVzdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS53YXJuaW5nID0gJyc7XG4gICAgaWYgKHNlbGVjdGVkWyRzY29wZS5jdXJyXSA9PT0gLTEpIHNlbGVjdGVkWyRzY29wZS5jdXJyXSA9ICRzY29wZS5zZWxlY3RlZFRhYjtcblxuICAgIGlmICgkc2NvcGUuY3VyciA9PT0gJHNjb3BlLm1heCAmJiBzZWxlY3RlZC5sZW5ndGggPT09IDUgJiYgc2VsZWN0ZWQuaW5kZXhPZigtMSkgPT09IC0xKSB7XG4gICAgICByZW1vdmVUb29sdGlwKCk7XG4gICAgICB1cGRhdGVRdWVzdGlvbkFuc3dlcnMocXVlc3Rpb25zLCBzZWxlY3RlZCk7XG4gICAgICBiYWNrZW5kLnNlbmRBTGV0dGVyKHRhcmdldFVzZXIuaGFzaGVkSWQsIHF1ZXN0aW9ucyk7XG4gICAgICAkaW9uaWNIaXN0b3J5LmdvQmFjaygpO1xuICAgICAgZXZlbnRidXMuY2FsbCgnY2xvc2VMZXR0ZXInKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKCRzY29wZS5jdXJyID09PSAkc2NvcGUubWF4KSB7XG4gICAgICAkc2NvcGUud2FybmluZyA9ICdQbGVhc2UgYW5zd2VyIGFsbCBxdWVzdGlvbnMuJztcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgJHNjb3BlLmN1cnIrKztcbiAgICB1cGRhdGVRdWVzdGlvblZpZXcoJHNjb3BlLmN1cnIsIHF1ZXN0aW9ucywgc2VsZWN0ZWQpO1xuICB9O1xuXG4gICRzY29wZS5wcmV2UXVlc3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZW1vdmVUb29sdGlwKCk7XG4gICAgJHNjb3BlLndhcm5pbmcgPSAnJztcbiAgICBpZiAoJHNjb3BlLmN1cnIgPD0gMCkgcmV0dXJuO1xuICAgIGlmIChzZWxlY3RlZFskc2NvcGUuY3Vycl0gPT09IC0xKSBzZWxlY3RlZFskc2NvcGUuY3Vycl0gPSAkc2NvcGUuc2VsZWN0ZWRUYWI7XG4gICAgJHNjb3BlLmN1cnItLTtcbiAgICB1cGRhdGVRdWVzdGlvblZpZXcoJHNjb3BlLmN1cnIsIHF1ZXN0aW9ucywgc2VsZWN0ZWQpO1xuICB9O1xuXG4gICRzY29wZS5zZWxlY3RUYWIgPSBmdW5jdGlvbih0YWIpIHtcbiAgICAkc2NvcGUuc2VsZWN0ZWRUYWIgPSB0YWI7XG5cbiAgICBpZiAoJHNjb3BlLmN1cnIgPCAkc2NvcGUubWF4KSB7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLm5leHRRdWVzdGlvbigpO1xuICAgICAgfSwgMjAwKTtcbiAgICB9XG5cbiAgICBpZiAoJHNjb3BlLmN1cnIgPT09ICRzY29wZS5tYXggJiYgISRzY29wZS50b29sdGlwU2hvd24pIHtcbiAgICAgICQoJy5idXR0b24tbmV4dCcpLnF0aXAoe1xuICAgICAgICBjb250ZW50OiAnU2VuZCB0aGUgbGV0dGVyIScsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgY2xhc3NlczogJ3F0aXAtdGlwc3knXG4gICAgICAgIH0sXG4gICAgICAgIHNob3c6IHtcbiAgICAgICAgICB3aGVuOiBmYWxzZSxcbiAgICAgICAgICByZWFkeTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBoaWRlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICAkc2NvcGUudG9vbHRpcFNob3duID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbnNcbiAgICovXG5cbiAgLy8gUmVtb3ZlcyBhY3RpdmUgY2xhc3MgZnJvbSAubGVmdCBhbmQgLnJpZ2h0XG4gIGZ1bmN0aW9uIHJlc2V0Q2xhc3MoKSB7XG4gICAgJHNjb3BlLnNlbGVjdGVkVGFiID0gLTE7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVRdWVzdGlvblZpZXcoY3VyciwgcXVlc3Rpb25zLCBzZWxlY3RlZCkge1xuICAgIHJlc2V0Q2xhc3MoKTtcbiAgICAkc2NvcGUuY3VycmVudFF1ZXN0aW9uID0gcXVlc3Rpb25zW2N1cnJdO1xuICAgICRzY29wZS5zZWxlY3RlZFRhYiA9IHNlbGVjdGVkW2N1cnJdO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlUXVlc3Rpb25BbnN3ZXJzKHF1ZXN0aW9ucywgYW5zd2Vycykge1xuICAgIHF1ZXN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHF1ZXN0aW9uLCBpbmRleCkge1xuICAgICAgcXVlc3Rpb24uYW5zd2VyID0gZmFsc2U7XG4gICAgICBpZiAoYW5zd2Vyc1tpbmRleF0gPT09IDEpIHtcbiAgICAgICAgcXVlc3Rpb24uYW5zd2VyID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVRvb2x0aXAoKSB7XG4gICAgaWYgKCRzY29wZS50b29sdGlwU2hvd24pIHtcbiAgICAgICAgJCgnLmJ1dHRvbi1uZXh0JykucXRpcCgnZGVzdHJveScpO1xuICAgICAgICAkc2NvcGUudG9vbHRpcFNob3duID0gZmFsc2U7XG4gICAgfVxuICB9XG59KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5jb250cm9sbGVycycpXG5cbi5jb250cm9sbGVyKCdMaWtlZERlYWxzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWFsU2VydmljZSkge1xuICAkc2NvcGUubGlrZWREZWFscyA9IFtdO1xuXG4gIHZhciBmZXRjaExpa2VkRGVhbHMgPSBmdW5jdGlvbigpIHtcbiAgICBEZWFsU2VydmljZS5nZXRPd25MaWtlZERlYWxzKCkudGhlbihmdW5jdGlvbihkZWFscykge1xuICAgICAgJHNjb3BlLmxpa2VkRGVhbHMgPSBkZWFscztcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUudmlld0RlYWwgPSBmdW5jdGlvbihkZWFsKSB7XG4gICAgJHN0YXRlLmdvKCdhcHAuZGVhbCcsIHsgZGVhbElkOiBkZWFsLmlkIH0pO1xuICB9XG5cbiAgZmV0Y2hMaWtlZERlYWxzKCk7XG59KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5jb250cm9sbGVycycpXG5cbi5jb250cm9sbGVyKCdOb3RpZmljYXRpb25zQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY01vZGFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uc1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb29tc1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudGJ1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQpIHtcblxuICAkc2NvcGUubm90aWZpY2F0aW9ucyA9IFtdO1xuICAkc2NvcGUuY2hhdHMgPSBbXTtcbiAgJHNjb3BlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAkc2NvcGUuY3VycmVudFRhYiA9IE5vdGlmaWNhdGlvbnNTZXJ2aWNlLmdldFRhYigpO1xuXG4gICRzY29wZS5zZXRUYWIgPSBmdW5jdGlvbih0YWIpIHtcbiAgICAkc2NvcGUuY3VycmVudFRhYiA9IHRhYjtcbiAgICBOb3RpZmljYXRpb25zU2VydmljZS5zZXRUYWIodGFiKTtcbiAgfVxuICBmdW5jdGlvbiByZWZyZXNoTm90aWZpY2F0aW9ucygpIHtcbiAgICAkc2NvcGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICBOb3RpZmljYXRpb25zU2VydmljZS5nZXROb3RpZmljYXRpb25zTGlzdCgpLnRoZW4oZnVuY3Rpb24obm90aWZpY2F0aW9ucykge1xuICAgICAgJHNjb3BlLm5vdGlmaWNhdGlvbnMgPSBub3RpZmljYXRpb25zO1xuICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcigncm9vbU1lc3NhZ2UnLCBmdW5jdGlvbihyb29tTWVzc2FnZSkge1xuICAgIHZhciBtZXNzYWdlID0gcm9vbU1lc3NhZ2UubWVzc2FnZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5jaGF0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCRzY29wZS5jaGF0c1tpXS5pZCA9PT0gbWVzc2FnZS5Sb29tSGFzaCkge1xuICAgICAgICAkc2NvcGUuY2hhdHNbaV0ubGFzdF9tZXNzYWdlID0gKG1lc3NhZ2Uuc2VuZGVyID09PSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hhc2hlZElkJykgPyAnWW91OiAnIDogJHNjb3BlLmNoYXRzW2ldLmZyb20gKyAnOiAnKSArIG1lc3NhZ2UuY29udGVudDtcbiAgICAgICAgJHNjb3BlLmNoYXRzW2ldLmxhc3RfYWN0aXZpdHkgPSBuZXcgRGF0ZShtZXNzYWdlLnRpbWVTZW50KTtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VuZGVyICE9PSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hhc2hlZElkJykpIHtcbiAgICAgICAgICAkc2NvcGUuY2hhdHNbaV0udW5yZWFkX2NvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgICRzY29wZS5jaGF0cy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBiLmxhc3RfYWN0aXZpdHkuZ2V0VGltZSgpIC0gYS5sYXN0X2FjdGl2aXR5LmdldFRpbWUoKTtcbiAgICB9KTtcbiAgICAkc2NvcGUuJGFwcGx5KCk7XG4gIH0pO1xuXG4gIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ2xldHRlclJlY2VpdmVkJywgcmVmcmVzaE5vdGlmaWNhdGlvbnMpO1xuXG4gICRzY29wZS4kb24oXCIkaW9uaWNWaWV3LmVudGVyXCIsIGZ1bmN0aW9uKHNjb3Blcywgc3RhdGVzKSB7XG4gICAgUm9vbXNTZXJ2aWNlLnNldE5vdGlmc1BhZ2VTY29wZSgkc2NvcGUpO1xuICAgIHJlZnJlc2hOb3RpZmljYXRpb25zKCk7XG4gICAgJHNjb3BlLmNoYXRzID0gUm9vbXNTZXJ2aWNlLmdldENoYXRzKCk7XG4gICAgUm9vbXNTZXJ2aWNlLnVwZGF0ZVJvb21zKCk7XG4gIH0pO1xuXG4gICRzY29wZS5zZWxlY3ROb3RpZmljYXRpb24gPSBmdW5jdGlvbihub3RpZmljYXRpb24pIHtcbiAgICBub3RpZmljYXRpb24uaXNSZWFkID0gdHJ1ZTtcbiAgICAkc2NvcGUuc2VsZWN0ZWRMZXR0ZXIgPSBub3RpZmljYXRpb247XG4gICAgYmFja2VuZC5tYXJrTGV0dGVyQXNSZWFkKG5vdGlmaWNhdGlvbi5pZCk7XG4gICAgJHN0YXRlLmdvKCdhcHAucmVzcG9uc2UnLCB7cmVzcG9uc2VJZDogbm90aWZpY2F0aW9uLmlkfSk7XG4gIH07XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guY29udHJvbGxlcnMnKVxuXG4uY29udHJvbGxlcignT25ib2FyZGluZ0N0cmwnLCBmdW5jdGlvbigkc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY1BvcHVwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YU9hdXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljSGlzdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhSW5BcHBCcm93c2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFGYWNlYm9vayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhY2Vib29rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRidXMpIHtcblxuICAkc2NvcGUub3BlblRlcm1zT2ZVc2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVmID0gJGNvcmRvdmFJbkFwcEJyb3dzZXIub3BlbignaHR0cDovL2dldGxldHRlcmJveC5jb20vdGVybXMnLCAnX2JsYW5rJywge1xuICAgICAgaGFyZHdhcmViYWNrOiAneWVzJyxcbiAgICAgIHpvb206ICdubycsXG4gICAgICBjbG9zZWJ1dHRvbmNhcHRpb246ICdDbG9zZScsXG4gICAgICB0b29sYmFycG9zaXRpb246ICdib3R0b20nXG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLnNob3dMb2FkaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgJGlvbmljTG9hZGluZy5zaG93KHtcbiAgICAgIHRlbXBsYXRlOiAnPGlvbi1zcGlubmVyIGljb249XCJyaXBwbGVcIj48L2lvbi1zcGlubmVyPidcbiAgICB9KTtcbiAgfTtcbiAgJHNjb3BlLmhpZGVMb2FkaW5nID0gZnVuY3Rpb24oKXtcbiAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgfTtcblxuICAvLyBMb2dpbiBsb2dpY1xuICAkc2NvcGUuYXV0aGVudGljYXRlVG9rZW4gPSBmdW5jdGlvbihmYlRva2VuKSB7XG4gICAgQXV0aFNlcnZpY2UuYXV0aFRva2VuKGZiVG9rZW4pLnRoZW4oZnVuY3Rpb24oc3VjY2Vzcykge1xuICAgICAgZXZlbnRidXMuY2FsbCgnbG9naW5Db21wbGV0ZWQnKTtcbiAgICAgICRzY29wZS5oaWRlTG9hZGluZygpO1xuICAgICAgJHNjb3BlLmJlZ2luT25ib2FyZGluZygpO1xuICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgJHNjb3BlLmhpZGVMb2FkaW5nKCk7XG4gICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdBbiBlcnJvciBvY2N1cnJlZCEnLFxuICAgICAgICB0ZW1wbGF0ZTogJ1BsZWFzZSB0cnkgYWdhaW4gbGF0ZXInLFxuICAgICAgICBjc3NDbGFzczogXCJwb3B1cC1hbGVydFwiXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBQZXJmb3JtIHRoZSBsb2dpbiBhY3Rpb24gd2hlbiB0aGUgdXNlciBzdWJtaXRzIHRoZSBsb2dpbiBmb3JtXG4gICRzY29wZS5kb0xvZ2luID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dMb2FkaW5nKCk7XG4gICAgaWYgKCF3aW5kb3cuY29yZG92YSkge1xuICAgICAgRmFjZWJvb2subG9naW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAkc2NvcGUuYXV0aGVudGljYXRlVG9rZW4ocmVzcG9uc2UuYXV0aFJlc3BvbnNlLmFjY2Vzc1Rva2VuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc2NvcGUuaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICAgIHRpdGxlOiAnQW4gZXJyb3Igd2hlbiB0cnlpbmcgdG8gbG9naW4gd2l0aCBGYWNlYm9vayEnLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdQbGVhc2UgdHJ5IGFnYWluIGxhdGVyJyxcbiAgICAgICAgICAgIGNzc0NsYXNzOiBcInBvcHVwLWFsZXJ0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSwge3Njb3BlOiAncHVibGljX3Byb2ZpbGUsdXNlcl9iaXJ0aGRheSx1c2VyX3Bob3Rvcyx1c2VyX2ZyaWVuZHMnLCByZXR1cm5fc2NvcGVzOiB0cnVlfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRjb3Jkb3ZhRmFjZWJvb2subG9naW4oW1wicHVibGljX3Byb2ZpbGVcIiwgXCJ1c2VyX2JpcnRoZGF5XCIsIFwidXNlcl9waG90b3NcIiwgXCJ1c2VyX2ZyaWVuZHNcIl0pXG4gICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgJHNjb3BlLmF1dGhlbnRpY2F0ZVRva2VuKHJlcy5hdXRoUmVzcG9uc2UuYWNjZXNzVG9rZW4pO1xuICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICRzY29wZS5oaWRlTG9hZGluZygpO1xuICAgICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICB0aXRsZTogJ0FuIGVycm9yIHdoZW4gdHJ5aW5nIHRvIGxvZ2luIHdpdGggRmFjZWJvb2shJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogJ1BsZWFzZSB0cnkgYWdhaW4gbGF0ZXInLFxuICAgICAgICAgIGNzc0NsYXNzOiBcInBvcHVwLWFsZXJ0XCJcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgIH1cbiAgfTtcblxuICAkc2NvcGUuYmVnaW5PbmJvYXJkaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFBdXRoU2VydmljZS5pc1JlZ2lzdGVyZWQoKSkge1xuICAgICAgJHN0YXRlLmdvKCdvbmJvYXJkaW5nJywge29uYm9hcmRTdGVwOiAwfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRzdGF0ZS5nbygnYXBwLmhvbWUnKTtcbiAgICB9XG4gIH07XG5cblxuICAvLyBPbmJvYXJkaW5nIHN0ZXAgMCBsb2dpY1xuICAkc2NvcGUuc3RhcnRPbmJvYXJkID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAkc3RhdGUuZ28oJ29uYm9hcmRpbmcnLCB7b25ib2FyZFN0ZXA6IDF9KTtcbiAgfTtcblxuICAkc2NvcGUuaXNBdFN0YXJ0ID0gdHJ1ZTtcbiAgJHNjb3BlLmlzQXRFbmQgPSBmYWxzZTtcblxuICAkc2NvcGUuc2xpZGUgPSBmdW5jdGlvbihpbmRleCkge1xuICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUuc2xpZGUoaW5kZXgpO1xuICAgIHVwZGF0ZVN0YXJ0QW5kRW5kVmFycygpO1xuICB9O1xuXG4gICRzY29wZS5wcmV2U2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLnByZXZpb3VzKCk7XG4gICAgdXBkYXRlU3RhcnRBbmRFbmRWYXJzKCk7XG4gIH07XG5cbiAgJHNjb3BlLm5leHRTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUubmV4dCgpO1xuICAgIHVwZGF0ZVN0YXJ0QW5kRW5kVmFycygpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZVN0YXJ0QW5kRW5kVmFycygpIHtcbiAgICB2YXIgaW5kZXggPSAkaW9uaWNTbGlkZUJveERlbGVnYXRlLmN1cnJlbnRJbmRleCgpO1xuICAgIGlmIChpbmRleCA9PSAwKSB7XG4gICAgICAkc2NvcGUuaXNBdFN0YXJ0ID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09ICRpb25pY1NsaWRlQm94RGVsZWdhdGUuc2xpZGVzQ291bnQoKSAtIDEpIHtcbiAgICAgICRzY29wZS5pc0F0RW5kID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLmlzQXRTdGFydCA9IGZhbHNlO1xuICAgICAgJHNjb3BlLmlzQXRFbmQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyBPbmJvYXJkaW5nIHN0ZXAgMSBsb2dpY1xuXG4gICRzY29wZS5nZXRSYW5kb21RdWVzdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICBiYWNrZW5kLmdldFJhbmRvbVF1ZXN0aW9ucygpLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICRzY29wZS5xdWVzdGlvbnMgPSByZXMuc3BsaWNlKDAsNSk7XG4gICAgfSwgZnVuY3Rpb24oZXJyKXtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ291bGRuJ3QgcmV0cml2ZSBxdWVzdGlvbnNcIik7XG4gICAgfSk7XG4gIH1cblxuICAkc2NvcGUuZ2V0TmV3UW4gPSBmdW5jdGlvbihxdWVzdGlvbikge1xuICAgIHZhciBxbklkcyA9ICRzY29wZS5xdWVzdGlvbnMubWFwKGZ1bmN0aW9uKHFuKXsgcmV0dXJuIHFuLmlkIH0pO1xuICAgIGJhY2tlbmQuZ2V0T25lUmFuZG9tUXVlc3Rpb24ocW5JZHMpLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgIHZhciBpbmRleCA9ICRzY29wZS5xdWVzdGlvbnMuaW5kZXhPZihxdWVzdGlvbik7XG4gICAgICAkc2NvcGUucXVlc3Rpb25zW2luZGV4XSA9IHJlcztcbiAgICB9LCBmdW5jdGlvbihlcnIpe1xuICAgICAgY29uc29sZS5sb2coXCJDb3VsZG4ndCByZXRyaXZlIG5ldyBxdWVzdGlvblwiKTtcbiAgICB9KTtcbiAgfVxuXG4gICRzY29wZS5zZWxlY3RPcHRpb24gPSBmdW5jdGlvbihxdWVzdGlvbiwgb3B0aW9uKSB7XG4gICAgdmFyIGluZGV4ID0gJHNjb3BlLnF1ZXN0aW9ucy5pbmRleE9mKHF1ZXN0aW9uKTtcbiAgICBxdWVzdGlvbi5hbnN3ZXIgPSBvcHRpb247XG4gICAgJHNjb3BlLnF1ZXN0aW9uc1tpbmRleF0gPSBxdWVzdGlvbjtcbiAgfVxuXG4gICRzY29wZS5jb21wbGV0ZU9uYm9hcmRpbmdTdGVwMSA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICBpZiAodHlwZW9mICRzY29wZS5xdWVzdGlvbnNbaV0uYW5zd2VyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzaG93RXJyb3IoXCJQbGVhc2UgYW5zd2VyIGFsbCB5b3VyIHF1ZXN0aW9uc1wiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBxdWVzdGlvbnMgPSAkc2NvcGUucXVlc3Rpb25zLm1hcChmdW5jdGlvbihxbil7XG4gICAgICByZXR1cm4geyBpZDogcW4uaWQsIGFuc3dlcjogcW4uYW5zd2VyIH1cbiAgICB9KTtcblxuICAgIGJhY2tlbmQuc2V0UXVlc3Rpb25zQW5kQW5zd2VycyhxdWVzdGlvbnMsIGZ1bmN0aW9uKHJlcyl7XG4gICAgICAkc2NvcGUuY29tcGxldGVPbmJvYXJkaW5nKCk7XG4gICAgfSwgZnVuY3Rpb24oZXJyKXtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ291bGRuJ3Qgc2F2ZSBxdWVzdGlvbiBhbmQgYW5zd2Vyc1wiKTtcbiAgICB9KTtcbiAgfVxuXG4gICRzY29wZS5jb21wbGV0ZU9uYm9hcmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lzUmVnaXN0ZXJlZCcsICd0cnVlJyk7XG4gICAgJHN0YXRlLmdvKCdhcHAuaG9tZScpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0Vycm9yKHRpdGxlKSB7XG4gICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgY3NzQ2xhc3M6IFwicG9wdXAtYWxlcnRcIixcbiAgICAgIG9rVHlwZTogXCJidXR0b24tc3RhYmxlXCJcbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAkaW9uaWNIaXN0b3J5LmNsZWFySGlzdG9yeSgpO1xuICAgIGlmIChBdXRoU2VydmljZS5pc0xvZ2dlZEluKCkgJiYgISRzY29wZS5xdWVzdGlvbnMpIHtcbiAgICAgICRzY29wZS5nZXRSYW5kb21RdWVzdGlvbnMoKTtcbiAgICB9XG4gIH1cblxuICBpbml0KCk7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guY29udHJvbGxlcnMnKVxuXG4uY29udHJvbGxlcignT3RoZXJMZXR0ZXJDdHJsJywgZnVuY3Rpb24oJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZVBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb29tc1NlcnZpY2UpIHtcbiAgdmFyIHJvb21IYXNoID0gJHN0YXRlUGFyYW1zLnJvb21IYXNoO1xuICBSb29tc1NlcnZpY2UuZ2V0Um9vbUxldHRlcihyb29tSGFzaCkudGhlbihmdW5jdGlvbihsZXR0ZXIpIHtcbiAgICAkc2NvcGUubGV0dGVyID0gbGV0dGVyO1xuICB9KTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5jb250cm9sbGVycycpXG5cbi5jb250cm9sbGVyKCdPdGhlclByb2ZpbGVDdHJsJywgZnVuY3Rpb24oJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGVQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb2ZpbGVTZXJ2aWNlKSB7XG4gIHZhciB1c2VySWQgPSAkc3RhdGVQYXJhbXMudXNlcklkO1xuICBQcm9maWxlU2VydmljZS5nZXRPdGhlclByb2ZpbGUodXNlcklkKVxuICAgIC50aGVuKGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgIHVzZXIubXV0dWFsX2ZyaWVuZHNfY291bnQgPSAodHlwZW9mIHVzZXIubXV0dWFsRnJpZW5kcyA9PT0gJ3VuZGVmaW5lZCcpID8gJ3Vua25vd24nIDogdXNlci5tdXR1YWxGcmllbmRzLnN1bW1hcnkudG90YWxfY291bnQ7XG4gICAgICAkc2NvcGUudXNlciA9IHVzZXI7XG4gICAgICAkc2NvcGUudXNlci5uYW1lID0gJHNjb3BlLnVzZXIuZmlyc3ROYW1lO1xuICAgICAgJHNjb3BlLnVzZXIucHJvZmlsZV9waWMgPSAkc2NvcGUudXNlci5waWN0dXJlTWVkO1xuICAgIH0pO1xufSk7XG5cbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guY29udHJvbGxlcnMnKVxuXG4uY29udHJvbGxlcignUHJvZmlsZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNIaXN0b3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljUG9wdXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTW9kYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9maWxlU2VydmljZSkge1xuXG4gICRzY29wZS5wcm9maWxlID0ge307XG4gICRzY29wZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAkc2NvcGUucHJvZmlsZVBob3RvcyA9IFtdO1xuICAkc2NvcGUuaXNMb2FkaW5nUGhvdG9zID0gZmFsc2U7XG5cbiAgJHNjb3BlLiRvbihcIiRpb25pY1ZpZXcuZW50ZXJcIiwgZnVuY3Rpb24oc2NvcGVzLCBzdGF0ZXMpIHtcbiAgICBQcm9maWxlU2VydmljZS5nZXRQcm9maWxlKCkudGhlbihmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICAkc2NvcGUucHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgICAkc2NvcGUubmFtZUFuZEFnZSA9IHByb2ZpbGUuZmlyc3ROYW1lICsgXCIsIFwiICsgcHJvZmlsZS5hZ2U7XG4gICAgICAkc2NvcGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfSlcbiAgfSk7XG5cbiAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCd0ZW1wbGF0ZXMvcGhvdG8tbW9kYWwuaHRtbCcsIHtcbiAgICBzY29wZTogJHNjb3BlLFxuICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJ1xuICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgJHNjb3BlLm1vZGFsID0gbW9kYWw7XG4gIH0pO1xuXG4gICRzY29wZS4kb24oJyRpb25pY1ZpZXcuZW50ZXInLCBmdW5jdGlvbigpIHtcbiAgICAkaW9uaWNIaXN0b3J5Lm5leHRWaWV3T3B0aW9ucyh7XG4gICAgICBkaXNhYmxlQmFjazogdHJ1ZVxuICAgIH0pO1xuICB9KTtcblxuICAkc2NvcGUuc2hvd0xvYWRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAkaW9uaWNMb2FkaW5nLnNob3coe1xuICAgICAgdGVtcGxhdGU6ICc8aW9uLXNwaW5uZXIgaWNvbj1cInJpcHBsZVwiPjwvaW9uLXNwaW5uZXI+J1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5oaWRlTG9hZGluZyA9IGZ1bmN0aW9uKCl7XG4gICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gIH07XG5cbiAgJHNjb3BlLm9wZW5Qcm9maWxlUGhvdG9Nb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5pc0xvYWRpbmdQaG90b3MgPSB0cnVlO1xuICAgICRzY29wZS5tb2RhbC5zaG93KCk7XG4gICAgUHJvZmlsZVNlcnZpY2UuZ2V0UHJvZmlsZVBpY3R1cmVzKClcbiAgICAudGhlbihmdW5jdGlvbihwaG90b3MpIHtcbiAgICAgICRzY29wZS5wcm9maWxlUGhvdG9zID0gcGhvdG9zO1xuICAgICAgJHNjb3BlLmlzTG9hZGluZ1Bob3RvcyA9IGZhbHNlO1xuICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgJHNjb3BlLmlzTG9hZGluZ1Bob3RvcyA9IGZhbHNlO1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS51cGRhdGVQcm9maWxlUGhvdG8gPSBmdW5jdGlvbihpZCkge1xuICAgICRzY29wZS5oaWRlUHJvZmlsZVBob3RvTW9kYWwoKTtcbiAgICAkc2NvcGUuc2hvd0xvYWRpbmcoKTtcbiAgICBQcm9maWxlU2VydmljZS51cGRhdGVQcm9maWxlUGljdHVyZShpZClcbiAgICAudGhlbihmdW5jdGlvbihzdWNjZXNzKSB7XG4gICAgICAkc2NvcGUucHJvZmlsZS5waWN0dXJlTWVkID0gc3VjY2Vzcy5waWN0dXJlTWVkO1xuICAgICAgJHNjb3BlLnByb2ZpbGUucGljdHVyZVRodW1iID0gc3VjY2Vzcy5waWN0dXJlVGh1bWI7XG4gICAgICAkc2NvcGUuaGlkZUxvYWRpbmcoKTtcbiAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICRzY29wZS5oaWRlTG9hZGluZygpO1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5oaWRlUHJvZmlsZVBob3RvTW9kYWwgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUubW9kYWwuaGlkZSgpO1xuICB9O1xuXG4gICRzY29wZS5nZXROZXdRbiA9IGZ1bmN0aW9uKG9sZFFuKSB7XG4gICAgdmFyIHFuSWRzID0gJHNjb3BlLnByb2ZpbGUucXVlc3Rpb25zLm1hcChmdW5jdGlvbihxbil7IHJldHVybiBxbi5pZCB9KTtcbiAgICBQcm9maWxlU2VydmljZS5nZXROZXdRdWVzdGlvbihxbklkcykudGhlbihmdW5jdGlvbihxbikge1xuICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLnByb2ZpbGUucXVlc3Rpb25zLmluZGV4T2Yob2xkUW4pO1xuICAgICAgJHNjb3BlLnByb2ZpbGUucXVlc3Rpb25zW2luZGV4XSA9IHFuO1xuICAgIH0pXG4gIH1cblxuICAkc2NvcGUuc2VsZWN0T3B0aW9uID0gZnVuY3Rpb24ocXVlc3Rpb24sIG9wdGlvbikge1xuICAgIHZhciBpbmRleCA9ICRzY29wZS5wcm9maWxlLnF1ZXN0aW9ucy5pbmRleE9mKHF1ZXN0aW9uKTtcbiAgICBxdWVzdGlvbi5hbnN3ZXIgPSBvcHRpb247XG4gICAgJHNjb3BlLnByb2ZpbGUucXVlc3Rpb25zW2luZGV4XSA9IHF1ZXN0aW9uO1xuICB9XG5cbiAgJHNjb3BlLm9uRW50ZXJUZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gY29uc29sZS5sb2coJHNjb3BlLmRhdGEuYmlvKTtcbiAgfVxuXG4gICRzY29wZS51cGRhdGVQcm9maWxlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVycm9ycyA9IFtdO1xuXG4gICAgaWYgKGlzQmlvVmFsaWQoKSkge1xuICAgICAgUHJvZmlsZVNlcnZpY2UudXBkYXRlQmlvKCRzY29wZS5wcm9maWxlLmJpbyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVycm9ycy5wdXNoKFwiUGxlYXNlIGVudGVyIGEgYmlvXCIpO1xuICAgIH1cblxuICAgIGlmIChoYXNBbnN3ZXJlZEFsbFF1ZXN0aW9ucygpKSB7XG4gICAgICB2YXIgcXVlc3Rpb25zID0gJHNjb3BlLnByb2ZpbGUucXVlc3Rpb25zLm1hcChmdW5jdGlvbihxbil7XG4gICAgICAgIHJldHVybiB7IGlkOiBxbi5pZCwgYW5zd2VyOiBxbi5hbnN3ZXIgfVxuICAgICAgfSk7XG5cbiAgICAgIFByb2ZpbGVTZXJ2aWNlLnVwZGF0ZVF1ZXN0aW9ucyhxdWVzdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlcnJvcnMucHVzaChcIlBsZWFzZSBhbnN3ZXIgYWxsIHF1ZXN0aW9uc1wiKTtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNob3dFcnJvcihlcnJvcnMuam9pbihcIiAmIFwiKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dTdWNjZXNzKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNCaW9WYWxpZCgpIHtcbiAgICByZXR1cm4gJHNjb3BlLnByb2ZpbGUuYmlvLmxlbmd0aCA+IDA7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNBbnN3ZXJlZEFsbFF1ZXN0aW9ucygpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgaWYgKHR5cGVvZiAkc2NvcGUucHJvZmlsZS5xdWVzdGlvbnNbaV0uYW5zd2VyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0Vycm9yKHRpdGxlKSB7XG4gICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgY3NzQ2xhc3M6IFwicG9wdXAtYWxlcnRcIixcbiAgICAgIG9rVHlwZTogXCJidXR0b24tc3RhYmxlXCJcbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd1N1Y2Nlc3MoKSB7XG4gICAgJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgdGl0bGU6IFwiWW91ciBwcm9maWxlIGhhcyBiZWVuIHVwZGF0ZWQhXCIsXG4gICAgICBjc3NDbGFzczogXCJwb3B1cC1hbGVydFwiXG4gICAgfSkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICB9KTtcbiAgfVxuXG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guY29udHJvbGxlcnMnKVxuXG4uY29udHJvbGxlcignUmVzcG9uc2VDdHJsJywgZnVuY3Rpb24oJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGVQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljSGlzdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvbnNTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb2ZpbGVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcG9ydFNlcnZpY2UpIHtcbiAgZ2V0Tm90aWZpY2F0aW9uKCk7XG5cbiAgJGlvbmljSGlzdG9yeS5uZXh0Vmlld09wdGlvbnMoe1xuICAgIGRpc2FibGVCYWNrOiB0cnVlXG4gIH0pO1xuXG4gICRzY29wZS5yZWplY3RMZXR0ZXIgPSBmdW5jdGlvbihsZXR0ZXIpIHtcbiAgICAvLyByZWplY3RzIHRoZSBsZXR0ZXIgYW5kIHJlZnJlc2ggbm90aWZzXG4gICAgYmFja2VuZC5yZWplY3RMZXR0ZXIobGV0dGVyLmlkLCBmdW5jdGlvbigpIHtcbiAgICAgICRzdGF0ZS5nbygnYXBwLm5vdGlmaWNhdGlvbnMnKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUuYXBwcm92ZUxldHRlciA9IGZ1bmN0aW9uKGxldHRlcikge1xuICAgIC8vIGFwcHJvdmVzIGxldHRlciwgb3BlbnMgYSBjaGF0IGFuZCByZWZyZXNoIG5vdGlmc1xuICAgIGJhY2tlbmQuYXBwcm92ZUxldHRlcihsZXR0ZXIuaWQsIGZ1bmN0aW9uKHJvb20pIHtcbiAgICAgICRzdGF0ZS5nbygnYXBwLmNoYXQnLCB7Y2hhdElkOiByb29tLmhhc2h9KTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUudmlld0RlYWwgPSBmdW5jdGlvbihkZWFsKSB7XG4gICAgJHN0YXRlLmdvKCdhcHAuZGVhbCcsIHsgZGVhbElkOiBkZWFsLmlkIH0pO1xuICAgICRpb25pY0hpc3RvcnkubmV4dFZpZXdPcHRpb25zKHtcbiAgICAgIGRpc2FibGVCYWNrOiBmYWxzZVxuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5yZXBvcnRVc2VyID0gZnVuY3Rpb24odXNlck5hbWUsIHVzZXJJZCwgY2FsbGJhY2spIHtcbiAgICBSZXBvcnRTZXJ2aWNlLnNob3dSZXBvcnRQb3B1cCh1c2VyTmFtZSwgdXNlcklkLCAkc2NvcGUsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBmdW5jdGlvbiBnZXROb3RpZmljYXRpb24oKSB7XG4gICAgaWYgKCRzdGF0ZVBhcmFtcy5pc0V4aXN0aW5nQ2hhdCkge1xuICAgICAgJHNjb3BlLmlzRXhpc3RpbmdDaGF0ID0gJHN0YXRlUGFyYW1zLmlzRXhpc3RpbmdDaGF0O1xuICAgIH0gZWxzZSB7XG4gICAgICAkc2NvcGUuaXNFeGlzdGluZ0NoYXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBOb3RpZmljYXRpb25zU2VydmljZS5nZXROb3RpZmljYXRpb25zTGlzdCgpLnRoZW4oZnVuY3Rpb24obm90aWZpY2F0aW9ucykge1xuICAgICAgTm90aWZpY2F0aW9uc1NlcnZpY2UuZ2V0Tm90aWZpY2F0aW9uRnJvbUlkKCRzdGF0ZVBhcmFtcy5yZXNwb25zZUlkKS50aGVuKGZ1bmN0aW9uKG5vdGlmaWNhdGlvbikge1xuICAgICAgICAkc2NvcGUucmVzcG9uc2UgPSBub3RpZmljYXRpb247XG4gICAgICAgICRzY29wZS5udW1Db3JyZWN0ID0gbm90aWZpY2F0aW9uLnF1ZXN0aW9uc0Fuc3dlcnMuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmouaXNDb3JyZWN0ID09IHRydWVcbiAgICAgICAgfSkubGVuZ3RoO1xuICAgICAgICBQcm9maWxlU2VydmljZS5nZXRPdGhlclByb2ZpbGUobm90aWZpY2F0aW9uLnVzZXJJZCkudGhlbihmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgICAgJHNjb3BlLnJlc3BvbnNlLm11dHVhbF9mcmllbmRzX2NvdW50ID0gKHR5cGVvZiB1c2VyLm11dHVhbEZyaWVuZHMgPT09ICd1bmRlZmluZWQnKSA/ICd1bmtub3duJyA6IHVzZXIubXV0dWFsRnJpZW5kcy5zdW1tYXJ5LnRvdGFsX2NvdW50O1xuICAgICAgICAgICRzY29wZS5yZXNwb25zZS5saWtlZERlYWxzID0gdXNlci5saWtlZERlYWxzO1xuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgfVxufSk7XG5cbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guY29udHJvbGxlcnMnKVxuXG4uY29udHJvbGxlcignU2V0dGluZ3NDdHJsJywgZnVuY3Rpb24oJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNQb3B1cCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YUluQXBwQnJvd3NlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50YnVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZFUlNJT04pIHtcblxuICAkc2NvcGUubWluQWdlID0gMTg7XG4gICRzY29wZS5tYXhBZ2UgPSA4MDtcbiAgJHNjb3BlLnZlcnNpb25NYWpvciA9IFZFUlNJT04ubWFqb3I7XG4gICRzY29wZS52ZXJzaW9uTWlub3IgPSBWRVJTSU9OLm1pbm9yO1xuICAkc2NvcGUudmVyc2lvblJldmlzaW9uID0gVkVSU0lPTi5yZXZpc2lvbjtcblxuICB2YXIgcGVyZmVjdE1hdGNoID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJmZWN0TWF0Y2gnKTtcbiAgdmFyIHByZWZlcnJlZEdlbmRlciA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2VuZGVyUHJlZmVyZW5jZScpO1xuICB2YXIgZGlzdGFuY2VSYWRpdXMgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Rpc3RhbmNlUmFkaXVzJyk7XG4gIHZhciBtaW5BZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21pbkFnZScpO1xuICB2YXIgbWF4QWdlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtYXhBZ2UnKTtcblxuICAkc2NvcGUucHJlZmVyZW5jZSA9IHtcbiAgICBwZXJmZWN0TWF0Y2g6IChwZXJmZWN0TWF0Y2ggPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZSksXG4gICAgcHJlZmVycmVkR2VuZGVyOiBwcmVmZXJyZWRHZW5kZXIsXG4gICAgZGlzdGFuY2VSYWRpdXM6IChkaXN0YW5jZVJhZGl1cyA9PSBudWxsID8gNTAgOiBkaXN0YW5jZVJhZGl1cyksIC8vaW4ga21cbiAgICBhZ2U6IHtcbiAgICAgIG1pbjogbWluQWdlID09PSBudWxsID8gJHNjb3BlLm1pbkFnZSA6IG1pbkFnZSxcbiAgICAgIG1heDogbWF4QWdlID09PSBudWxsID8gJHNjb3BlLm1heEFnZSA6IG1heEFnZSxcbiAgICB9XG4gIH1cblxuICAkc2NvcGUub25DaGFuZ2VQZXJmZWN0TWF0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BlcmZlY3RNYXRjaCcsICRzY29wZS5wcmVmZXJlbmNlLnBlcmZlY3RNYXRjaCk7XG4gICAgYmFja2VuZC51cGRhdGVQZXJmZWN0TWF0Y2goJHNjb3BlLnByZWZlcmVuY2UucGVyZmVjdE1hdGNoKTtcbiAgfVxuXG4gICRzY29wZS5vbkNoYW5nZVByZWZlcnJlZEdlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIGV2ZW50YnVzLmNhbGwoJ2NoYW5nZUdlbmRlcicpO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2VuZGVyUHJlZmVyZW5jZScsICRzY29wZS5wcmVmZXJlbmNlLnByZWZlcnJlZEdlbmRlcik7XG4gICAgYmFja2VuZC51cGRhdGVHZW5kZXJQcmVmZXJlbmNlKCRzY29wZS5wcmVmZXJlbmNlLnByZWZlcnJlZEdlbmRlcik7XG4gIH1cblxuICAkc2NvcGUub25DaGFuZ2VEaXN0YW5jZVJhZGl1cyA9IGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGlzdGFuY2VSYWRpdXMnLCAkc2NvcGUucHJlZmVyZW5jZS5kaXN0YW5jZVJhZGl1cyk7XG4gIH1cblxuICAkc2NvcGUuJHdhdGNoKCdwcmVmZXJlbmNlLmFnZScsIGZ1bmN0aW9uKCkge1xuICAgIGlmICghaXNOYU4oJHNjb3BlLnByZWZlcmVuY2UuYWdlLm1pbikpIHtcbiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbWluQWdlJywgJHNjb3BlLnByZWZlcmVuY2UuYWdlLm1pbik7XG4gICAgfVxuXG4gICAgaWYgKCFpc05hTigkc2NvcGUucHJlZmVyZW5jZS5hZ2UubWF4KSkge1xuICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtYXhBZ2UnLCAkc2NvcGUucHJlZmVyZW5jZS5hZ2UubWF4KTtcbiAgICB9XG4gIH0sIHRydWUpO1xuXG4gICRzY29wZS5vcGVuVGVybXNPZlVzZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZWYgPSAkY29yZG92YUluQXBwQnJvd3Nlci5vcGVuKCdodHRwOi8vZ2V0bGV0dGVyYm94LmNvbS90ZXJtcycsICdfYmxhbmsnLCB7XG4gICAgICBoYXJkd2FyZWJhY2s6ICd5ZXMnLFxuICAgICAgem9vbTogJ25vJyxcbiAgICAgIGNsb3NlYnV0dG9uY2FwdGlvbjogJ0Nsb3NlJyxcbiAgICAgIHRvb2xiYXJwb3NpdGlvbjogJ2JvdHRvbSdcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUub3BlblByaXZhY3lQb2xpY3kgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVmID0gJGNvcmRvdmFJbkFwcEJyb3dzZXIub3BlbignaHR0cDovL2dldGxldHRlcmJveC5jb20vcHJpdmFjeScsICdfYmxhbmsnLCB7XG4gICAgICBoYXJkd2FyZWJhY2s6ICd5ZXMnLFxuICAgICAgem9vbTogJ25vJyxcbiAgICAgIGNsb3NlYnV0dG9uY2FwdGlvbjogJ0Nsb3NlJyxcbiAgICAgIHRvb2xiYXJwb3NpdGlvbjogJ2JvdHRvbSdcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgJGlvbmljUG9wdXAuY29uZmlybSh7XG4gICAgICB0aXRsZTogXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gbG9nb3V0P1wiLFxuICAgICAgY3NzQ2xhc3M6IFwicG9wdXAtYWxlcnRcIixcbiAgICAgIG9rVHlwZTogXCJidXR0b24tcG9zaXRpdmVcIixcbiAgICAgIG9rVGV4dDogXCJMb2dvdXRcIixcbiAgICAgIGNhbmNlbFRleHQ6IFwiTm9cIlxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZiAocmVzKSB7XG4gICAgICAgIEF1dGhTZXJ2aWNlLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24oKXskc3RhdGUuZ28oJ2xvZ2luJyl9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gICRzY29wZS5mZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZWYgPSAkY29yZG92YUluQXBwQnJvd3Nlci5vcGVuKCdodHRwczovL3d3dy5mYWNlYm9vay5jb20vZ2V0bGV0dGVyYm94JywgJ19ibGFuaycsIHtcbiAgICAgIGhhcmR3YXJlYmFjazogJ3llcycsXG4gICAgICB6b29tOiAnbm8nLFxuICAgICAgY2xvc2VidXR0b25jYXB0aW9uOiAnQ2xvc2UnLFxuICAgICAgdG9vbGJhcnBvc2l0aW9uOiAnYm90dG9tJ1xuICAgIH0pO1xuICB9XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guZGlyZWN0aXZlcycpXG5cbi5kaXJlY3RpdmUoJ2RlYWxDYXJkJywgZnVuY3Rpb24oJGRvY3VtZW50KSB7XG4gIHJldHVybiB7XG4gICAgc2NvcGU6IHtcbiAgICAgIGRhdGE6ICc9c2V0JyxcbiAgICB9LFxuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsIERlYWxTZXJ2aWNlKSB7XG4gICAgICAkc2NvcGUubGVhcm5Nb3JlID0gZnVuY3Rpb24oZGVhbCkge1xuICAgICAgICAkc3RhdGUuZ28oJ2FwcC5kZWFsJywgeyBkZWFsSWQ6IGRlYWwuaWQgfSk7XG4gICAgICB9O1xuICAgIH0sXG4gICAgY29udHJvbGxlckFzOiAnY3RybCcsXG4gICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9kZWFsLWNhcmQuaHRtbCdcbiAgfTtcbn0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LmRpcmVjdGl2ZXMnKVxuXG4uZGlyZWN0aXZlKCdkZWFsTGlrZUJ0bicsIGZ1bmN0aW9uKCRkb2N1bWVudCkge1xuICByZXR1cm4ge1xuICAgIHNjb3BlOiB7XG4gICAgICBkYXRhOiAnPXNldCcsXG4gICAgfSxcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCBEZWFsU2VydmljZSkge1xuICAgICAgJHNjb3BlLnRvZ2dsZUxpa2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLmN0cmwuZGF0YS5pc0xpa2VkID0gISRzY29wZS5jdHJsLmRhdGEuaXNMaWtlZDtcbiAgICAgICAgaWYgKCRzY29wZS5jdHJsLmRhdGEuaXNMaWtlZCkge1xuICAgICAgICAgICRzY29wZS5jdHJsLmRhdGEubGlrZUNvdW50Kys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHNjb3BlLmN0cmwuZGF0YS5saWtlQ291bnQtLTtcbiAgICAgICAgfVxuICAgICAgICBEZWFsU2VydmljZS50b2dnbGVEZWFsTGlrZSgkc2NvcGUuY3RybC5kYXRhLmlkKTtcbiAgICAgIH07XG4gICAgfSxcbiAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2RlYWwtbGlrZS1idXR0b24uaHRtbCdcbiAgfTtcbn0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LmRpcmVjdGl2ZXMnKVxuXG4uZGlyZWN0aXZlKCdmbGlwQ2FyZCcsIGZ1bmN0aW9uKCRkb2N1bWVudCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIpIHtcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgkZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCcuYnV0dG9uLWZsaXAnKSkub24oJ3RvdWNoJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAkZWxlbWVudC50b2dnbGVDbGFzcygnZmxpcHBlZCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LmRpcmVjdGl2ZXMnKVxuXG4uZGlyZWN0aXZlKCdub1Njcm9sbCcsIGZ1bmN0aW9uKCRkb2N1bWVudCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIpIHtcbiAgICAgICRkb2N1bWVudC5vbigndG91Y2htb3ZlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5kaXJlY3RpdmVzJylcblxuLmRpcmVjdGl2ZSgncHJvZmlsZUNhcmQnLCBmdW5jdGlvbigkaW9uaWNIaXN0b3J5KSB7XG4gIHJldHVybiB7XG4gICAgc2NvcGU6IHt9LFxuICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJ1JlcG9ydFNlcnZpY2UnLCAnJHN0YXRlJywgJ0RlYWxTZXJ2aWNlJywgZnVuY3Rpb24oJHNjb3BlLCBSZXBvcnRTZXJ2aWNlLCAkc3RhdGUsIERlYWxTZXJ2aWNlKSB7XG4gICAgICAkc2NvcGUucmVwb3J0VXNlciA9IGZ1bmN0aW9uKHVzZXJOYW1lLCB1c2VySWQsIGNhbGxiYWNrKSB7XG4gICAgICAgIFJlcG9ydFNlcnZpY2Uuc2hvd1JlcG9ydFBvcHVwKHVzZXJOYW1lLCB1c2VySWQsICRzY29wZSwgY2FsbGJhY2spO1xuICAgICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgICAkc2NvcGUudmlld0RlYWwgPSBmdW5jdGlvbihkZWFsKSB7XG4gICAgICAgICRpb25pY0hpc3RvcnkubmV4dFZpZXdPcHRpb25zKHtcbiAgICAgICAgICBkaXNhYmxlQmFjazogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgICRzdGF0ZS5nbygnYXBwLmRlYWwnLCB7IGRlYWxJZDogZGVhbC5pZCB9KTtcbiAgICAgIH0uYmluZCh0aGlzKTtcbiAgICB9XSxcbiAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICBiaW5kVG9Db250cm9sbGVyOiB7XG4gICAgICAnZGF0YSc6ICc9aW5mbycsXG4gICAgICAnY2FsbGJhY2snOiAnJidcbiAgICB9LFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9wcm9maWxlLWNhcmQuaHRtbCdcbiAgfTtcbn0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LmRpcmVjdGl2ZXMnKVxuXG4uZGlyZWN0aXZlKCdwcm9maWxlUGljU21hbGwnLCBmdW5jdGlvbigkZG9jdW1lbnQpIHtcbiAgcmV0dXJuIHtcbiAgICBzY29wZToge1xuICAgICAgZGF0YTogJz1zZXQnLFxuICAgIH0sXG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUsICRpb25pY01vZGFsKSB7XG4gICAgICAkc2NvcGUuc2hvd1Byb2ZpbGVQaWMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCd0ZW1wbGF0ZXMvcHJvZmlsZS1waWMtbW9kYWwuaHRtbCcsIHtcbiAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgJHNjb3BlLm1vZGFsID0gbW9kYWw7XG4gICAgICAgICAgJHNjb3BlLm1vZGFsLnNob3coKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuY2xvc2VNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUubW9kYWwuaGlkZSgpO1xuICAgICAgICAkc2NvcGUubW9kYWwucmVtb3ZlKCk7XG4gICAgICB9O1xuICAgIH0sXG4gICAgY29udHJvbGxlckFzOiAnY3RybCcsXG4gICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9wcm9maWxlLXBpYy1zbWFsbC5odG1sJ1xuICB9O1xufSk7XG5cbiIsIi8qKlxuICogPT09PT09PT09PT09PT09PT09ICBhbmd1bGFyLWlvczktdWl3ZWJ2aWV3LnBhdGNoLmpzIHYxLjEuMSA9PT09PT09PT09PT09PT09PT1cbiAqXG4gKiBUaGlzIHBhdGNoIHdvcmtzIGFyb3VuZCBpT1M5IFVJV2ViVmlldyByZWdyZXNzaW9uIHRoYXQgY2F1c2VzIGluZmluaXRlIGRpZ2VzdFxuICogZXJyb3JzIGluIEFuZ3VsYXIuXG4gKlxuICogVGhlIHBhdGNoIGNhbiBiZSBhcHBsaWVkIHRvIEFuZ3VsYXIgMS4yLjAg4oCTIDEuNC41LiBOZXdlciB2ZXJzaW9ucyBvZiBBbmd1bGFyXG4gKiBoYXZlIHRoZSB3b3JrYXJvdW5kIGJha2VkIGluLlxuICpcbiAqIFRvIGFwcGx5IHRoaXMgcGF0Y2ggbG9hZC9idW5kbGUgdGhpcyBmaWxlIHdpdGggeW91ciBhcHBsaWNhdGlvbiBhbmQgYWRkIGFcbiAqIGRlcGVuZGVuY3kgb24gdGhlIFwibmdJT1M5VUlXZWJWaWV3UGF0Y2hcIiBtb2R1bGUgdG8geW91ciBtYWluIGFwcCBtb2R1bGUuXG4gKlxuICogRm9yIGV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbJ25nUm91dGUnXSlgXG4gKiBgYGBcbiAqXG4gKiBiZWNvbWVzXG4gKlxuICogYGBgXG4gKiBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbJ25nUm91dGUnLCAnbmdJT1M5VUlXZWJWaWV3UGF0Y2gnXSlcbiAqIGBgYFxuICpcbiAqXG4gKiBNb3JlIGluZm86XG4gKiAtIGh0dHBzOi8vb3BlbnJhZGFyLmFwcHNwb3QuY29tLzIyMTg2MTA5XG4gKiAtIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzEyMjQxXG4gKiAtIGh0dHBzOi8vZ2l0aHViLmNvbS9kcmlmdHljby9pb25pYy9pc3N1ZXMvNDA4MlxuICpcbiAqXG4gKiBAbGljZW5zZSBBbmd1bGFySlNcbiAqIChjKSAyMDEwLTIwMTUgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnbmdJT1M5VUlXZWJWaWV3UGF0Y2gnLCBbJ25nJ10pLmNvbmZpZyhbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gICRwcm92aWRlLmRlY29yYXRvcignJGJyb3dzZXInLCBbJyRkZWxlZ2F0ZScsICckd2luZG93JywgZnVuY3Rpb24oJGRlbGVnYXRlLCAkd2luZG93KSB7XG5cbiAgICBpZiAoaXNJT1M5VUlXZWJWaWV3KCR3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgIHJldHVybiBhcHBseUlPUzlTaGltKCRkZWxlZ2F0ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICRkZWxlZ2F0ZTtcblxuICAgIGZ1bmN0aW9uIGlzSU9TOVVJV2ViVmlldyh1c2VyQWdlbnQpIHtcbiAgICAgIHJldHVybiAvKGlQaG9uZXxpUGFkfGlQb2QpLiogT1MgOV9cXGQvLnRlc3QodXNlckFnZW50KSAmJiAhL1ZlcnNpb25cXC85XFwuLy50ZXN0KHVzZXJBZ2VudCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwbHlJT1M5U2hpbShicm93c2VyKSB7XG4gICAgICB2YXIgcGVuZGluZ0xvY2F0aW9uVXJsID0gbnVsbDtcbiAgICAgIHZhciBvcmlnaW5hbFVybEZuPSBicm93c2VyLnVybDtcblxuICAgICAgYnJvd3Nlci51cmwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBwZW5kaW5nTG9jYXRpb25VcmwgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgcmV0dXJuIG9yaWdpbmFsVXJsRm4uYXBwbHkoYnJvd3NlciwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwZW5kaW5nTG9jYXRpb25VcmwgfHwgb3JpZ2luYWxVcmxGbi5hcHBseShicm93c2VyLCBhcmd1bWVudHMpO1xuICAgICAgfTtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgY2xlYXJQZW5kaW5nTG9jYXRpb25VcmwsIGZhbHNlKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgY2xlYXJQZW5kaW5nTG9jYXRpb25VcmwsIGZhbHNlKTtcblxuICAgICAgZnVuY3Rpb24gY2xlYXJQZW5kaW5nTG9jYXRpb25VcmwoKSB7XG4gICAgICAgIHBlbmRpbmdMb2NhdGlvblVybCA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH1cbiAgfV0pO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5zZXJ2aWNlcycpXG5cbi5zZXJ2aWNlKCdMb2NhdGlvblNlcnZpY2UnLCBmdW5jdGlvbigkY29yZG92YUdlb2xvY2F0aW9uLCBiYWNrZW5kKSB7XG5cbiAgdmFyIExvY2F0aW9uU2VydmljZSA9IHt9O1xuXG4gIGZ1bmN0aW9uIGxvY2F0aW9uT2J0YWluZWRDYWxsYmFjayhwb3NpdGlvbikge1xuICAgIHVwZGF0ZUJhY2tlbmRMb2NhdGlvbihwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsIHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29yZG92YUxvY2F0aW9uKCkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgdGltZW91dDogMTAwMDAsXG4gICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IGZhbHNlXG4gICAgfTtcbiAgICAkY29yZG92YUdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihvcHRpb25zKS50aGVuKGxvY2F0aW9uT2J0YWluZWRDYWxsYmFjayk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRIdG1sNUxvY2F0aW9uKCkge1xuICAgIGlmIChuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24obG9jYXRpb25PYnRhaW5lZENhbGxiYWNrKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVCYWNrZW5kTG9jYXRpb24obGF0aXR1ZGUsIGxvbmdpdHVkZSkge1xuICAgIGJhY2tlbmQudXBkYXRlVXNlckxvY2F0aW9uKGxhdGl0dWRlLCBsb25naXR1ZGUpO1xuICB9XG5cbiAgTG9jYXRpb25TZXJ2aWNlLnVwZGF0ZUxvY2F0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHdpbmRvdy5jb3Jkb3ZhKSB7XG4gICAgICBnZXRDb3Jkb3ZhTG9jYXRpb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2V0SHRtbDVMb2NhdGlvbigpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gTG9jYXRpb25TZXJ2aWNlO1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LnNlcnZpY2VzJylcblxuLnNlcnZpY2UoJ0F1dGhTZXJ2aWNlJywgZnVuY3Rpb24oJHEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNIaXN0b3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFGYWNlYm9vayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudGJ1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERiU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldCkge1xuXG4gIHZhciBBdXRoU2VydmljZSA9IHt9O1xuXG4gIGZ1bmN0aW9uIHNhdmVEZXRhaWxzKHJlcykge1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXMubGV0dGVyYm94X3Rva2VuKTtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2ZpcnN0TmFtZScsIHJlcy51c2VyLmZpcnN0TmFtZSk7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdoYXNoZWRJZCcsIHJlcy51c2VyLmhhc2hlZElkKTtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lzUmVnaXN0ZXJlZCcsIHJlcy51c2VyLmlzUmVnaXN0ZXJlZCk7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnZW5kZXJQcmVmZXJlbmNlJywgcmVzLnVzZXIuZ2VuZGVyUHJlZmVyZW5jZSk7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwZXJmZWN0TWF0Y2gnLCByZXMudXNlci5wZXJmZWN0TWF0Y2gpO1xuICB9XG5cbiAgQXV0aFNlcnZpY2UuYXV0aFRva2VuID0gZnVuY3Rpb24oZmJUb2tlbikge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICBiYWNrZW5kLmF1dGgoZmJUb2tlbikuJHByb21pc2VcbiAgICAudGhlbihmdW5jdGlvbihzdWNjZXNzKSB7XG4gICAgICBzYXZlRGV0YWlscyhzdWNjZXNzKTtcbiAgICAgIGJhY2tlbmQudXBkYXRlVmVyc2lvbigpO1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIEF1dGhTZXJ2aWNlLnJlbmV3VG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgYmFja2VuZC5yZW5ld1Rva2VuKCkuJHByb21pc2VcbiAgICAudGhlbihmdW5jdGlvbihzdWNjZXNzKSB7XG4gICAgICBzYXZlRGV0YWlscyhzdWNjZXNzKTtcbiAgICAgIGJhY2tlbmQudXBkYXRlVmVyc2lvbigpO1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgQXV0aFNlcnZpY2UubG9nb3V0KCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIEF1dGhTZXJ2aWNlLmlzTG9nZ2VkSW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpICE9PSBudWxsICYmIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKS5sZW5ndGggPiAwO1xuICB9O1xuXG4gIEF1dGhTZXJ2aWNlLmlzUmVnaXN0ZXJlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBBdXRoU2VydmljZS5pc0xvZ2dlZEluKCkgJiYgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpc1JlZ2lzdGVyZWQnKSA9PT0gJ3RydWUnO1xuICB9O1xuXG4gIEF1dGhTZXJ2aWNlLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICBiYWNrZW5kLmNsZWFyUHVzaFRva2VuKClcbiAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICRpb25pY0hpc3RvcnkuY2xlYXJDYWNoZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCAnJyk7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmlyc3ROYW1lJywgJycpO1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2hhc2hlZElkJywgJycpO1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lzUmVnaXN0ZXJlZCcsICcnKTtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnZW5kZXJQcmVmZXJlbmNlJywgJycpO1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BlcmZlY3RNYXRjaCcsICcnKTtcblxuICAgICAgICBpZiAod2luZG93LmNvcmRvdmEpIHtcbiAgICAgICAgICAkY29yZG92YUZhY2Vib29rLmxvZ291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgc29ja2V0LnVuaW5pdCgpO1xuXG4gICAgICAgIGlmIChEYlNlcnZpY2UuaXNJbml0aWFsaXplZCgpKSB7XG4gICAgICAgICAgRGJTZXJ2aWNlLmNsZWFyQWxsKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICByZXR1cm4gQXV0aFNlcnZpY2U7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guc2VydmljZXMnKVxuXG4uc2VydmljZSgnYmFja2VuZCcsIGZ1bmN0aW9uKCRxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICRodHRwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWRVJTSU9OKSB7XG5cbiAgdmFyIGJhY2tlbmQgPSB7fTtcbiAgdmFyIFVSTCA9ICdodHRwOi8vZWMyLTUyLTc0LTEzOC0xNzcuYXAtc291dGhlYXN0LTEuY29tcHV0ZS5hbWF6b25hd3MuY29tJztcbiAgLy8gdmFyIFVSTCA9ICdodHRwOi8vbG9jYWxob3N0OjgwODAnO1xuXG4gIHZhciBhdXRoUGF0aCA9ICcvYXV0aCc7XG4gIHZhciByZW5ld1BhdGggPSAnL2F1dGgvcmVuZXcnXG4gIHZhciB1c2VyU2VsZlBhdGggPSAnL3VzZXIvc2VsZic7XG4gIHZhciBvdGhlclVzZXJQYXRoID0gJy91c2VyL2lkLzp1c2VySWQnO1xuICB2YXIgcHVzaFRva2VuUGF0aCA9ICcvdXNlci9wdXNodG9rZW4nO1xuICB2YXIgcGVyZmVjdE1hdGNoUGF0aCA9ICcvdXNlci9wZXJmZWN0bWF0Y2gnO1xuICB2YXIgdXBkYXRlTG9jYXRpb25QYXRoID0gJy91c2VyL2xvY2F0aW9uJztcbiAgdmFyIHVwZGF0ZUJpb1BhdGggPSAnL3VzZXIvYmlvJztcbiAgdmFyIHVzZXJQaG90b1BhdGggPSAnL3VzZXIvcGhvdG8nO1xuICB2YXIgdXBkYXRlR2VuZGVyUHJlZmVyZW5jZVBhdGggPSAnL3VzZXIvZ2VuZGVyUHJlZmVyZW5jZSc7XG4gIHZhciBtYXRjaFBhdGggPSAnL21hdGNoJztcbiAgdmFyIG1hdGNoZXNQYXRoID0gJy9tYXRjaGVzJztcbiAgdmFyIHF1ZXN0aW9uc1BhdGggPSAnL3F1ZXN0aW9ucyc7XG4gIHZhciBvbmVRdWVzdGlvblBhdGggPSAnL3F1ZXN0aW9uJztcbiAgdmFyIG1lc3NhZ2VzUGF0aCA9ICcvbWVzc2FnZXMnO1xuICB2YXIgcm9vbXNQYXRoID0gJy9yb29tcyc7XG4gIHZhciBvbmVSb29tUGF0aCA9ICcvcm9vbS86cm9vbUlkJztcbiAgdmFyIHJvb21NZXNzYWdlUGF0aCA9ICcvcm9vbXMvOnJvb21JZCc7XG4gIHZhciBsZXR0ZXJzUGF0aCA9ICcvbGV0dGVycyc7XG4gIHZhciBzaW5nbGVMZXR0ZXJQYXRoID0gJy9sZXR0ZXJzLzpsZXR0ZXJJZCc7XG4gIHZhciByZXBvcnRQYXRoID0gJy9yZXBvcnQnO1xuICB2YXIgZ2V0VXNlclZlcnNpb25QYXRoID0gJy91c2VyL2lkLzpoYXNoZWRJZC92ZXJzaW9uJztcbiAgdmFyIHNldFZlcnNpb25QYXRoID0gJy91c2VyL3ZlcnNpb24nO1xuXG4gIHZhciBmZWF0dXJlZERlYWxzUGF0aCA9ICcvZGVhbC9mZWF0dXJlZCc7XG4gIHZhciBkZWFsQ2F0ZWdvcmllc1BhdGggPSAnL2RlYWwvY2F0JztcbiAgdmFyIGRlYWxzQnlDYXRQYXRoID0gJy9kZWFsL2NhdC86ZGVhbENhdCc7XG4gIHZhciBkZWFsQnlJZFBhdGggPSAnL2RlYWwvaWQvOmRlYWxJZCc7XG4gIHZhciB1c2VyTGlrZWREZWFsc1BhdGggPSAnL2RlYWwvdXNlci86b3RoZXJVc2VySWQnO1xuICB2YXIgbXV0dWFsTGlrZWREZWFsc1BhdGggPSAnL2RlYWwvbXV0dWFsLzpvdGhlclVzZXJJZCc7XG5cbiAgZnVuY3Rpb24gZ2V0VG9rZW4oKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcbiAgfVxuXG4gIHZhciBhdXRoID0gJHJlc291cmNlKFVSTC5jb25jYXQoYXV0aFBhdGgpLCB7fSwge1xuICAgIGdldDoge1xuICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIHJlbmV3VG9rZW4gPSAkcmVzb3VyY2UoVVJMLmNvbmNhdChyZW5ld1BhdGgpLCB7fSwge1xuICAgIGdldDoge1xuICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIG1hdGNoR2V0dGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQobWF0Y2hQYXRoKSwge30sIHtcbiAgICBnZXQ6IHtcbiAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBtYXRjaGVzR2V0dGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQobWF0Y2hlc1BhdGgpLCB7fSwge1xuICAgIGdldDoge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGlzQXJyYXk6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIHZhciB1c2VyUGhvdG9IYW5kbGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQodXNlclBob3RvUGF0aCksIHt9LCB7XG4gICAgZ2V0OiB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaXNBcnJheTogdHJ1ZVxuICAgIH0sXG4gICAgc2V0UGhvdG86IHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgbGV0dGVyYm94X3Rva2VuOiAnQHRva2VuJ1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgdmFyIHVzZXJTZWxmR2V0dGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQodXNlclNlbGZQYXRoKSwge30sIHtcbiAgICBnZXQ6IHtcbiAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBwdXNoVG9rZW5VcGRhdGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQocHVzaFRva2VuUGF0aCksIHt9LCB7XG4gICAgdXBkYXRlUHVzaFRva2VuOiB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGxldHRlcmJveF90b2tlbjogJ0B0b2tlbidcbiAgICAgIH1cbiAgICB9LFxuICAgIGNsZWFyUHVzaFRva2VuOiB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGxldHRlcmJveF90b2tlbjogJ0B0b2tlbidcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhciBwZXJmZWN0TWF0Y2hVcGRhdGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQocGVyZmVjdE1hdGNoUGF0aCksIHt9LCB7XG4gICAgdXBkYXRlUGVyZmVjdE1hdGNoOiB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGxldHRlcmJveF90b2tlbjogJ0B0b2tlbidcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhciB1cGRhdGVVc2VyTG9jYXRpb24gPSAkcmVzb3VyY2UoVVJMLmNvbmNhdCh1cGRhdGVMb2NhdGlvblBhdGgpLCB7fSwge1xuICAgIHVwZGF0ZUxvY2F0aW9uOiB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGxldHRlcmJveF90b2tlbjogJ0B0b2tlbidcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhciB1cGRhdGVVc2VyQmlvID0gJHJlc291cmNlKFVSTC5jb25jYXQodXBkYXRlQmlvUGF0aCksIHt9LCB7XG4gICAgdXBkYXRlQmlvOiB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGxldHRlcmJveF90b2tlbjogJ0B0b2tlbidcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhciB1cGRhdGVHZW5kZXJQcmVmZXJlbmNlID0gJHJlc291cmNlKFVSTC5jb25jYXQodXBkYXRlR2VuZGVyUHJlZmVyZW5jZVBhdGgpLCB7fSwge1xuICAgIHVwZGF0ZUdlbmRlclByZWZlcmVuY2U6IHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgbGV0dGVyYm94X3Rva2VuOiAnQHRva2VuJ1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgdmFyIHF1ZXN0aW9uc0hhbmRsZXIgPSAkcmVzb3VyY2UoVVJMLmNvbmNhdChxdWVzdGlvbnNQYXRoKSwge30sIHtcbiAgICBnZXQ6IHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBpc0FycmF5OiB0cnVlXG4gICAgfSxcbiAgICB1cGRhdGVRdWVzdGlvbnM6IHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgbGV0dGVyYm94X3Rva2VuOiAnQHRva2VuJ1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgdmFyIHNpbmdsZVF1ZXN0aW9uR2V0dGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQob25lUXVlc3Rpb25QYXRoKSwge30sIHtcbiAgICBnZXQ6IHtcbiAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBtZXNzYWdlc0dldHRlciA9ICRyZXNvdXJjZShVUkwuY29uY2F0KG1lc3NhZ2VzUGF0aCksIHt9LCB7XG4gICAgZ2V0OiB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaXNBcnJheTogdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbiAgdmFyIHJvb21zR2V0dGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQocm9vbXNQYXRoKSwge30sIHtcbiAgICBnZXQ6IHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBpc0FycmF5OiB0cnVlXG4gICAgfVxuICB9KTtcblxuICB2YXIgc2luZ2xlUm9vbUdldHRlciA9ICRyZXNvdXJjZShVUkwuY29uY2F0KG9uZVJvb21QYXRoKSwge3Jvb21JZDogJ0Byb29tSWQnfSwge1xuICAgIGdldDoge1xuICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIHJvb21NZXNzYWdlR2V0dGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQocm9vbU1lc3NhZ2VQYXRoKSwge3Jvb21JZDogJ0Byb29tSWQnfSwge1xuICAgIGdldDoge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGlzQXJyYXk6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBvdGhlclVzZXJHZXR0ZXIgPSAkcmVzb3VyY2UoVVJMLmNvbmNhdChvdGhlclVzZXJQYXRoKSwge30sIHtcbiAgICBnZXQ6IHtcbiAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBsZXR0ZXJzSGFuZGxlciA9ICRyZXNvdXJjZShVUkwuY29uY2F0KGxldHRlcnNQYXRoKSwge30sIHtcbiAgICBnZXQ6IHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBpc0FycmF5OiB0cnVlXG4gICAgfSxcbiAgICBjcmVhdGVMZXR0ZXI6IHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGxldHRlcmJveF90b2tlbjogJ0B0b2tlbidcbiAgICAgIH1cbiAgICB9LFxuICB9KTtcblxuICB2YXIgc2luZ2xlTGV0dGVySGFuZGxlciA9ICRyZXNvdXJjZShVUkwuY29uY2F0KHNpbmdsZUxldHRlclBhdGgpLCB7bGV0dGVySWQ6ICdAbGV0dGVySWQnfSwge1xuICAgIGFwcHJvdmVMZXR0ZXI6IHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGxldHRlcmJveF90b2tlbjogJ0B0b2tlbidcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlYWRMZXR0ZXI6IHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgbGV0dGVyYm94X3Rva2VuOiAnQHRva2VuJ1xuICAgICAgfVxuICAgIH0sXG4gICAgcmVqZWN0TGV0dGVyOiB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGxldHRlcmJveF90b2tlbjogJ0B0b2tlbidcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhciByZXBvcnRIYW5kbGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQocmVwb3J0UGF0aCksIHt9LCB7XG4gICAgcmVwb3J0VXNlcjoge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgbGV0dGVyYm94X3Rva2VuOiAnQHRva2VuJ1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgdmFyIGZlYXR1cmVkRGVhbHNIYW5kbGVyID0gJHJlc291cmNlKFVSTC5jb25jYXQoZmVhdHVyZWREZWFsc1BhdGgpLCB7fSwge1xuICAgIGdldDoge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGlzQXJyYXk6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBkZWFsQ2F0ZWdvcmllc0hhbmRsZXIgPSAkcmVzb3VyY2UoVVJMLmNvbmNhdChkZWFsQ2F0ZWdvcmllc1BhdGgpLCB7fSwge1xuICAgIGdldDoge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGlzQXJyYXk6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBkZWFsc0J5Q2F0SGFuZGxlciA9ICRyZXNvdXJjZShVUkwuY29uY2F0KGRlYWxzQnlDYXRQYXRoKSwge2RlYWxDYXQ6ICdAZGVhbENhdCd9LCB7XG4gICAgZ2V0OiB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaXNBcnJheTogdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbiAgdmFyIGRlYWxCeUlkSGFuZGxlciA9ICRyZXNvdXJjZShVUkwuY29uY2F0KGRlYWxCeUlkUGF0aCksIHtkZWFsSWQ6ICdAZGVhbElkJ30sIHtcbiAgICBnZXQ6IHtcbiAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICB9LFxuICAgIGxpa2VEZWFsOiB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGxldHRlcmJveF90b2tlbjogJ0B0b2tlbidcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhciB1c2VyTGlrZWREZWFsc0hhbmRsZXIgPSAkcmVzb3VyY2UoVVJMLmNvbmNhdCh1c2VyTGlrZWREZWFsc1BhdGgpLCB7b3RoZXJVc2VySWQ6ICdAb3RoZXJVc2VySWQnfSwge1xuICAgIGdldDoge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGlzQXJyYXk6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBtdXR1YWxMaWtlZERlYWxzSGFuZGxlciA9ICRyZXNvdXJjZShVUkwuY29uY2F0KG11dHVhbExpa2VkRGVhbHNQYXRoKSwge30sIHtcbiAgICBnZXQ6IHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBpc0FycmF5OiB0cnVlXG4gICAgfVxuICB9KTtcblxuICB2YXIgb3RoZXJVc2VyVmVyc2lvbkhhbmRsZXIgPSAkcmVzb3VyY2UoVVJMLmNvbmNhdChnZXRVc2VyVmVyc2lvblBhdGgpLCB7aGFzaGVkSWQ6ICdAaGFzaGVkSWQnfSwge1xuICAgIGdldDoge1xuICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIG93blVzZXJWZXJzaW9uSGFuZGxlciA9ICRyZXNvdXJjZShVUkwuY29uY2F0KHNldFZlcnNpb25QYXRoKSwge30sIHtcbiAgICB1cGRhdGU6IHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgbGV0dGVyYm94X3Rva2VuOiAnQHRva2VuJ1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgYmFja2VuZC5hdXRoID0gZnVuY3Rpb24oZmJUb2tlbikge1xuICAgIHJldHVybiBhdXRoLmdldCh7ZmJfdG9rZW46IGZiVG9rZW59KTtcbiAgfTtcblxuICBiYWNrZW5kLnJlbmV3VG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdG9rZW4gPSBnZXRUb2tlbigpO1xuICAgIHJldHVybiByZW5ld1Rva2VuLmdldCh7bGV0dGVyYm94X3Rva2VuOiB0b2tlbn0pO1xuICB9O1xuXG4gIGJhY2tlbmQuZ2V0TWF0Y2ggPSBmdW5jdGlvbihtYXhEaXN0YW5jZSwgcHJldmlvdXNJZCwgbWluQWdlLCBtYXhBZ2UpIHtcbiAgICB2YXIgdG9rZW4gPSBnZXRUb2tlbigpO1xuICAgIHJldHVybiBtYXRjaEdldHRlci5nZXQoe2xldHRlcmJveF90b2tlbjogdG9rZW4sIG1heERpc3RhbmNlOiBtYXhEaXN0YW5jZSwgcHJldmlvdXNJZDogcHJldmlvdXNJZCwgbWluQWdlOiBtaW5BZ2UsIG1heEFnZTogbWF4QWdlfSk7XG4gIH07XG5cbiAgLy8gbGltaXQgaXMgdGhlIG1heCBudW1iZXIgb2YgbWF0Y2hlcyB0byByZXR1cm5cbiAgYmFja2VuZC5nZXRNYXRjaGVzID0gZnVuY3Rpb24obWF4RGlzdGFuY2UsIGxpbWl0LCBwcmV2aW91c0lkKSB7XG4gICAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICByZXR1cm4gbWF0Y2hlc0dldHRlci5nZXQoe2xldHRlcmJveF90b2tlbjogdG9rZW4sIG1heERpc3RhbmNlOiBtYXhEaXN0YW5jZSwgbGltaXQ6IGxpbWl0LCBwcmV2aW91c0lkOiBwcmV2aW91c0lkfSk7XG4gIH07XG5cbiAgYmFja2VuZC5nZXRVc2VyU2VsZiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgcmV0dXJuIHVzZXJTZWxmR2V0dGVyLmdldCh7bGV0dGVyYm94X3Rva2VuOiB0b2tlbn0pO1xuICB9O1xuXG4gIGJhY2tlbmQudXBkYXRlUHVzaFRva2VuID0gZnVuY3Rpb24ocHVzaHRva2VuKSB7XG4gICAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICB1cGRhdGVyID0gbmV3IHB1c2hUb2tlblVwZGF0ZXIoKTtcbiAgICB1cGRhdGVyLnRva2VuID0gdG9rZW47XG4gICAgdXBkYXRlci5wdXNoVG9rZW4gPSBwdXNodG9rZW47XG4gICAgcmV0dXJuIHVwZGF0ZXIuJHVwZGF0ZVB1c2hUb2tlbigpO1xuICB9O1xuXG4gIGJhY2tlbmQuY2xlYXJQdXNoVG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgdXBkYXRlciA9IG5ldyBwdXNoVG9rZW5VcGRhdGVyKCk7XG4gICAgdXBkYXRlci50b2tlbiA9IHRva2VuO1xuICAgIHVwZGF0ZXIuJGNsZWFyUHVzaFRva2VuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgYmFja2VuZC51cGRhdGVQZXJmZWN0TWF0Y2ggPSBmdW5jdGlvbihwZXJmZWN0TWF0Y2gpIHtcbiAgICB2YXIgdG9rZW4gPSBnZXRUb2tlbigpO1xuICAgIHVwZGF0ZXIgPSBuZXcgcGVyZmVjdE1hdGNoVXBkYXRlcigpO1xuICAgIHVwZGF0ZXIudG9rZW4gPSB0b2tlbjtcbiAgICB1cGRhdGVyLnBlcmZlY3RNYXRjaCA9IHBlcmZlY3RNYXRjaDtcbiAgICByZXR1cm4gdXBkYXRlci4kdXBkYXRlUGVyZmVjdE1hdGNoKCk7XG4gIH07XG5cbiAgYmFja2VuZC51cGRhdGVVc2VyTG9jYXRpb24gPSBmdW5jdGlvbihsYXRpdHVkZSwgbG9uZ2l0dWRlLCBzdWNjZXNzUHJvbWlzZSkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgbG9jYXRpb25VcGRhdGVyID0gbmV3IHVwZGF0ZVVzZXJMb2NhdGlvbigpO1xuICAgIGxvY2F0aW9uVXBkYXRlci50b2tlbiA9IHRva2VuO1xuICAgIGxvY2F0aW9uVXBkYXRlci5sYXRpdHVkZSA9IGxhdGl0dWRlO1xuICAgIGxvY2F0aW9uVXBkYXRlci5sb25naXR1ZGUgPSBsb25naXR1ZGU7XG4gICAgcmV0dXJuIGxvY2F0aW9uVXBkYXRlci4kdXBkYXRlTG9jYXRpb24oc3VjY2Vzc1Byb21pc2UpO1xuICB9O1xuXG4gIGJhY2tlbmQuZ2V0UHJvZmlsZVBob3RvcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgcmV0dXJuIHVzZXJQaG90b0hhbmRsZXIuZ2V0KHtsZXR0ZXJib3hfdG9rZW46IHRva2VufSk7XG4gIH1cblxuICBiYWNrZW5kLnNldFByb2ZpbGVQaG90byA9IGZ1bmN0aW9uKHBpY3R1cmVJZCwgc3VjY2Vzc1Byb21pc2UsIGVycm9yUHJvbWlzZSkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgaGFuZGxlciA9IG5ldyB1c2VyUGhvdG9IYW5kbGVyKCk7XG4gICAgaGFuZGxlci50b2tlbiA9IHRva2VuO1xuICAgIGhhbmRsZXIuaWQgPSBwaWN0dXJlSWQ7XG4gICAgcmV0dXJuIGhhbmRsZXIuJHNldFBob3RvKHN1Y2Nlc3NQcm9taXNlLCBlcnJvclByb21pc2UpO1xuICB9O1xuXG4gIGJhY2tlbmQudXBkYXRlVXNlckJpbyA9IGZ1bmN0aW9uKGJpbywgc3VjY2Vzc1Byb21pc2UsIGVycm9yUHJvbWlzZSkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgdmFyIGJpb1VwZGF0ZXIgPSBuZXcgdXBkYXRlVXNlckJpbygpO1xuICAgIGJpb1VwZGF0ZXIudG9rZW4gPSB0b2tlbjtcbiAgICBiaW9VcGRhdGVyLmJpbyA9IGJpbztcbiAgICByZXR1cm4gYmlvVXBkYXRlci4kdXBkYXRlQmlvKHN1Y2Nlc3NQcm9taXNlLCBlcnJvclByb21pc2UpO1xuICB9O1xuXG4gIC8vIEdlbmRlclByZWZlcmVuY2U6ICdtYWxlJyBvciAnZmVtYWxlJ1xuICBiYWNrZW5kLnVwZGF0ZUdlbmRlclByZWZlcmVuY2UgPSBmdW5jdGlvbihnZW5kZXJQcmVmZXJlbmNlLCBzdWNjZXNzUHJvbWlzZSkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgZ2VuZGVyUHJlZmVyZW5jZVVwZGF0ZXIgPSBuZXcgdXBkYXRlR2VuZGVyUHJlZmVyZW5jZSgpO1xuICAgIGdlbmRlclByZWZlcmVuY2VVcGRhdGVyLnRva2VuID0gdG9rZW47XG4gICAgZ2VuZGVyUHJlZmVyZW5jZVVwZGF0ZXIuZ2VuZGVyUHJlZmVyZW5jZSA9IGdlbmRlclByZWZlcmVuY2U7XG4gICAgcmV0dXJuIGdlbmRlclByZWZlcmVuY2VVcGRhdGVyLiR1cGRhdGVHZW5kZXJQcmVmZXJlbmNlKHN1Y2Nlc3NQcm9taXNlKTtcbiAgfTtcblxuICBiYWNrZW5kLmdldFJhbmRvbVF1ZXN0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgcmV0dXJuIHF1ZXN0aW9uc0hhbmRsZXIuZ2V0KHtsZXR0ZXJib3hfdG9rZW46IHRva2VufSk7XG4gIH07XG5cbiAgYmFja2VuZC5nZXRPbmVSYW5kb21RdWVzdGlvbiA9IGZ1bmN0aW9uKGN1cnJlbnRJZHMpIHtcbiAgICB2YXIgdG9rZW4gPSBnZXRUb2tlbigpO1xuICAgIHJldHVybiBzaW5nbGVRdWVzdGlvbkdldHRlci5nZXQoe2xldHRlcmJveF90b2tlbjogdG9rZW4sIGN1cnJlbnRRdWVzdGlvbklkczogY3VycmVudElkc30pO1xuICB9O1xuXG4gIGJhY2tlbmQuc2V0UXVlc3Rpb25zQW5kQW5zd2VycyA9IGZ1bmN0aW9uKHF1ZXN0aW9ucywgc3VjY2Vzc1Byb21pc2UsIGVycm9yUHJvbWlzZSkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgdmFyIGhhbmRsZXIgPSBuZXcgcXVlc3Rpb25zSGFuZGxlcigpO1xuICAgIGhhbmRsZXIudG9rZW4gPSB0b2tlbjtcbiAgICBoYW5kbGVyLnF1ZXN0aW9ucyA9IHF1ZXN0aW9ucztcbiAgICByZXR1cm4gaGFuZGxlci4kdXBkYXRlUXVlc3Rpb25zKHN1Y2Nlc3NQcm9taXNlLCBlcnJvclByb21pc2UpO1xuICB9O1xuXG4gIGJhY2tlbmQuZ2V0TWVzc2FnZXMgPSBmdW5jdGlvbihzaW5jZSkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgcmV0dXJuIG1lc3NhZ2VzR2V0dGVyLmdldCh7bGV0dGVyYm94X3Rva2VuOiB0b2tlbiwgc2luY2U6IHNpbmNlfSk7XG4gIH07XG5cbiAgYmFja2VuZC5nZXRSb29tcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgcmV0dXJuIHJvb21zR2V0dGVyLmdldCh7bGV0dGVyYm94X3Rva2VuOiB0b2tlbn0pO1xuICB9O1xuXG4gIGJhY2tlbmQuZ2V0U2luZ2xlUm9vbSA9IGZ1bmN0aW9uKHJvb21IYXNoKSB7XG4gICAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICByZXR1cm4gc2luZ2xlUm9vbUdldHRlci5nZXQoe2xldHRlcmJveF90b2tlbjogdG9rZW4sIHJvb21JZDogcm9vbUhhc2h9KVxuICB9O1xuXG4gIGJhY2tlbmQuZ2V0Um9vbU1lc3NhZ2VzID0gZnVuY3Rpb24ocm9vbUhhc2gsIHNpbmNlKSB7XG4gICAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICByZXR1cm4gcm9vbU1lc3NhZ2VHZXR0ZXIuZ2V0KHtsZXR0ZXJib3hfdG9rZW46IHRva2VuLCByb29tSWQ6IHJvb21IYXNoLCBzaW5jZTogc2luY2V9KTtcbiAgfTtcblxuICBiYWNrZW5kLmdldE90aGVyVXNlciA9IGZ1bmN0aW9uKHVzZXJJZCkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgcmV0dXJuIG90aGVyVXNlckdldHRlci5nZXQoe3VzZXJJZDogdXNlcklkLCBsZXR0ZXJib3hfdG9rZW46IHRva2VufSk7XG4gIH07XG5cbiAgYmFja2VuZC5nZXRBbGxMZXR0ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICByZXR1cm4gbGV0dGVyc0hhbmRsZXIuZ2V0KHtsZXR0ZXJib3hfdG9rZW46IHRva2VufSk7XG4gIH07XG5cbiAgYmFja2VuZC5zZW5kQUxldHRlciA9IGZ1bmN0aW9uKHJlY2lwaWVudCwgcXVlc3Rpb25zV2l0aEFuc3dlcnMsIHN1Y2Nlc3NQcm9taXNlLCBlcnJvclByb21pc2UpIHtcbiAgICB2YXIgdG9rZW4gPSBnZXRUb2tlbigpO1xuICAgIGhhbmRsZXIgPSBuZXcgbGV0dGVyc0hhbmRsZXIoKTtcbiAgICBoYW5kbGVyLnRva2VuID0gdG9rZW47XG4gICAgaGFuZGxlci5yZWNpcGllbnQgPSByZWNpcGllbnQ7XG4gICAgaGFuZGxlci5xdWVzdGlvbnMgPSBxdWVzdGlvbnNXaXRoQW5zd2VycztcbiAgICByZXR1cm4gaGFuZGxlci4kY3JlYXRlTGV0dGVyKHN1Y2Nlc3NQcm9taXNlLCBlcnJvclByb21pc2UpO1xuICB9O1xuXG4gIGJhY2tlbmQubWFya0xldHRlckFzUmVhZCA9IGZ1bmN0aW9uKGxldHRlckhhc2gsIHN1Y2Nlc3NQcm9taXNlLCBlcnJvclByb21pc2UpIHtcbiAgICB2YXIgdG9rZW4gPSBnZXRUb2tlbigpO1xuICAgIGhhbmRsZXIgPSBuZXcgc2luZ2xlTGV0dGVySGFuZGxlcigpO1xuICAgIGhhbmRsZXIudG9rZW4gPSB0b2tlbjtcbiAgICBoYW5kbGVyLmxldHRlcklkID0gbGV0dGVySGFzaDtcbiAgICByZXR1cm4gaGFuZGxlci4kcmVhZExldHRlcihzdWNjZXNzUHJvbWlzZSwgZXJyb3JQcm9taXNlKTtcbiAgfTtcblxuICBiYWNrZW5kLmFwcHJvdmVMZXR0ZXIgPSBmdW5jdGlvbihsZXR0ZXJIYXNoLCBzdWNjZXNzUHJvbWlzZSwgZXJyb3JQcm9taXNlKSB7XG4gICAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICBoYW5kbGVyID0gbmV3IHNpbmdsZUxldHRlckhhbmRsZXIoKTtcbiAgICBoYW5kbGVyLnRva2VuID0gdG9rZW47XG4gICAgaGFuZGxlci5sZXR0ZXJJZCA9IGxldHRlckhhc2g7XG4gICAgcmV0dXJuIGhhbmRsZXIuJGFwcHJvdmVMZXR0ZXIoc3VjY2Vzc1Byb21pc2UsIGVycm9yUHJvbWlzZSk7XG4gIH07XG5cbiAgYmFja2VuZC5yZWplY3RMZXR0ZXIgPSBmdW5jdGlvbihsZXR0ZXJIYXNoLCBzdWNjZXNzUHJvbWlzZSwgZXJyb3JQcm9taXNlKSB7XG4gICAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICBoYW5kbGVyID0gbmV3IHNpbmdsZUxldHRlckhhbmRsZXIoKTtcbiAgICBoYW5kbGVyLnRva2VuID0gdG9rZW47XG4gICAgaGFuZGxlci5sZXR0ZXJJZCA9IGxldHRlckhhc2g7XG4gICAgcmV0dXJuIGhhbmRsZXIuJHJlamVjdExldHRlcihzdWNjZXNzUHJvbWlzZSwgZXJyb3JQcm9taXNlKTtcbiAgfTtcblxuICBiYWNrZW5kLnJlcG9ydFVzZXIgPSBmdW5jdGlvbih1c2VySWQsIHJlYXNvbiwgc3VjY2Vzc1Byb21pc2UsIGVycm9yUHJvbWlzZSkge1xuICAgIHZhciB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgaGFuZGxlciA9IG5ldyByZXBvcnRIYW5kbGVyKCk7XG4gICAgaGFuZGxlci50b2tlbiA9IHRva2VuO1xuICAgIGhhbmRsZXIudXNlcklkID0gdXNlcklkO1xuICAgIGhhbmRsZXIucmVhc29uID0gcmVhc29uO1xuICAgIHJldHVybiBoYW5kbGVyLiRyZXBvcnRVc2VyKHN1Y2Nlc3NQcm9taXNlLCBlcnJvclByb21pc2UpO1xuICB9O1xuXG4gIGJhY2tlbmQuZ2V0RmVhdHVyZWREZWFscyA9IGZ1bmN0aW9uKG9mZnNldCwgbGltaXQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGZlYXR1cmVkRGVhbHNIYW5kbGVyLmdldCh7bGV0dGVyYm94X3Rva2VuOiBnZXRUb2tlbigpLCBvZmZzZXQ6IG9mZnNldCwgbGltaXQ6IGxpbWl0fSkuJHByb21pc2UudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgIHZhciBkZWFscyA9IFtdO1xuICAgICAgcmVzLmZvckVhY2goZnVuY3Rpb24oZGVhbCkge1xuICAgICAgICBkZWFscy5wdXNoKGRlYWwpO1xuICAgICAgfSk7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKGRlYWxzKTtcbiAgICB9LCBkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIGJhY2tlbmQuZ2V0RGVhbENhdGVnb3JpZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGRlYWxDYXRlZ29yaWVzSGFuZGxlci5nZXQoe2xldHRlcmJveF90b2tlbjogZ2V0VG9rZW4oKX0pLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICB2YXIgY2F0cyA9IFtdO1xuICAgICAgcmVzLmZvckVhY2goZnVuY3Rpb24oY2F0KSB7XG4gICAgICAgIGNhdHMucHVzaChjYXQpO1xuICAgICAgfSk7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKGNhdHMpO1xuICAgIH0sIGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgYmFja2VuZC5nZXREZWFsc0J5Q2F0ID0gZnVuY3Rpb24oY2F0ZWdvcnksIG9mZnNldCwgbGltaXQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGRlYWxzQnlDYXRIYW5kbGVyLmdldCh7bGV0dGVyYm94X3Rva2VuOiBnZXRUb2tlbigpLCBkZWFsQ2F0OiBjYXRlZ29yeSwgb2Zmc2V0OiBvZmZzZXQsIGxpbWl0OiBsaW1pdH0pLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICB2YXIgZGVhbHMgPSBbXTtcbiAgICAgIHJlcy5mb3JFYWNoKGZ1bmN0aW9uKGRlYWwpIHtcbiAgICAgICAgZGVhbHMucHVzaChkZWFsKTtcbiAgICAgIH0pO1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZShkZWFscyk7XG4gICAgfSwgZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBiYWNrZW5kLmdldERlYWxCeUlkID0gZnVuY3Rpb24oZGVhbElkKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICBkZWFsQnlJZEhhbmRsZXIuZ2V0KHtsZXR0ZXJib3hfdG9rZW46IGdldFRva2VuKCksIGRlYWxJZDogZGVhbElkfSkuJHByb21pc2UudGhlbihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIGJhY2tlbmQudG9nZ2xlRGVhbExpa2UgPSBmdW5jdGlvbihkZWFsSWQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGhhbmRsZXIgPSBuZXcgZGVhbEJ5SWRIYW5kbGVyKCk7XG4gICAgaGFuZGxlci50b2tlbiA9IGdldFRva2VuKCk7XG4gICAgaGFuZGxlci4kbGlrZURlYWwoe2RlYWxJZDogZGVhbElkfSwgZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBiYWNrZW5kLmdldFVzZXJMaWtlZERlYWxzID0gZnVuY3Rpb24odXNlcklkKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICB1c2VyTGlrZWREZWFsc0hhbmRsZXIuZ2V0KHtsZXR0ZXJib3hfdG9rZW46IGdldFRva2VuKCksIG90aGVyVXNlcklkOiB1c2VySWR9KS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgdmFyIGRlYWxzID0gW107XG4gICAgICByZXMuZm9yRWFjaChmdW5jdGlvbihkZWFsKSB7XG4gICAgICAgIGRlYWxzLnB1c2goZGVhbCk7XG4gICAgICB9KTtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoZGVhbHMpO1xuICAgIH0sIGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgYmFja2VuZC5nZXRNdXR1YWxMaWtlZERlYWxzID0gZnVuY3Rpb24odXNlcklkKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICBtdXR1YWxMaWtlZERlYWxzSGFuZGxlci5nZXQoe2xldHRlcmJveF90b2tlbjogZ2V0VG9rZW4oKSwgb3RoZXJVc2VySWQ6IHVzZXJJZH0pLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICB2YXIgZGVhbHMgPSBbXTtcbiAgICAgIHJlcy5mb3JFYWNoKGZ1bmN0aW9uKGRlYWwpIHtcbiAgICAgICAgZGVhbHMucHVzaChkZWFsKTtcbiAgICAgIH0pO1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZShkZWFscyk7XG4gICAgfSwgZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBiYWNrZW5kLmdldE90aGVyVXNlclZlcnNpb24gPSBmdW5jdGlvbih1c2VySWQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIG90aGVyVXNlclZlcnNpb25IYW5kbGVyLmdldCh7bGV0dGVyYm94X3Rva2VuOiBnZXRUb2tlbigpLCBoYXNoZWRJZDogdXNlcklkfSkuJHByb21pc2UudGhlbihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIGJhY2tlbmQudXBkYXRlVmVyc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgaGFuZGxlciA9IG5ldyBvd25Vc2VyVmVyc2lvbkhhbmRsZXIoKTtcbiAgICBoYW5kbGVyLnRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICBoYW5kbGVyLm1ham9yID0gVkVSU0lPTi5tYWpvcjtcbiAgICBoYW5kbGVyLm1pbm9yID0gVkVSU0lPTi5taW5vcjtcbiAgICBoYW5kbGVyLnJldmlzaW9uID0gVkVSU0lPTi5yZXZpc2lvbjtcbiAgICBoYW5kbGVyLiR1cGRhdGUoZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICByZXR1cm4gYmFja2VuZDtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5zZXJ2aWNlcycpXG5cbi5zZXJ2aWNlKCdCYWNrZ3JvdW5kU2VydmljZScsIGZ1bmN0aW9uKCkge1xuICB2YXIgaXNBY3RpdmUgPSB0cnVlO1xuICB2YXIgQmFja2dyb3VuZFNlcnZpY2UgPSB7fTtcbiAgdmFyIG9uUmVzdW1lTGlzdGVuZXJzID0gW107XG4gIHZhciBvblBhdXNlTGlzdGVuZXJzID0gW107XG5cbiAgZnVuY3Rpb24gb25QYXVzZSgpIHtcbiAgICBpc0FjdGl2ZSA9IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb25QYXVzZUxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgb25QYXVzZUxpc3RlbmVyc1tpXSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUmVzdW1lKCkge1xuICAgIGlzQWN0aXZlID0gdHJ1ZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9uUmVzdW1lTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBvblJlc3VtZUxpc3RlbmVyc1tpXSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRGV2aWNlUmVhZHkoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBhdXNlXCIsIG9uUGF1c2UsIGZhbHNlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzdW1lXCIsIG9uUmVzdW1lLCBmYWxzZSk7XG4gIH1cblxuICBCYWNrZ3JvdW5kU2VydmljZS5pc0luQmFja2dyb3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh3aW5kb3cuY29yZG92YSkge1xuICAgICAgcmV0dXJuICFpc0FjdGl2ZTsgICAgICBcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICF3aW5kb3cuZG9jdW1lbnQuaGFzRm9jdXMoKTtcbiAgICB9XG4gIH07XG5cbiAgQmFja2dyb3VuZFNlcnZpY2UucmVnaXN0ZXJPblJlc3VtZSA9IGZ1bmN0aW9uKG9uUmVzdW1lKSB7XG4gICAgb25SZXN1bWVMaXN0ZW5lcnMucHVzaChvblJlc3VtZSk7XG4gIH07XG5cbiAgQmFja2dyb3VuZFNlcnZpY2UucmVnaXN0ZXJPblBhdXNlID0gZnVuY3Rpb24ob25QYXVzZSkge1xuICAgIG9uUGF1c2VMaXN0ZW5lcnMucHVzaChvblBhdXNlKTtcbiAgfTtcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIiwgb25EZXZpY2VSZWFkeSwgZmFsc2UpO1xuXG4gIHJldHVybiBCYWNrZ3JvdW5kU2VydmljZTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5zZXJ2aWNlcycpXG5cbi5zZXJ2aWNlKCdDYXRlZ29yeVNlcnZpY2UnLCBmdW5jdGlvbigkcSwgYmFja2VuZCkge1xuICB2YXIgY2F0ZWdvcnkgPSB0aGlzO1xuXG4gIGNhdGVnb3J5LmdldENhdGVnb3JpZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGJhY2tlbmQuZ2V0RGVhbENhdGVnb3JpZXMoKS50aGVuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG59KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5zZXJ2aWNlcycpXG5cbi5zZXJ2aWNlKCdDaGF0U2VydmljZScsIGZ1bmN0aW9uKCRxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm9vbXNTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGJTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVhbFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCYWNrZ3JvdW5kU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudGJ1cykge1xuXG4gIHZhciBDaGF0U2VydmljZSA9IHt9O1xuICB2YXIgY2hhdE1lc3NhZ2VzID0ge307XG4gIHZhciBjdXJyZW50Um9vbSA9ICcnO1xuICB2YXIgY3VycmVudFNjb3BlID0gbnVsbDtcbiAgdmFyIGN1cnJlbnRTY3JvbGxEZWxlZ2F0ZSA9IG51bGw7XG5cbiAgZnVuY3Rpb24gaW5zZXJ0TWVzc2FnZUludG9EYihtZXNzYWdlKSB7XG4gICAgRGJTZXJ2aWNlLmFkZE1lc3NhZ2UobWVzc2FnZS5Sb29tSGFzaCwgbWVzc2FnZS5zZW5kZXIsIG1lc3NhZ2UuY29udGVudCwgbWVzc2FnZS50aW1lU2VudCwgbWVzc2FnZS5pc1JlYWQsIG1lc3NhZ2UudHlwZSwgbWVzc2FnZS5EZWFsSWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFya01lc3NhZ2VzSW5EYkFzUmVhZChyb29tSGFzaCwgdGltZSkge1xuICAgIERiU2VydmljZS5tYXJrTWVzc2FnZXNBc1JlYWQocm9vbUhhc2gsIHRpbWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q2hhdE1lc3NhZ2VzKHJvb21IYXNoKSB7XG4gICAgaWYgKHR5cGVvZiBjaGF0TWVzc2FnZXNbcm9vbUhhc2hdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIGNoYXRNZXNzYWdlc1tyb29tSGFzaF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uV2luZG93Rm9jdXMoKSB7XG4gICAgdmFyIGN1cnJlbnRNZXNzYWdlcyA9IGdldENoYXRNZXNzYWdlcyhjdXJyZW50Um9vbSk7XG4gICAgaWYgKGN1cnJlbnRSb29tICYmICRzdGF0ZS5pbmNsdWRlcygnYXBwLmNoYXQnLCB7Y2hhdElkOiBjdXJyZW50Um9vbX0pICYmIGN1cnJlbnRNZXNzYWdlcyAhPT0gbnVsbCAmJiBjdXJyZW50TWVzc2FnZXMubGVuZ3RoID4gMCkge1xuICAgICAgc29ja2V0LnJvb21SZWFkKGN1cnJlbnRSb29tLCBjdXJyZW50TWVzc2FnZXNbY3VycmVudE1lc3NhZ2VzLmxlbmd0aC0xXS50aW1lc3RhbXAuZ2V0VGltZSgpKTtcbiAgICB9XG4gIH1cblxuICBldmVudGJ1cy5yZWdpc3Rlckxpc3RlbmVyKCd3aW5kb3dGb2N1c2VkJywgb25XaW5kb3dGb2N1cyk7XG4gIEJhY2tncm91bmRTZXJ2aWNlLnJlZ2lzdGVyT25SZXN1bWUob25XaW5kb3dGb2N1cyk7XG5cbiAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcigncm9vbU1lc3NhZ2UnLCBmdW5jdGlvbihyb29tTWVzc2FnZSkge1xuICAgIHZhciBtZXNzYWdlID0gcm9vbU1lc3NhZ2UubWVzc2FnZTtcbiAgICB2YXIgY3VycmVudE1lc3NhZ2VzID0gZ2V0Q2hhdE1lc3NhZ2VzKG1lc3NhZ2UuUm9vbUhhc2gpO1xuICAgIGlmIChjdXJyZW50TWVzc2FnZXMgIT09IG51bGwpIHtcbiAgICAgIHZhciBmb3JtYXR0ZWRNZXNzYWdlID0gQ2hhdFNlcnZpY2UuZm9ybWF0TWVzc2FnZShtZXNzYWdlKTtcbiAgICAgIGN1cnJlbnRNZXNzYWdlcy5wdXNoKGZvcm1hdHRlZE1lc3NhZ2UpO1xuICAgICAgaWYgKG1lc3NhZ2UuUm9vbUhhc2ggPT09IGN1cnJlbnRSb29tKSB7XG4gICAgICAgIGN1cnJlbnRTY29wZS5saW1pdCA9IDQwO1xuICAgICAgICBjdXJyZW50U2NvcGUuJGFwcGx5KCk7XG4gICAgICAgIGN1cnJlbnRTY3JvbGxEZWxlZ2F0ZS5zY3JvbGxCb3R0b20odHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghQmFja2dyb3VuZFNlcnZpY2UuaXNJbkJhY2tncm91bmQoKSAmJiAkc3RhdGUuaW5jbHVkZXMoJ2FwcC5jaGF0Jywge2NoYXRJZDogcm9vbU1lc3NhZ2UubWVzc2FnZS5Sb29tSGFzaH0pKSB7XG4gICAgICBzb2NrZXQucm9vbVJlYWQocm9vbU1lc3NhZ2UubWVzc2FnZS5Sb29tSGFzaCwgcm9vbU1lc3NhZ2UubWVzc2FnZS50aW1lU2VudCk7XG4gICAgfVxuICB9KTtcblxuICBDaGF0U2VydmljZS5zZXRDdXJyZW50Um9vbSA9IGZ1bmN0aW9uKHJvb20sIHNjb3BlLCBzY3JvbGxEZWxlZ2F0ZSkge1xuICAgIGlmIChyb29tICE9PSBjdXJyZW50Um9vbSkge1xuICAgICAgY3VycmVudFJvb20gPSByb29tO1xuICAgIH1cbiAgICBjdXJyZW50U2NvcGUgPSBzY29wZTtcbiAgICBjdXJyZW50U2Nyb2xsRGVsZWdhdGUgPSBzY3JvbGxEZWxlZ2F0ZTtcbiAgfTtcblxuICBDaGF0U2VydmljZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHdpbmRvdy5jb3Jkb3ZhICYmIERiU2VydmljZS5pc0luaXRpYWxpemVkKCkpIHtcbiAgICAgIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ3Jvb21NZXNzYWdlJywgZnVuY3Rpb24ocm9vbU1lc3NhZ2UpIHtcbiAgICAgICAgaW5zZXJ0TWVzc2FnZUludG9EYihyb29tTWVzc2FnZS5tZXNzYWdlKTtcbiAgICAgIH0pO1xuICAgICAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcigncm9vbVJlYWQnLCBmdW5jdGlvbihyb29tUmVhZCkge1xuICAgICAgICBtYXJrTWVzc2FnZXNJbkRiQXNSZWFkKHJvb21SZWFkLnJvb21IYXNoLCByb29tUmVhZC50aW1lKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBDaGF0U2VydmljZS5zeW5jID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHdpbmRvdy5jb3Jkb3ZhICYmIERiU2VydmljZS5pc0luaXRpYWxpemVkKCkpIHtcbiAgICAgIERiU2VydmljZS5nZXRMYXRlc3RUaW1lU2VudCgpLnRoZW4oZnVuY3Rpb24obGF0ZXN0VGltZSkge1xuICAgICAgICBiYWNrZW5kLmdldE1lc3NhZ2VzKGxhdGVzdFRpbWUpLiRwcm9taXNlXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2VzKSB7XG4gICAgICAgICAgbWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICAgICBpbnNlcnRNZXNzYWdlSW50b0RiKG1lc3NhZ2UpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBDaGF0U2VydmljZS5mb3JtYXRNZXNzYWdlID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIHZhciBmb3JtYXR0ZWQgPSB7XG4gICAgICBpc093bmVyOiBtZXNzYWdlLnNlbmRlciA9PT0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoYXNoZWRJZCcpLFxuICAgICAgY29udGVudDogbWVzc2FnZS5jb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShtZXNzYWdlLnRpbWVTZW50KSxcbiAgICAgIHR5cGU6IG1lc3NhZ2UudHlwZSxcbiAgICB9O1xuICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICdzaGFyZScgJiYgIW1lc3NhZ2UuRGVhbCkge1xuICAgICAgRGVhbFNlcnZpY2UuZ2V0RGVhbChtZXNzYWdlLkRlYWxJZClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRlYWwpIHtcbiAgICAgICAgZm9ybWF0dGVkLkRlYWwgPSBkZWFsO1xuICAgICAgICBmb3JtYXR0ZWQuRGVhbElkID0gZGVhbC5pZDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSAnc2hhcmUnICYmIG1lc3NhZ2UuRGVhbCkge1xuICAgICAgZm9ybWF0dGVkLkRlYWxJZCA9IG1lc3NhZ2UuRGVhbC5pZDtcbiAgICAgIGZvcm1hdHRlZC5EZWFsID0gbWVzc2FnZS5EZWFsO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0dGVkO1xuICB9O1xuXG4gIENoYXRTZXJ2aWNlLmdldFJlY2lwaWVudE5hbWUgPSBmdW5jdGlvbihjaGF0SWQpIHtcbiAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICB2YXIgcm9vbSA9IFJvb21zU2VydmljZS5nZXRSb29tKGNoYXRJZCk7XG4gICAgaWYgKHJvb20gIT09IG51bGwpIHtcbiAgICAgIGRmZC5yZXNvbHZlKHJvb20udXNlck5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYWNrZW5kLmdldFNpbmdsZVJvb20oY2hhdElkKS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJvb20pIHtcbiAgICAgICAgZGZkLnJlc29sdmUocm9vbS51c2VyTmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICB9O1xuXG4gIENoYXRTZXJ2aWNlLmdldFJlY2lwaWVudEhhc2hlZElkID0gZnVuY3Rpb24oY2hhdElkKSB7XG4gICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgdmFyIHJvb20gPSBSb29tc1NlcnZpY2UuZ2V0Um9vbShjaGF0SWQpO1xuICAgIGlmIChyb29tICE9PSBudWxsKSB7XG4gICAgICBkZmQucmVzb2x2ZShyb29tLnVzZXJJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJhY2tlbmQuZ2V0U2luZ2xlUm9vbShjaGF0SWQpLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24ocm9vbSkge1xuICAgICAgICBkZmQucmVzb2x2ZShyb29tLnVzZXJJZCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICB9O1xuXG4gIENoYXRTZXJ2aWNlLmdldFJlY2lwaWVudFVzZXJEYXRhID0gZnVuY3Rpb24oY2hhdElkKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICBDaGF0U2VydmljZS5nZXRSZWNpcGllbnRIYXNoZWRJZChjaGF0SWQpLnRoZW4oZnVuY3Rpb24odXNlcklkKSB7XG4gICAgICBiYWNrZW5kLmdldE90aGVyVXNlcih1c2VySWQpLiRwcm9taXNlXG4gICAgICAudGhlbihmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUodXNlcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBDaGF0U2VydmljZS5nZXRNZXNzYWdlc0Zyb21CYWNrZW5kID0gZnVuY3Rpb24oY2hhdElkKSB7XG4gICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgdmFyIGN1cnJlbnRNZXNzYWdlcyA9IGdldENoYXRNZXNzYWdlcyhjaGF0SWQpO1xuICAgIGlmIChjdXJyZW50TWVzc2FnZXMgIT09IG51bGwpIHtcbiAgICAgIGRmZC5yZXNvbHZlKGN1cnJlbnRNZXNzYWdlcyk7XG4gICAgfSBlbHNlIGlmICghd2luZG93LmNvcmRvdmEgfHwgIURiU2VydmljZS5pc0luaXRpYWxpemVkKCkpIHtcbiAgICAgIGJhY2tlbmQuZ2V0Um9vbU1lc3NhZ2VzKGNoYXRJZCkuJHByb21pc2VcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJhd01lc3NhZ2VzKSB7XG4gICAgICAgIHZhciBtZXNzYWdlcyA9IFtdO1xuICAgICAgICByYXdNZXNzYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKHJhd01lc3NhZ2UpIHtcbiAgICAgICAgICBtZXNzYWdlcy5wdXNoKENoYXRTZXJ2aWNlLmZvcm1hdE1lc3NhZ2UocmF3TWVzc2FnZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbWVzc2FnZXMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgcmV0dXJuIGEudGltZXN0YW1wIC0gYi50aW1lc3RhbXA7XG4gICAgICAgIH0pO1xuICAgICAgICBjaGF0TWVzc2FnZXNbY2hhdElkXSA9IG1lc3NhZ2VzO1xuICAgICAgICBkZmQucmVzb2x2ZShtZXNzYWdlcyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgRGJTZXJ2aWNlLmdldFJvb21NZXNzYWdlcyhjaGF0SWQpXG4gICAgICAudGhlbihmdW5jdGlvbihyYXdNZXNzYWdlcykge1xuICAgICAgICB2YXIgbWVzc2FnZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYXdNZXNzYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIG1lc3NhZ2VzLnB1c2goQ2hhdFNlcnZpY2UuZm9ybWF0TWVzc2FnZShyYXdNZXNzYWdlc1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2VzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgIHJldHVybiBhLnRpbWVzdGFtcCAtIGIudGltZXN0YW1wO1xuICAgICAgICB9KTtcbiAgICAgICAgY2hhdE1lc3NhZ2VzW2NoYXRJZF0gPSBtZXNzYWdlcztcbiAgICAgICAgZGZkLnJlc29sdmUobWVzc2FnZXMpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgfTtcblxuICByZXR1cm4gQ2hhdFNlcnZpY2U7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guc2VydmljZXMnKVxuXG4uc2VydmljZSgnQ2hyb21lTm90aWZTZXJ2aWNlJywgZnVuY3Rpb24oJHRpbWVvdXQsIGV2ZW50YnVzLCBDaGF0U2VydmljZSkge1xuICB2YXIgQ2hyb21lTm90aWYgPSB0aGlzO1xuXG4gIGlmIChkb2N1bWVudC5VUkwuaW5kZXhPZiggJ2h0dHA6Ly8nICkgIT09IC0xIHx8IGRvY3VtZW50LlVSTC5pbmRleE9mKCAnaHR0cHM6Ly8nICkgIT09IC0xKSB7XG4gICAgdmFyIE5vdGlmaWNhdGlvbiA9IHdpbmRvdy5Ob3RpZmljYXRpb24gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1vek5vdGlmaWNhdGlvbiB8fFxuICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cud2Via2l0Tm90aWZpY2F0aW9uO1xuXG4gICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSAnZ3JhbnRlZCcpIHtcbiAgICAgIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpO1xuICAgIH1cblxuICAgIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ3Jvb21NZXNzYWdlJywgZnVuY3Rpb24ocm9vbU1lc3NhZ2UpIHtcbiAgICAgIHZhciBtZXNzYWdlID0gcm9vbU1lc3NhZ2UubWVzc2FnZTtcbiAgICAgIHZhciBzZW5kZXJOYW1lID0gcm9vbU1lc3NhZ2Uuc2VuZGVyTmFtZTtcbiAgICAgIHZhciBmb3JtYXR0ZWRNZXNzYWdlID0gQ2hhdFNlcnZpY2UuZm9ybWF0TWVzc2FnZShtZXNzYWdlKTtcblxuICAgICAgaWYgKCFmb3JtYXR0ZWRNZXNzYWdlLmlzT3duZXIpIHtcbiAgICAgICAgc2hvdyhzZW5kZXJOYW1lLCBmb3JtYXR0ZWRNZXNzYWdlLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gc2hvdyh0aXRsZSwgbWVzc2FnZSkge1xuICAgICAgdmFyIGluc3RhbmNlID0gbmV3IE5vdGlmaWNhdGlvbihcbiAgICAgICAgdGl0bGUsIHtcbiAgICAgICAgICBib2R5OiBtZXNzYWdlLFxuICAgICAgICAgIGljb246IFwiaW1nL2FuZHJvaWQtaWNvbi00OHg0OC5wbmdcIlxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBpbnN0YW5jZS5vbnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgaW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgfSwgMTAwMDApO1xuICAgICAgfTtcbiAgICB9XG4gIH1cbn0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LnNlcnZpY2VzJylcblxuLnNlcnZpY2UoJ0RiU2VydmljZScsIGZ1bmN0aW9uKCRxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3csXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRidXMpIHtcblxuICB2YXIgZGIgPSB7aXNJbml0aWFsaXplZDogZmFsc2V9O1xuICB2YXIgRGJTZXJ2aWNlID0ge307XG4gIHZhciBEQl9WRVJTSU9OID0gMTtcblxuICBmdW5jdGlvbiBjaGVja0luaXQoZGVmZXJyZWQpIHtcbiAgICBpZiAoIURiU2VydmljZS5pc0luaXRpYWxpemVkKCkpIGRlZmVycmVkLnJlamVjdCh7ZXJyOiAnRGJTZXJ2aWNlIG5vdCBpbml0aWFsaXplZCd9KTtcbiAgfVxuXG4gIERiU2VydmljZS5pc0luaXRpYWxpemVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRiLmlzSW5pdGlhbGl6ZWQgJiYgdHlwZW9mIGRiLnNxbGl0ZSAhPT0gJ3VuZGVmaW5lZCc7XG4gIH07XG5cbiAgRGJTZXJ2aWNlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAod2luZG93LmNvcmRvdmEpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZGIuc3FsaXRlID0gJHdpbmRvdy5zcWxpdGVQbHVnaW4ub3BlbkRhdGFiYXNlKHtuYW1lOiAnbGV0dGVyYm94LmRiJywgY3JlYXRlRnJvbUxvY2F0aW9uOiAxfSk7XG4gICAgICAgIGRiLnNxbGl0ZS50cmFuc2FjdGlvbihmdW5jdGlvbih0eCkge1xuICAgICAgICAgIHR4LmV4ZWN1dGVTcWwoJ0NSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHJvb21zIChoYXNoIENIQVIoMzIpIFBSSU1BUlkgS0VZLCB1c2VySWQgQ0hBUigzMikgTk9UIE5VTEwsIHVzZXJOYW1lIFZBUkNIQVIoMjU2KSBOT1QgTlVMTCwgdGh1bWJuYWlsIFRFWFQgTk9UIE5VTEwsIHByb2ZpbGVQaWN0dXJlIFRFWFQgTk9UIE5VTEwsIGNyZWF0ZWRBdCBEQVRFVElNRSBOT1QgTlVMTCknKTtcbiAgICAgICAgICB0eC5leGVjdXRlU3FsKCdDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBtZXNzYWdlcyAocm9vbUhhc2ggQ0hBUigzMikgTk9UIE5VTEwgUkVGRVJFTkNFUyByb29tcyhoYXNoKSwgc2VuZGVyIFZBUkNIQVIoMjU2KSBOT1QgTlVMTCwgY29udGVudCBURVhUIE5PVCBOVUxMLCB0aW1lU2VudCBCSUdJTlQgTk9UIE5VTEwsIGlzUmVhZCBCT09MRUFOIE5PVCBOVUxMIERFRkFVTFQgMCwgdHlwZSBWQVJDSEFSKDI1NikgTk9UIE5VTEwgREVGQVVMVCBcXCdtZXNzYWdlXFwnLCBEZWFsSWQgSU5URUdFUiwgUFJJTUFSWSBLRVkgKHJvb21IYXNoLCBzZW5kZXIsIHRpbWVTZW50KSknKTtcbiAgICAgICAgICBkYi5zcWxpdGUuZXhlY3V0ZVNxbCgnUFJBR01BIHVzZXJfdmVyc2lvbicsIFtdLCBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIHZhciB1c2VyVmVyc2lvbiA9IHJlcy5yb3dzLml0ZW0oMCkudXNlcl92ZXJzaW9uO1xuICAgICAgICAgICAgaWYgKHVzZXJWZXJzaW9uIDwgMSkgeyAvLyB1cGRhdGVzIHRvIHVzZXJfdmVyc2lvbiAxXG4gICAgICAgICAgICAgIGRiLnNxbGl0ZS5leGVjdXRlU3FsKCdBTFRFUiBUQUJMRSBtZXNzYWdlcyBBREQgQ09MVU1OIHR5cGUgVkFSQ0hBUigyNTYpIE5PVCBOVUxMIERFRkFVTFQgXFwnbWVzc2FnZVxcJycpO1xuICAgICAgICAgICAgICBkYi5zcWxpdGUuZXhlY3V0ZVNxbCgnQUxURVIgVEFCTEUgbWVzc2FnZXMgQUREIENPTFVNTiBEZWFsSWQgSU5URUdFUicpO1xuICAgICAgICAgICAgICBkYi5zcWxpdGUuZXhlY3V0ZVNxbCgnUFJBR01BIHVzZXJfdmVyc2lvbj0xJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYi5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGV2ZW50YnVzLmNhbGwoJ2RiSW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LCBmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIERiU2VydmljZS5hZGRSb29tID0gZnVuY3Rpb24ocm9vbUhhc2gsIHVzZXJIYXNoLCB1c2VyRmlyc3ROYW1lLCB0aHVtYm5haWxQaWMsIG1lZGl1bVBpYywgY3JlYXRlZEF0KSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICBjaGVja0luaXQoZGVmZXJyZWQpO1xuXG4gICAgZGIuc3FsaXRlLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKHR4KSB7XG4gICAgICB0eC5leGVjdXRlU3FsKFwiU0VMRUNUIENPVU5UKCopIEFTIGNudCBGUk9NIHJvb21zIFdIRVJFIGhhc2g9P1wiLCBbcm9vbUhhc2hdLCBmdW5jdGlvbih0eCwgcmVzKSB7XG4gICAgICAgIGlmICghcmVzLnJvd3MuaXRlbSgwKS5jbnQpIHtcbiAgICAgICAgICB0eC5leGVjdXRlU3FsKFwiSU5TRVJUIElOVE8gcm9vbXMgVkFMVUVTICg/LD8sPyw/LD8sPylcIiwgW3Jvb21IYXNoLCB1c2VySGFzaCwgdXNlckZpcnN0TmFtZSwgdGh1bWJuYWlsUGljLCBtZWRpdW1QaWMsIGNyZWF0ZWRBdF0sIGZ1bmN0aW9uKHR4LCByZXMpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0eC5leGVjdXRlU3FsKFwiVVBEQVRFIHJvb21zIFNFVCB1c2VyTmFtZT0/LCB0aHVtYm5haWw9PywgcHJvZmlsZVBpY3R1cmU9PyBXSEVSRSBoYXNoPT9cIiwgW3VzZXJGaXJzdE5hbWUsIHRodW1ibmFpbFBpYywgbWVkaXVtUGljLCByb29tSGFzaF0sIGZ1bmN0aW9uKHR4LCByZXMpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgRGJTZXJ2aWNlLmFkZE1lc3NhZ2UgPSBmdW5jdGlvbihyb29tSGFzaCwgc2VuZGVyLCBjb250ZW50LCB0aW1lU2VudCwgaXNSZWFkLCB0eXBlLCBkZWFsSWQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGNoZWNrSW5pdChkZWZlcnJlZCk7XG5cbiAgICBkYi5zcWxpdGUudHJhbnNhY3Rpb24oZnVuY3Rpb24odHgpIHtcbiAgICAgIHR4LmV4ZWN1dGVTcWwoXCJTRUxFQ1QgQ09VTlQoKikgQVMgY250IEZST00gbWVzc2FnZXMgV0hFUkUgcm9vbUhhc2g9PyBBTkQgc2VuZGVyPT8gQU5EIGNvbnRlbnQ9PyBBTkQgdGltZVNlbnQ9P1wiLCBbcm9vbUhhc2gsIHNlbmRlciwgY29udGVudCwgdGltZVNlbnRdLCBmdW5jdGlvbih0eCwgcmVzKSB7XG4gICAgICAgIGlmICghcmVzLnJvd3MuaXRlbSgwKS5jbnQpIHtcbiAgICAgICAgICB0eC5leGVjdXRlU3FsKFwiSU5TRVJUIElOVE8gbWVzc2FnZXMgKHJvb21IYXNoLCBzZW5kZXIsIGNvbnRlbnQsIHRpbWVTZW50LCBpc1JlYWQsIHR5cGUsIERlYWxJZCkgVkFMVUVTICg/LD8sPyw/LD8sPyw/KVwiLCBbcm9vbUhhc2gsIHNlbmRlciwgY29udGVudCwgdGltZVNlbnQsIGlzUmVhZCwgdHlwZSA/IHR5cGUgOiAnbWVzc2FnZScsIGRlYWxJZCA/IGRlYWxJZCA6IG51bGxdLCBmdW5jdGlvbih0eCwgcmVzKSB7XG4gICAgICAgICAgICBpZiAoaXNSZWFkKSBEYlNlcnZpY2UubWFya01lc3NhZ2VzQXNSZWFkKHJvb21IYXNoLCB0aW1lU2VudCk7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlcyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHtcbiAgICAgICAgICAgIGVycm9yOiAnbWVzc2FnZSBhbHJlYWR5IGV4aXN0cydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgRGJTZXJ2aWNlLm1hcmtNZXNzYWdlc0FzUmVhZCA9IGZ1bmN0aW9uKHJvb21IYXNoLCB0aW1lU2VudCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgY2hlY2tJbml0KGRlZmVycmVkKTtcbiAgICBkYi5zcWxpdGUudHJhbnNhY3Rpb24oZnVuY3Rpb24odHgpIHtcbiAgICAgIHR4LmV4ZWN1dGVTcWwoXCJVUERBVEUgbWVzc2FnZXMgU0VUIGlzUmVhZD0xIFdIRVJFIHJvb21IYXNoPT8gQU5EIHRpbWVTZW50PD0/XCIsIFtyb29tSGFzaCwgdGltZVNlbnRdLCBmdW5jdGlvbih0eCwgcmVzKSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIERiU2VydmljZS5nZXRTaW5nbGVSb29tID0gZnVuY3Rpb24ocm9vbUhhc2gpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGNoZWNrSW5pdChkZWZlcnJlZCk7XG4gICAgZGIuc3FsaXRlLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKHR4KSB7XG4gICAgICB0eC5leGVjdXRlU3FsKFwiU0VMRUNUICogRlJPTSByb29tcyBXSEVSRSBoYXNoPT9cIiwgW3Jvb21IYXNoXSwgZnVuY3Rpb24odHgsIHJlcykge1xuICAgICAgICBpZiAocmVzLnJvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciByb3cgPSByZXMucm93cy5pdGVtKDApO1xuICAgICAgICAgIHZhciByb29tID0ge1xuICAgICAgICAgICAgaGFzaDogcm93Lmhhc2gsXG4gICAgICAgICAgICB1c2VySWQ6IHJvdy51c2VySWQsXG4gICAgICAgICAgICB1c2VyTmFtZTogcm93LnVzZXJOYW1lLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiByb3cudGh1bWJuYWlsLFxuICAgICAgICAgICAgcHJvZmlsZVBpY3R1cmU6IHJvdy5wcm9maWxlUGljdHVyZSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogcm93LmNyZWF0ZWRBdCxcbiAgICAgICAgICAgIGxhdGVzdE1lc3NhZ2U6IHt9XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0eC5leGVjdXRlU3FsKFwiU0VMRUNUICogRlJPTSBtZXNzYWdlcyBXSEVSRSByb29tSGFzaD0/IE9SREVSIEJZIHRpbWVTZW50IERFU0MgTElNSVQgMVwiLCBbcm9vbUhhc2hdLCBmdW5jdGlvbih0eCwgcmVzKSB7XG4gICAgICAgICAgICBpZiAocmVzLnJvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICB2YXIgcm93ID0gcmVzLnJvd3MuaXRlbSgwKTtcbiAgICAgICAgICAgICAgcm9vbS5sYXRlc3RNZXNzYWdlLnNlbmRlciA9IHJvdy5zZW5kZXI7XG4gICAgICAgICAgICAgIHJvb20ubGF0ZXN0TWVzc2FnZS5jb250ZW50ID0gcm93LmNvbnRlbnQ7XG4gICAgICAgICAgICAgIHJvb20ubGF0ZXN0TWVzc2FnZS50aW1lU2VudCA9IHJvdy50aW1lU2VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwoXCJTRUxFQ1QgQ09VTlQoKikgQVMgdW5yZWFkQ291bnQgRlJPTSBtZXNzYWdlcyBXSEVSRSByb29tSGFzaD0/IEFORCBpc1JlYWQhPTEgQU5EIHNlbmRlcjw+P1wiLCBbcm9vbUhhc2gsIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaGFzaGVkSWQnKV0sIGZ1bmN0aW9uKHR4LCByZXMpIHtcbiAgICAgICAgICAgICAgcm9vbS51bnJlYWRDb3VudCA9IHJlcy5yb3dzLml0ZW0oMCkudW5yZWFkQ291bnQ7XG4gICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocm9vbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3Qoe1xuICAgICAgICAgICAgZXJyb3I6ICdyb29tIGRvZXMgbm90IGV4aXN0J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBnZXRSb29tc0Zyb21EYigpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGRiLnNxbGl0ZS50cmFuc2FjdGlvbihmdW5jdGlvbih0eCkge1xuICAgICAgdHguZXhlY3V0ZVNxbChcIlNFTEVDVCAqIEZST00gcm9vbXNcIiwgW10sIGZ1bmN0aW9uKHR4LCByZXMpIHtcbiAgICAgICAgdmFyIHJvb21zID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLnJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgcm93ID0gcmVzLnJvd3MuaXRlbShpKTtcbiAgICAgICAgICByb29tcy5wdXNoKHtcbiAgICAgICAgICAgIGhhc2g6IHJvdy5oYXNoLFxuICAgICAgICAgICAgdXNlcklkOiByb3cudXNlcklkLFxuICAgICAgICAgICAgdXNlck5hbWU6IHJvdy51c2VyTmFtZSxcbiAgICAgICAgICAgIHRodW1ibmFpbDogcm93LnRodW1ibmFpbCxcbiAgICAgICAgICAgIHByb2ZpbGVQaWN0dXJlOiByb3cucHJvZmlsZVBpY3R1cmUsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHJvdy5jcmVhdGVkQXRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJvb21zKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgRGJTZXJ2aWNlLnVwZGF0ZVJvb21zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICBiYWNrZW5kLmdldFJvb21zKCkuJHByb21pc2UudGhlbihmdW5jdGlvbihyb29tcykge1xuICAgICAgcm9vbXMuZm9yRWFjaChmdW5jdGlvbihyb29tKSB7XG4gICAgICAgIERiU2VydmljZS5hZGRSb29tKHJvb20uaGFzaCwgcm9vbS51c2VySWQsIHJvb20udXNlck5hbWUsIHJvb20udGh1bWJuYWlsLCByb29tLnByb2ZpbGVQaWN0dXJlLCByb29tLmNyZWF0ZWRBdCkudGhlbihmdW5jdGlvbihzdWNjZXNzKSB7fSk7XG4gICAgICB9KTtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUocm9vbXMpO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIERiU2VydmljZS5nZXRSb29tcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgY2hlY2tJbml0KGRlZmVycmVkKTtcbiAgICBpZiAoc29ja2V0LmlzQ29ubmVjdGVkKCkpIHsvLyBJcyBjb25uZWN0ZWQgdG8gSW50ZXJuZXQgYW5kIGJhY2tlbmQgaXMgYXdha2VcbiAgICAgIERiU2VydmljZS51cGRhdGVSb29tcygpLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdldFJvb21zRnJvbURiKCkudGhlbihkZWZlcnJlZC5yZXNvbHZlKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgRGJTZXJ2aWNlLmdldFJvb21NZXNzYWdlcyA9IGZ1bmN0aW9uKHJvb21IYXNoKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICBjaGVja0luaXQoZGVmZXJyZWQpO1xuICAgIGRiLnNxbGl0ZS50cmFuc2FjdGlvbihmdW5jdGlvbih0eCkge1xuICAgICAgdHguZXhlY3V0ZVNxbChcIlNFTEVDVCAqIEZST00gbWVzc2FnZXMgV0hFUkUgcm9vbUhhc2g9PyBPUkRFUiBCWSB0aW1lU2VudCBBU0NcIiwgW3Jvb21IYXNoXSwgZnVuY3Rpb24odHgsIHJlcykge1xuICAgICAgICB2YXIgbWVzc2FnZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMucm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciByb3cgPSByZXMucm93cy5pdGVtKGkpO1xuICAgICAgICAgIG1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgUm9vbUhhc2g6IHJvdy5yb29tSGFzaCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHJvdy5jb250ZW50LFxuICAgICAgICAgICAgdGltZVNlbnQ6IHJvdy50aW1lU2VudCxcbiAgICAgICAgICAgIHNlbmRlcjogcm93LnNlbmRlcixcbiAgICAgICAgICAgIHR5cGU6IHJvdy50eXBlLFxuICAgICAgICAgICAgRGVhbElkOiByb3cuRGVhbElkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShtZXNzYWdlcyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBEYlNlcnZpY2UuZ2V0VW5yZWFkQ291bnRzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICBjaGVja0luaXQoZGVmZXJyZWQpO1xuICAgIGRiLnNxbGl0ZS50cmFuc2FjdGlvbihmdW5jdGlvbih0eCkge1xuICAgICAgdHguZXhlY3V0ZVNxbChcIlNFTEVDVCByb29tSGFzaCwgQ09VTlQoKikgYXMgY250IEZST00gbWVzc2FnZXMgR1JPVVAgQlkgcm9vbUhhc2gsIGlzUmVhZCBIQVZJTkcgaXNSZWFkPTBcIiwgW10sIGZ1bmN0aW9uKHR4LCByZXMpIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH1cblxuICBEYlNlcnZpY2UuZ2V0TGF0ZXN0VGltZVNlbnQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGNoZWNrSW5pdChkZWZlcnJlZCk7XG4gICAgZGIuc3FsaXRlLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKHR4KSB7XG4gICAgICB0eC5leGVjdXRlU3FsKFwiU0VMRUNUIE1BWCh0aW1lU2VudCkgYXMgbWF4dGltZSBGUk9NIG1lc3NhZ2VzXCIsIFtdLCBmdW5jdGlvbih0eCwgcmVzKSB7XG4gICAgICAgIGlmIChyZXMucm93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXMucm93cy5pdGVtKDApLm1heHRpbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIERiU2VydmljZS5nZXRMYXN0ZXN0TWVzc2FnZSA9IGZ1bmN0aW9uKHJvb21IYXNoKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICBjaGVja0luaXQoZGVmZXJyZWQpO1xuICAgIGRiLnNxbGl0ZS50cmFuc2FjdGlvbihmdW5jdGlvbih0eCkge1xuICAgICAgdHguZXhlY3V0ZVNxbChcIlNFTEVDVCBzZW5kZXIsIGNvbnRlbnQsIHRpbWVTZW50IEZST00gbWVzc2FnZXMgV0hFUkUgcm9vbUhhc2g9PyBPUkRFUiBCWSB0aW1lU2VudCBERVNDIExJTUlUIDFcIiwgW3Jvb21IYXNoXSwgZnVuY3Rpb24odHgsIHJlcykge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlcy5yb3dzLml0ZW0oMCkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgRGJTZXJ2aWNlLmRlbGV0ZVJvb20gPSBmdW5jdGlvbihyb29tSGFzaCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgY2hlY2tJbml0KGRlZmVycmVkKTtcbiAgICBkYi5zcWxpdGUudHJhbnNhY3Rpb24oZnVuY3Rpb24odHgpIHtcbiAgICAgIHR4LmV4ZWN1dGVTcWwoXCJERUxFVEUgRlJPTSByb29tcyBXSEVSRSBoYXNoPT9cIiwgW3Jvb21IYXNoXSwgZnVuY3Rpb24odHgsIHJlcykge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlcyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBEYlNlcnZpY2UuZGVsZXRlUm9vbU1lc3NhZ2VzID0gZnVuY3Rpb24ocm9vbUhhc2gpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGNoZWNrSW5pdChkZWZlcnJlZCk7XG4gICAgZGIuc3FsaXRlLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKHR4KSB7XG4gICAgICB0eC5leGVjdXRlU3FsKFwiREVMRVRFIEZST00gbWVzc2FnZXMgV0hFUkUgcm9vbUhhc2g9P1wiLCBbcm9vbUhhc2hdLCBmdW5jdGlvbih0eCwgcmVzKSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIERiU2VydmljZS5jbGVhckFsbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgY2hlY2tJbml0KGRlZmVycmVkKTtcbiAgICBpZiAoRGJTZXJ2aWNlLmlzSW5pdGlhbGl6ZWQoKSkge1xuICAgICAgZGIuc3FsaXRlLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKHR4KSB7XG4gICAgICAgIHR4LmV4ZWN1dGVTcWwoXCJERUxFVEUgRlJPTSBtZXNzYWdlc1wiLCBbXSwgZnVuY3Rpb24odHgsIHJlcykge1xuICAgICAgICAgIHR4LmV4ZWN1dGVTcWwoXCJERUxFVEUgRlJPTSByb29tc1wiLCBbXSwgZnVuY3Rpb24odHgsIHJlcykge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxuXG4gIHJldHVybiBEYlNlcnZpY2U7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guc2VydmljZXMnKVxuXG4uc2VydmljZSgnRGVhbFNlcnZpY2UnLCBmdW5jdGlvbigkcSwgYmFja2VuZCkge1xuICB2YXIgZGVhbCA9IHRoaXM7XG5cbiAgZGVhbC5zaG93U2hhcmUgPSBmYWxzZTtcblxuICBkZWFsLmdldEFsbERlYWxzID0gZnVuY3Rpb24ob2Zmc2V0LCBsaW1pdCkge1xuICAgIHJldHVybiBkZWFsLmdldERlYWxzKCdhbGwnLCBvZmZzZXQsIGxpbWl0KTtcbiAgfTtcblxuICBkZWFsLmdldERlYWxzID0gZnVuY3Rpb24oY2F0ZWdvcnksIG9mZnNldCwgbGltaXQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGJhY2tlbmQuZ2V0RGVhbHNCeUNhdChjYXRlZ29yeSwgb2Zmc2V0LCBsaW1pdCkudGhlbihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIGRlYWwuZ2V0RmVhdHVyZWREZWFscyA9IGZ1bmN0aW9uKG9mZnNldCwgbGltaXQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGJhY2tlbmQuZ2V0RmVhdHVyZWREZWFscyhvZmZzZXQsIGxpbWl0KS50aGVuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgZGVhbC5nZXREZWFsID0gZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGJhY2tlbmQuZ2V0RGVhbEJ5SWQoaWQpLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBkZWFsLnRvZ2dsZURlYWxMaWtlID0gZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGJhY2tlbmQudG9nZ2xlRGVhbExpa2UoaWQpLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBkZWFsLmdldE93bkxpa2VkRGVhbHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGJhY2tlbmQuZ2V0VXNlckxpa2VkRGVhbHMoJ3NlbGYnKS50aGVuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgZGVhbC5nZXRVc2VyTGlrZWREZWFscyA9IGZ1bmN0aW9uKHVzZXJJZCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgYmFja2VuZC5nZXRVc2VyTGlrZWREZWFscyh1c2VySWQpLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBkZWFsLmdldE11dHVhbExpa2VkRGVhbHMgPSBmdW5jdGlvbih1c2VySWQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGJhY2tlbmQuZ2V0TXV0dWFsTGlrZWREZWFscyh1c2VySWQpLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSwgZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBkZWFsLmNoZWNrRGVhbENvbXBhdGFiaWxpdHkgPSBmdW5jdGlvbih1c2VySWQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGJhY2tlbmQuZ2V0T3RoZXJVc2VyVmVyc2lvbih1c2VySWQpLnRoZW4oZnVuY3Rpb24odmVyc2lvbikge1xuICAgICAgaWYgKHZlcnNpb24ubWlub3IgPj0gMSkge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgIH1cbiAgICB9LCBkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LnNlcnZpY2VzJylcblxuLnNlcnZpY2UoJ2V2ZW50YnVzJywgZnVuY3Rpb24oJHEpIHtcbiAgdmFyIEV2ZW50YnVzID0ge307XG4gIHZhciBsaXN0ZW5lcnMgPSB7fTtcblxuICBmdW5jdGlvbiBhc3luY1J1bihmbiwgYXJnKSB7XG4gICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm4oYXJnKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlLnN0YWNrKTtcbiAgICAgICAgcmVqZWN0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBFdmVudGJ1cy5kZXJlZ2lzdGVyQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBjb25zb2xlLmxvZygnZGVyZWdpc3RlcmVkIGxpc3RlbmVyOiAnICsgZXZlbnQpO1xuICAgIGlmIChsaXN0ZW5lcnNbZXZlbnRdIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIGxpc3RlbmVyc1tldmVudF0gPSBbXTtcbiAgICB9XG4gIH07XG5cbiAgRXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIGNvbnNvbGUubG9nKCdyZWdpc3RlcmVkIGxpc3RlbmVyOiAnICsgZXZlbnQpO1xuICAgIGlmIChsaXN0ZW5lcnNbZXZlbnRdIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIGxpc3RlbmVyc1tldmVudF0ucHVzaChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3RlbmVyc1tldmVudF0gPSBbbGlzdGVuZXJdO1xuICAgIH1cbiAgfTtcblxuICBFdmVudGJ1cy5jYWxsID0gZnVuY3Rpb24oZXZlbnQsIGFyZ3VtZW50KSB7XG4gICAgY29uc29sZS5sb2coJ2NhbGxlZCBsaXN0ZW5lcjogJyArIGV2ZW50KTtcbiAgICBpZiAobGlzdGVuZXJzW2V2ZW50XSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVyc1tldmVudF0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSBhc3luY1J1bihsaXN0ZW5lcnNbZXZlbnRdW2ldLCBhcmd1bWVudCk7XG4gICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2Vzc2Z1bGx5IGNhbGxlZCAnICsgZXZlbnQpO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igd2hlbiBjYWxsaW5nICcgKyBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRXZlbnRidXM7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guc2VydmljZXMnKVxuXG4uc2VydmljZSgnbGV0dGVyU2VydmljZScsIGZ1bmN0aW9uKCkge1xuICB2YXIgbGV0dGVyID0gdGhpcztcblxuICBsZXR0ZXIudGFyZ2V0VXNlckNhcmQgPSB7fTtcblxuICBsZXR0ZXIuc2V0VGFyZ2V0VXNlckNhcmQgPSBmdW5jdGlvbihjYXJkKSB7XG4gICAgbGV0dGVyLnRhcmdldFVzZXJDYXJkID0gY2FyZDtcbiAgfTtcbn0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LnNlcnZpY2VzJylcblxuLnNlcnZpY2UoJ0xvY2FsTm90aWZpY2F0aW9uU2VydmljZScsIGZ1bmN0aW9uKCRzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudGJ1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCYWNrZ3JvdW5kU2VydmljZSkge1xuXG4gIFxuICB2YXIgTG9jYWxOb3RpZmljYXRpb24gPSB7fTtcblxuICBmdW5jdGlvbiByZWdpc3Rlckxpc3RlbmVycygpIHtcbiAgICBpZiAod2luZG93LmNvcmRvdmEpIHtcbiAgICAgIHdpbmRvdy5jb3Jkb3ZhLnBsdWdpbnMubm90aWZpY2F0aW9uLmxvY2FsLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24obm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShub3RpZmljYXRpb24uZGF0YSk7XG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdyb29tJykge1xuICAgICAgICAgICRzdGF0ZS5nbygnYXBwLmNoYXQnLCB7Y2hhdElkOiBkYXRhLlJvb21IYXNofSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnbGV0dGVyJykge1xuICAgICAgICAgICRzdGF0ZS5nbygnYXBwLm5vdGlmaWNhdGlvbnMnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ3Jvb21NZXNzYWdlJywgZnVuY3Rpb24ocm9vbU1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHJvb21NZXNzYWdlLm1lc3NhZ2Uuc2VuZGVyICE9PSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hhc2hlZElkJykgJiZcbiAgICAgICAgICAoQmFja2dyb3VuZFNlcnZpY2UuaXNJbkJhY2tncm91bmQoKSB8fFxuICAgICAgICAgICAhJHN0YXRlLmluY2x1ZGVzKCdhcHAuY2hhdCcsIHtjaGF0SWQ6IHJvb21NZXNzYWdlLm1lc3NhZ2UuUm9vbUhhc2h9KSkpIHtcbiAgICAgICAgICB3aW5kb3cuY29yZG92YS5wbHVnaW5zLm5vdGlmaWNhdGlvbi5sb2NhbC5zY2hlZHVsZSh7XG4gICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgIHRleHQ6IHJvb21NZXNzYWdlLnNlbmRlck5hbWUgKyBcIjogXCIgKyByb29tTWVzc2FnZS5tZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdyb29tJywgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBSb29tSGFzaDogcm9vbU1lc3NhZ2UubWVzc2FnZS5Sb29tSGFzaFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNtYWxsSWNvbjogJ3JlczovL25vdGlmaWNhdGlvbidcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ3Jvb21DcmVhdGVkJywgZnVuY3Rpb24ocm9vbURhdGEpIHtcbiAgICAgICAgaWYgKEJhY2tncm91bmRTZXJ2aWNlLmlzSW5CYWNrZ3JvdW5kKCkpIHtcbiAgICAgICAgICB3aW5kb3cuY29yZG92YS5wbHVnaW5zLm5vdGlmaWNhdGlvbi5sb2NhbC5zY2hlZHVsZSh7XG4gICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgIHRleHQ6IHJvb21EYXRhLmFwcHJvdmVyTmFtZSArIFwiIGp1c3Qgc3RhcnRlZCBhIGNoYXQgd2l0aCB5b3UhXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdyb29tJyxcbiAgICAgICAgICAgICAgUm9vbUhhc2g6IHJvb21NZXNzYWdlLm1lc3NhZ2UuUm9vbUhhc2hcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzbWFsbEljb246ICdyZXM6Ly9ub3RpZmljYXRpb24nXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBldmVudGJ1cy5yZWdpc3Rlckxpc3RlbmVyKCdsZXR0ZXJSZWNlaXZlZCcsIGZ1bmN0aW9uKGxldHRlckRhdGEpIHtcbiAgICAgICAgaWYgKEJhY2tncm91bmRTZXJ2aWNlLmlzSW5CYWNrZ3JvdW5kKCkpIHtcbiAgICAgICAgICB3aW5kb3cuY29yZG92YS5wbHVnaW5zLm5vdGlmaWNhdGlvbi5sb2NhbC5zY2hlZHVsZSh7XG4gICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgIHRleHQ6IFwiWW91J3ZlIHJlY2VpdmVkIGEgbGV0dGVyIVwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICB0eXBlOiAnbGV0dGVyJyxcbiAgICAgICAgICAgICAgTGV0dGVySGFzaDogbGV0dGVyRGF0YS5oYXNoXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc21hbGxJY29uOiAncmVzOi8vbm90aWZpY2F0aW9uJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBMb2NhbE5vdGlmaWNhdGlvbi5jbGVhckxvY2FsTm90aWZpY2F0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh3aW5kb3cuY29yZG92YSkge1xuICAgICAgd2luZG93LmNvcmRvdmEucGx1Z2lucy5ub3RpZmljYXRpb24ubG9jYWwuY2xlYXJBbGwoZnVuY3Rpb24oKSB7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgQmFja2dyb3VuZFNlcnZpY2UucmVnaXN0ZXJPblJlc3VtZShmdW5jdGlvbigpIHtcbiAgICBMb2NhbE5vdGlmaWNhdGlvbi5jbGVhckxvY2FsTm90aWZpY2F0aW9ucygpO1xuICB9KTtcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIiwgcmVnaXN0ZXJMaXN0ZW5lcnMsIGZhbHNlKTtcblxuICByZXR1cm4gTG9jYWxOb3RpZmljYXRpb247XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guc2VydmljZXMnKVxuXG4uc2VydmljZSgnTWF0Y2hTZXJ2aWNlJywgZnVuY3Rpb24oJHEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJEltYWdlQ2FjaGVGYWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tlbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UpIHtcblxuICB2YXIgTWF0Y2hTZXJ2aWNlID0gdGhpcztcblxuICBNYXRjaFNlcnZpY2UucHJldmlvdXNJZCA9ICcnO1xuXG4gIE1hdGNoU2VydmljZS5nZXRNYXRjaCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgaWYgKEF1dGhTZXJ2aWNlLmlzUmVnaXN0ZXJlZCgpKSB7XG4gICAgICB2YXIgZGlzdGFuY2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Rpc3RhbmNlUmFkaXVzJykgPyB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Rpc3RhbmNlUmFkaXVzJykgOiA1MDtcbiAgICAgIHZhciBtaW5BZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21pbkFnZScpID8gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtaW5BZ2UnKSA6IDE4O1xuICAgICAgdmFyIG1heEFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWF4QWdlJykgPyB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21heEFnZScpIDogODA7XG4gICAgICBiYWNrZW5kLmdldE1hdGNoKGRpc3RhbmNlLCBNYXRjaFNlcnZpY2UucHJldmlvdXNJZCwgbWluQWdlLCBtYXhBZ2UpLiRwcm9taXNlXG4gICAgICAudGhlbihmdW5jdGlvbihtYXRjaCkge1xuICAgICAgICBpZiAobWF0Y2guY29kZSA9PT0gMjAwKSB7XG4gICAgICAgICAgJEltYWdlQ2FjaGVGYWN0b3J5LkNhY2hlKFtcbiAgICAgICAgICAgIG1hdGNoLnBpY3R1cmVNZWRcbiAgICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgTWF0Y2hTZXJ2aWNlLnByZXZpb3VzSWQgPSBtYXRjaC5oYXNoZWRJZDtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobWF0Y2gpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guc2VydmljZXMnKVxuXG4uc2VydmljZSgnTm90aWZpY2F0aW9uc1NlcnZpY2UnLCBmdW5jdGlvbigkcSwgYmFja2VuZCkge1xuICB2YXIgY3VycmVudE5vdGlmaWNhdGlvbnMgPSBbXTtcbiAgdmFyIHRhYiA9ICdsZXR0ZXJzJztcblxuICBmdW5jdGlvbiBjb252ZXJ0TGV0dGVyVG9Ob3RpZihsZXR0ZXIpIHtcbiAgICB2YXIgcXVlc3Rpb25zQW5zd2VycyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGV0dGVyLkxldHRlckFuc3dlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBxdWVzdGlvbiA9IGxldHRlci5MZXR0ZXJBbnN3ZXJzW2ldO1xuICAgICAgcXVlc3Rpb25zQW5zd2Vycy5wdXNoKHtcbiAgICAgICAgb3B0aW9uMDogcXVlc3Rpb24uV3lyUXVlc3Rpb24ub3B0aW9uMCxcbiAgICAgICAgb3B0aW9uMTogcXVlc3Rpb24uV3lyUXVlc3Rpb24ub3B0aW9uMSxcbiAgICAgICAgYW5zd2VyOiBxdWVzdGlvbi5hbnN3ZXIsXG4gICAgICAgIGlzQ29ycmVjdDogcXVlc3Rpb24uaXNDb3JyZWN0XG4gICAgICB9KTtcbiAgICB9XG4gICAgdmFyIG1lc3NhZ2UgPSAnYW5zd2VyZWQgeW91ciBxdWVzdGlvbnMuIENsaWNrIGhlcmUgdG8gc2VlICcgKyAobGV0dGVyLlVzZXJBY2NvdW50LmdlbmRlciA9PT0gJ21hbGUnID8gJ2hpcycgOiAnaGVyJykgKyAnIHJlc3BvbnNlcy4nO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogbGV0dGVyLmhhc2gsXG4gICAgICB1c2VySWQ6IGxldHRlci5Vc2VyQWNjb3VudC5oYXNoZWRJZCxcbiAgICAgIGlzUmVhZDogbGV0dGVyLmlzUmVhZCxcbiAgICAgIGNyZWF0ZWRBdDogbGV0dGVyLmNyZWF0ZWRBdCxcbiAgICAgIGZyb206IGxldHRlci5Vc2VyQWNjb3VudC5maXJzdE5hbWUsXG4gICAgICBmcm9tR2VuZGVyOiBsZXR0ZXIuVXNlckFjY291bnQuZ2VuZGVyLFxuICAgICAgYWdlOiAobmV3IERhdGUpLmdldFllYXIoKSAtIG5ldyBEYXRlKGxldHRlci5Vc2VyQWNjb3VudC5iaXJ0aGRheSkuZ2V0WWVhcigpLFxuICAgICAgYmlvOiBsZXR0ZXIuVXNlckFjY291bnQuYmlvLFxuICAgICAgcHJvZmlsZVBpY1RodW1iOiBsZXR0ZXIuVXNlckFjY291bnQucGljdHVyZVRodW1iLFxuICAgICAgcHJvZmlsZVBpY01lZDogbGV0dGVyLlVzZXJBY2NvdW50LnBpY3R1cmVNZWQsXG4gICAgICBxdWVzdGlvbnNBbnN3ZXJzOiBxdWVzdGlvbnNBbnN3ZXJzLFxuICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgIGxpa2VkRGVhbHM6IFtdXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0VGFiOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0YWI7XG4gICAgfSxcblxuICAgIHNldFRhYjogZnVuY3Rpb24obmV3VGFiKSB7XG4gICAgICB0YWIgPSBuZXdUYWI7IFxuICAgIH0sXG5cbiAgICBnZXROb3RpZmljYXRpb25zTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgYmFja2VuZC5nZXRBbGxMZXR0ZXJzKCkuJHByb21pc2VcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGxldHRlcnMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBsZXR0ZXJzLmZvckVhY2goZnVuY3Rpb24obGV0dGVyKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goY29udmVydExldHRlclRvTm90aWYobGV0dGVyKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjdXJyZW50Tm90aWZpY2F0aW9ucyA9IHJlc3VsdDtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgZ2V0TnVtYmVyT2ZOb3RpZmljYXRpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICBiYWNrZW5kLmdldEFsbExldHRlcnMoKS4kcHJvbWlzZVxuICAgICAgLnRoZW4oZnVuY3Rpb24obGV0dGVycykge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICBsZXR0ZXJzLmZvckVhY2goZnVuY3Rpb24obGV0dGVyKSB7XG4gICAgICAgICAgaWYgKCFsZXR0ZXIuaXNSZWFkKSBjb3VudCsrO1xuICAgICAgICB9KTtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb3VudCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICBnZXROb3RpZmljYXRpb25Gcm9tSWQ6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICBpZiAoY3VycmVudE5vdGlmaWNhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuZ2V0Tm90aWZpY2F0aW9uc0xpc3QoKS50aGVuKGZ1bmN0aW9uKG5vdGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgIGN1cnJlbnROb3RpZmljYXRpb25zLmZvckVhY2goZnVuY3Rpb24obm90aWYpIHtcbiAgICAgICAgICAgIGlmIChub3RpZi5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKG5vdGlmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoe30pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY3VycmVudE5vdGlmaWNhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihub3RpZikge1xuICAgICAgICAgIGlmIChub3RpZi5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobm90aWYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdsZXR0ZXJib3guc2VydmljZXMnKVxuXG4uc2VydmljZSgnUHJvZmlsZVNlcnZpY2UnLCBmdW5jdGlvbigkcSwgYmFja2VuZCkge1xuICByZXR1cm4ge1xuICAgIGdldFByb2ZpbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgIGJhY2tlbmQuZ2V0VXNlclNlbGYoKS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShwcm9maWxlKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSxcblxuICAgIGdldE90aGVyUHJvZmlsZTogZnVuY3Rpb24odXNlcklkKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgYmFja2VuZC5nZXRPdGhlclVzZXIodXNlcklkKS4kcHJvbWlzZVxuICAgICAgLnRoZW4oZnVuY3Rpb24odXNlcikge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHVzZXIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgZ2V0TmV3UXVlc3Rpb246IGZ1bmN0aW9uKHFuSWRzKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgYmFja2VuZC5nZXRPbmVSYW5kb21RdWVzdGlvbihxbklkcykuJHByb21pc2UudGhlbihmdW5jdGlvbihxbil7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUocW4pO1xuICAgICAgfSwgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShudWxsKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSxcblxuICAgIHVwZGF0ZUJpbzogZnVuY3Rpb24oYmlvKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgYmFja2VuZC51cGRhdGVVc2VyQmlvKGJpbywgZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXMpO1xuICAgICAgfSwgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShudWxsKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSxcblxuICAgIHVwZGF0ZVF1ZXN0aW9uczogZnVuY3Rpb24ocXVlc3Rpb25zKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgYmFja2VuZC5zZXRRdWVzdGlvbnNBbmRBbnN3ZXJzKHF1ZXN0aW9ucywgZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXMpO1xuICAgICAgfSwgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShudWxsKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSxcblxuICAgIGdldFByb2ZpbGVQaWN0dXJlczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgYmFja2VuZC5nZXRQcm9maWxlUGhvdG9zKCkuJHByb21pc2UudGhlbihmdW5jdGlvbihwaG90b3MpIHtcbiAgICAgICAgdmFyIHBpY3R1cmVzID0gW107XG4gICAgICAgIHBob3Rvcy5mb3JFYWNoKGZ1bmN0aW9uKHBob3RvKSB7XG4gICAgICAgICAgcGljdHVyZXMucHVzaChwaG90byk7XG4gICAgICAgIH0pO1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHBpY3R1cmVzKTtcbiAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSxcblxuICAgIHVwZGF0ZVByb2ZpbGVQaWN0dXJlOiBmdW5jdGlvbihwaWN0dXJlSWQpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICBiYWNrZW5kLnNldFByb2ZpbGVQaG90byhwaWN0dXJlSWQsIGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCk7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gIH1cbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5zZXJ2aWNlcycpXG5cbi5zZXJ2aWNlKCdQdXNoU2VydmljZScsIGZ1bmN0aW9uKGJhY2tlbmQpIHtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGVQdXNoVG9rZW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwdXNoVG9rZW4nKTtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBiYWNrZW5kLnVwZGF0ZVB1c2hUb2tlbih0b2tlbik7XG4gICAgICB9XG4gICAgfVxuICB9O1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnbGV0dGVyYm94LnNlcnZpY2VzJylcblxuLnNlcnZpY2UoJ1JlcG9ydFNlcnZpY2UnLCBmdW5jdGlvbigkcSwgJGlvbmljUG9wdXAsIGJhY2tlbmQpIHtcbiAgdmFyIFJlcG9ydFNlcnZpY2UgPSB7fTtcblxuICBSZXBvcnRTZXJ2aWNlLnJlcG9ydFVzZXIgPSBmdW5jdGlvbih1c2VySWQsIHJlYXNvbikge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgYmFja2VuZC5yZXBvcnRVc2VyKHVzZXJJZCwgcmVhc29uLCBkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIFJlcG9ydFNlcnZpY2Uuc2hvd1JlcG9ydFBvcHVwID0gZnVuY3Rpb24odXNlck5hbWUsIHVzZXJJZCwgJHNjb3BlLCBjYWxsYmFjaykge1xuICAgICRzY29wZS5yZXBvcnQgPSB7XG4gICAgICByZWFzb246ICcnXG4gICAgfTtcblxuICAgICRzY29wZS53YXJuaW5nID0gJyc7XG5cbiAgICByZXR1cm4gJGlvbmljUG9wdXAuc2hvdyh7XG4gICAgICB0ZW1wbGF0ZTogJzx0ZXh0YXJlYSBuZy1tb2RlbD1cInJlcG9ydC5yZWFzb25cIj48L3RleHRhcmVhPjxwIGNsYXNzPVwid2FybmluZ1wiPnt7IHdhcm5pbmcgfX08L3A+JyxcbiAgICAgIHRpdGxlOiAnUmVwb3J0ICcgKyB1c2VyTmFtZSArICc/JyxcbiAgICAgIHN1YlRpdGxlOiAnUGxlYXNlIGVudGVyIGEgcmVhc29uIGJlaGluZCB0aGlzIHJlcG9ydCcsXG4gICAgICBjc3NDbGFzczogJ3BvcHVwLWFsZXJ0JyxcbiAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICBidXR0b25zOiBbe1xuICAgICAgICB0ZXh0OiAnQ2FuY2VsJ1xuICAgICAgfSwge1xuICAgICAgICB0ZXh0OiAnUmVwb3J0JyxcbiAgICAgICAgdHlwZTogJ2J1dHRvbi1wb3NpdGl2ZScsXG4gICAgICAgIG9uVGFwOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgaWYgKCEkc2NvcGUucmVwb3J0LnJlYXNvbiB8fCAkc2NvcGUucmVwb3J0LnJlYXNvbi5sZW5ndGggPD0gMTApIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICRzY29wZS53YXJuaW5nID0gXCJQbGVhc2UgZW50ZXIgYSByZWFzb24gYXQgbGVhc3QgMTAgY2hhcmFjdGVycyBsb25nLlwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBSZXBvcnRTZXJ2aWNlLnJlcG9ydFVzZXIodXNlcklkLCAkc2NvcGUucmVwb3J0LnJlYXNvbilcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAkc2NvcGUucmVwb3J0LnJlYXNvbiA9ICcnO1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfV1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gUmVwb3J0U2VydmljZTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5zZXJ2aWNlcycpXG5cbi5zZXJ2aWNlKCdSb29tc1NlcnZpY2UnLCBmdW5jdGlvbigkcSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERiU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudGJ1cykge1xuXG4gIHZhciBSb29tc1NlcnZpY2UgPSB7fTtcbiAgdmFyIHJvb21zQ2FjaGUgPSBbXTtcbiAgdmFyIGNoYXRzID0gW107XG4gIHZhciBjaGF0c1BhZ2VTY29wZSA9IG51bGw7XG4gIHZhciBub3RpZnNQYWdlU2NvcGUgPSBudWxsO1xuXG4gIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ3Jvb21zVXBkYXRlZCcsIGZ1bmN0aW9uKHJvb21zKSB7XG4gICAgcm9vbXNDYWNoZSA9IHJvb21zO1xuICAgIHVwZGF0ZUNoYXRzKHJvb21zKTtcbiAgfSk7XG5cbiAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcigncm9vbVJlYWQnLCBmdW5jdGlvbihyb29tUmVhZCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaGF0ID0gY2hhdHNbaV07XG4gICAgICBpZiAoY2hhdC5pZCA9PT0gcm9vbVJlYWQucm9vbUhhc2gpIHtcbiAgICAgICAgY2hhdC51bnJlYWRfY291bnQgPSAwO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgZXZlbnRidXMuY2FsbCgndW5yZWFkQ291bnRDaGFuZ2VkJyk7XG4gIH0pO1xuXG4gIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ3Jvb21NZXNzYWdlJywgZnVuY3Rpb24ocm9vbU1lc3NhZ2UpIHtcbiAgICB2YXIgbWVzc2FnZSA9IHJvb21NZXNzYWdlLm1lc3NhZ2U7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGF0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGNoYXRzW2ldLmlkID09PSBtZXNzYWdlLlJvb21IYXNoKSB7XG4gICAgICAgIGNoYXRzW2ldLmxhc3RfbWVzc2FnZSA9IChtZXNzYWdlLnNlbmRlciA9PT0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoYXNoZWRJZCcpID8gJ1lvdTogJyA6IGNoYXRzW2ldLmZyb20gKyAnOiAnKSArIG1lc3NhZ2UuY29udGVudDtcbiAgICAgICAgY2hhdHNbaV0ubGFzdF9hY3Rpdml0eSA9IG5ldyBEYXRlKG1lc3NhZ2UudGltZVNlbnQpO1xuICAgICAgICBpZiAobWVzc2FnZS5zZW5kZXIgIT09IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaGFzaGVkSWQnKSkge1xuICAgICAgICAgIGNoYXRzW2ldLnVucmVhZF9jb3VudCsrO1xuICAgICAgICAgIGV2ZW50YnVzLmNhbGwoJ3VucmVhZENvdW50Q2hhbmdlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBjaGF0cy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBiLmxhc3RfYWN0aXZpdHkuZ2V0VGltZSgpIC0gYS5sYXN0X2FjdGl2aXR5LmdldFRpbWUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZm9ybWF0Q2hhdChyb29tKSB7XG4gICAgdmFyIGxhdGVzdE1lc3NhZ2UgPSByb29tLmxhdGVzdE1lc3NhZ2U7XG4gICAgdmFyIGxhc3RfbWVzc2FnZSA9IGxhdGVzdE1lc3NhZ2UuY29udGVudCA/IChsYXRlc3RNZXNzYWdlLnNlbmRlciA9PT0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoYXNoZWRJZCcpID8gJ1lvdTogJyA6IHJvb20udXNlck5hbWUgKyAnOiAnKSArIGxhdGVzdE1lc3NhZ2UuY29udGVudCA6ICdObyBtZXNzYWdlcyB5ZXQnO1xuICAgIHZhciBsYXN0X2FjdGl2aXR5ID0gbGF0ZXN0TWVzc2FnZS50aW1lU2VudCA/IG5ldyBEYXRlKGxhdGVzdE1lc3NhZ2UudGltZVNlbnQpIDogbmV3IERhdGUocm9vbS5jcmVhdGVkQXQpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogcm9vbS5oYXNoLFxuICAgICAgZnJvbTogcm9vbS51c2VyTmFtZSxcbiAgICAgIHByb2ZpbGVfcGljOiByb29tLnRodW1ibmFpbCxcbiAgICAgIGxhc3RfbWVzc2FnZTogbGFzdF9tZXNzYWdlLFxuICAgICAgbGFzdF9hY3Rpdml0eTogbGFzdF9hY3Rpdml0eSxcbiAgICAgIHVucmVhZF9jb3VudDogcm9vbS51bnJlYWRDb3VudFxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVDaGF0cyhyb29tcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm9vbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByb29tID0gcm9vbXNbaV07XG4gICAgICBSb29tc1NlcnZpY2UuZ2V0TGF0ZXN0Um9vbUluZm8ocm9vbS5oYXNoKS50aGVuKGZ1bmN0aW9uKHJvb20pIHtcbiAgICAgICAgdmFyIGNoYXQgPSBmb3JtYXRDaGF0KHJvb20pO1xuICAgICAgICB2YXIgY2hhdFByZXNlbnQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGNoYXRNb2RpZmllZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoYXRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgaWYgKGNoYXRzW2pdLmlkID09PSBjaGF0LmlkKSB7XG4gICAgICAgICAgICBpZiAoY2hhdHNbal0ubGFzdF9tZXNzYWdlICE9PSBjaGF0Lmxhc3RfbWVzc2FnZSkge1xuICAgICAgICAgICAgICBjaGF0c1tqXS5sYXN0X21lc3NhZ2UgPSBjaGF0Lmxhc3RfbWVzc2FnZTtcbiAgICAgICAgICAgICAgY2hhdE1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGF0c1tqXS5sYXN0X2FjdGl2aXR5LmdldFRpbWUoKSAhPT0gY2hhdC5sYXN0X2FjdGl2aXR5LmdldFRpbWUoKSkge1xuICAgICAgICAgICAgICBjaGF0c1tqXS5sYXN0X2FjdGl2aXR5ID0gY2hhdC5sYXN0X2FjdGl2aXR5O1xuICAgICAgICAgICAgICBjaGF0TW9kaWZpZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYXRzW2pdLnVucmVhZF9jb3VudCAhPT0gY2hhdC51bnJlYWRfY291bnQpIHtcbiAgICAgICAgICAgICAgY2hhdHNbal0udW5yZWFkX2NvdW50ID0gY2hhdC51bnJlYWRfY291bnQ7XG4gICAgICAgICAgICAgIGV2ZW50YnVzLmNhbGwoJ3VucmVhZENvdW50Q2hhbmdlZCcpO1xuICAgICAgICAgICAgICBjaGF0TW9kaWZpZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hhdFByZXNlbnQgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghY2hhdFByZXNlbnQpIHtcbiAgICAgICAgICBjaGF0cy5wdXNoKGNoYXQpO1xuICAgICAgICAgIGlmIChjaGF0LnVucmVhZF9jb3VudCkgZXZlbnRidXMuY2FsbCgndW5yZWFkQ291bnRDaGFuZ2VkJyk7XG4gICAgICAgICAgY2hhdE1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhdE1vZGlmaWVkKSB7XG4gICAgICAgICAgY2hhdHMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYi5sYXN0X2FjdGl2aXR5LmdldFRpbWUoKSAtIGEubGFzdF9hY3Rpdml0eS5nZXRUaW1lKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGNoYXRzUGFnZVNjb3BlKSBjaGF0c1BhZ2VTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICBpZiAobm90aWZzUGFnZVNjb3BlKSBub3RpZnNQYWdlU2NvcGUuJGFwcGx5KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIFJvb21zU2VydmljZS5nZXRUb3RhbFVucmVhZENvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICB2YXIgdG90YWwgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRvdGFsICs9IGNoYXRzW2ldLnVucmVhZF9jb3VudDtcbiAgICB9XG4gICAgZGVmZXJyZWQucmVzb2x2ZSh0b3RhbCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgUm9vbXNTZXJ2aWNlLnNldENoYXRzUGFnZVNjb3BlID0gZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgY2hhdHNQYWdlU2NvcGUgPSAkc2NvcGU7XG4gIH07XG5cbiAgUm9vbXNTZXJ2aWNlLnNldE5vdGlmc1BhZ2VTY29wZSA9IGZ1bmN0aW9uKCRzY29wZSkge1xuICAgIG5vdGlmc1BhZ2VTY29wZSA9ICRzY29wZTtcbiAgfTtcblxuICBSb29tc1NlcnZpY2UuZ2V0Q2hhdHMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gY2hhdHM7XG4gIH07XG5cbiAgUm9vbXNTZXJ2aWNlLmdldFJvb20gPSBmdW5jdGlvbihoYXNoKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb29tc0NhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocm9vbXNDYWNoZVtpXS5oYXNoID09PSBoYXNoKSByZXR1cm4gcm9vbXNDYWNoZVtpXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgUm9vbXNTZXJ2aWNlLmdldExhdGVzdFJvb21JbmZvID0gZnVuY3Rpb24oaGFzaCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgaWYgKCF3aW5kb3cuY29yZG92YSB8fCAhRGJTZXJ2aWNlLmlzSW5pdGlhbGl6ZWQoKSkge1xuICAgICAgYmFja2VuZC5nZXRTaW5nbGVSb29tKGhhc2gpLiRwcm9taXNlXG4gICAgICAudGhlbihmdW5jdGlvbihyb29tKSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUocm9vbSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgRGJTZXJ2aWNlLmdldFNpbmdsZVJvb20oaGFzaClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJvb20pIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyb29tKTtcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9O1xuXG4gIFJvb21zU2VydmljZS51cGRhdGVSb29tcyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghd2luZG93LmNvcmRvdmEgfHwgIURiU2VydmljZS5pc0luaXRpYWxpemVkKCkpIHtcbiAgICAgIGJhY2tlbmQuZ2V0Um9vbXMoKS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJvb21zKSB7XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgcm9vbXMuZm9yRWFjaChmdW5jdGlvbihyb29tKSB7XG4gICAgICAgICAgcmVzLnB1c2gocm9vbSk7XG4gICAgICAgIH0pO1xuICAgICAgICBldmVudGJ1cy5jYWxsKCdyb29tc1VwZGF0ZWQnLCByZXMpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIERiU2VydmljZS5nZXRSb29tcygpLnRoZW4oZnVuY3Rpb24ocm9vbXMpIHtcbiAgICAgICAgZXZlbnRidXMuY2FsbCgncm9vbXNVcGRhdGVkJywgcm9vbXMpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIFJvb21zU2VydmljZS5nZXRSb29tTGV0dGVyID0gZnVuY3Rpb24oaGFzaCkge1xuICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgYmFja2VuZC5nZXRTaW5nbGVSb29tKGhhc2gpLiRwcm9taXNlXG4gICAgLnRoZW4oZnVuY3Rpb24ocm9vbSkge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZShyb29tLmxldHRlcik7XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICBldmVudGJ1cy5yZWdpc3Rlckxpc3RlbmVyKCdsb2dpbkNvbXBsZXRlZCcsIFJvb21zU2VydmljZS51cGRhdGVSb29tcyk7XG5cbiAgcmV0dXJuIFJvb21zU2VydmljZTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5zZXJ2aWNlcycpXG5cbi5zZXJ2aWNlKCdzb2NrZXQnLCBmdW5jdGlvbigkcSwgZXZlbnRidXMpIHtcbiAgdmFyIFVSTCA9ICdodHRwOi8vZWMyLTUyLTc0LTEzOC0xNzcuYXAtc291dGhlYXN0LTEuY29tcHV0ZS5hbWF6b25hd3MuY29tJztcbiAgLy8gdmFyIFVSTCA9ICdodHRwOi8vbG9jYWxob3N0OjgwODAnO1xuXG4gIHZhciBJT0NvbnRhaW5lciA9IHtcbiAgICBpc0luaXRpYWxpemVkOiBmYWxzZSxcbiAgICBzb2NrZXRpbzogbnVsbFxuICB9O1xuICB2YXIgU29ja2V0U2VydmljZSA9IHt9O1xuXG4gIFNvY2tldFNlcnZpY2UudW5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgSU9Db250YWluZXIuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIElPQ29udGFpbmVyLnNvY2tldGlvLmRpc2Nvbm5lY3QoKTtcbiAgICBJT0NvbnRhaW5lci5zb2NrZXRpbyA9IG51bGw7XG4gIH07XG5cbiAgU29ja2V0U2VydmljZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBTb2NrZXQgSU8uLi4nKTtcbiAgICB2YXIgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7XG4gICAgaWYgKCFJT0NvbnRhaW5lci5pc0luaXRpYWxpemVkICYmIHRva2VuKSB7XG4gICAgICBJT0NvbnRhaW5lci5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIElPQ29udGFpbmVyLnNvY2tldGlvID0gaW8uY29ubmVjdChVUkwsIHtcbiAgICAgICAgJ3F1ZXJ5JzogJ3Rva2VuPScgKyB0b2tlblxuICAgICAgfSk7XG4gICAgICBJT0NvbnRhaW5lci5zb2NrZXRpby5jb25uZWN0KCk7XG4gICAgICBJT0NvbnRhaW5lci5zb2NrZXRpby5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBldmVudGJ1cy5jYWxsKCdzb2NrZXRDb25uZWN0ZWQnKTtcbiAgICAgIH0pO1xuICAgICAgSU9Db250YWluZXIuc29ja2V0aW8ub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXZlbnRidXMuY2FsbCgnc29ja2V0RGlzY29ubmVjdGVkJyk7XG4gICAgICB9KTtcbiAgICAgIElPQ29udGFpbmVyLnNvY2tldGlvLm9uKCdyb29tQ3JlYXRlZCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgZXZlbnRidXMuY2FsbCgncm9vbUNyZWF0ZWQnLCBkYXRhKTtcbiAgICAgIH0pO1xuICAgICAgSU9Db250YWluZXIuc29ja2V0aW8ub24oJ3Jvb21NZXNzYWdlJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBldmVudGJ1cy5jYWxsKCdyb29tTWVzc2FnZScsIGRhdGEpO1xuICAgICAgfSk7XG4gICAgICBJT0NvbnRhaW5lci5zb2NrZXRpby5vbignbGV0dGVyJywgZnVuY3Rpb24obGV0dGVyKSB7XG4gICAgICAgIGV2ZW50YnVzLmNhbGwoJ2xldHRlclJlY2VpdmVkJywgbGV0dGVyKTtcbiAgICAgIH0pO1xuICAgICAgSU9Db250YWluZXIuc29ja2V0aW8ub24oJ3Jvb21SZWFkJywgZnVuY3Rpb24ocm9vbVJlYWQpIHtcbiAgICAgICAgZXZlbnRidXMuY2FsbCgncm9vbVJlYWQnLCByb29tUmVhZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgU29ja2V0U2VydmljZS5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBJT0NvbnRhaW5lci5pc0luaXRpYWxpemVkICYmIElPQ29udGFpbmVyLnNvY2tldGlvLmNvbm5lY3RlZDtcbiAgfTtcblxuICBTb2NrZXRTZXJ2aWNlLnJvb21SZWFkID0gZnVuY3Rpb24ocm9vbUhhc2gsIHRpbWUpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIGlmIChTb2NrZXRTZXJ2aWNlLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgIHZhciByb29tUmVhZCA9IHtcbiAgICAgICAgcm9vbUhhc2g6IHJvb21IYXNoLFxuICAgICAgICB0aW1lOiB0aW1lXG4gICAgICB9O1xuICAgICAgSU9Db250YWluZXIuc29ja2V0aW8uZW1pdCgncm9vbVJlYWQnLCByb29tUmVhZCk7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKHJvb21SZWFkKTtcbiAgICB9IGVsc2UgaWYgKElPQ29udGFpbmVyLmlzSW5pdGlhbGl6ZWQgJiYgSU9Db250YWluZXIuc29ja2V0aW8uY29ubmVjdGVkKSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3Qoe2Vycm9yOiAnc29ja2V0aW8gbm90IGNvbm5lY3RlZCd9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVmZXJyZWQucmVqZWN0KHtlcnJvcjogJ3NvY2tldGlvIG5vdCBpbml0aWFsaXplZCd9KTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgU29ja2V0U2VydmljZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uKHJvb21IYXNoLCBtZXNzYWdlKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICBpZiAoU29ja2V0U2VydmljZS5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9IHtcbiAgICAgICAgcm9vbUhhc2g6IHJvb21IYXNoLFxuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB0eXBlOiAnbWVzc2FnZSdcbiAgICAgIH07XG4gICAgICBJT0NvbnRhaW5lci5zb2NrZXRpby5lbWl0KCdyb29tTWVzc2FnZScsIG1lc3NhZ2UpO1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZShtZXNzYWdlKTtcbiAgICB9IGVsc2UgaWYgKElPQ29udGFpbmVyLmlzSW5pdGlhbGl6ZWQgJiYgSU9Db250YWluZXIuc29ja2V0aW8uY29ubmVjdGVkKSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3Qoe2Vycm9yOiAnc29ja2V0aW8gbm90IGNvbm5lY3RlZCd9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVmZXJyZWQucmVqZWN0KHtlcnJvcjogJ3NvY2tldGlvIG5vdCBpbml0aWFsaXplZCd9KTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cbiAgU29ja2V0U2VydmljZS5zaGFyZURlYWwgPSBmdW5jdGlvbihyb29tSGFzaCwgbWVzc2FnZSwgZGVhbElkKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICBpZiAoU29ja2V0U2VydmljZS5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9IHtcbiAgICAgICAgcm9vbUhhc2g6IHJvb21IYXNoLFxuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICB0eXBlOiAnc2hhcmUnLFxuICAgICAgICBkZWFsSWQ6IGRlYWxJZFxuICAgICAgfTtcbiAgICAgIElPQ29udGFpbmVyLnNvY2tldGlvLmVtaXQoJ3Jvb21NZXNzYWdlJywgbWVzc2FnZSk7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKG1lc3NhZ2UpO1xuICAgIH0gZWxzZSBpZiAoSU9Db250YWluZXIuaXNJbml0aWFsaXplZCAmJiBJT0NvbnRhaW5lci5zb2NrZXRpby5jb25uZWN0ZWQpIHtcbiAgICAgIGRlZmVycmVkLnJlamVjdCh7ZXJyb3I6ICdzb2NrZXRpbyBub3QgY29ubmVjdGVkJ30pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3Qoe2Vycm9yOiAnc29ja2V0aW8gbm90IGluaXRpYWxpemVkJ30pO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICByZXR1cm4gU29ja2V0U2VydmljZTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2xldHRlcmJveC5zZXJ2aWNlcycpXG5cbi5zZXJ2aWNlKCdWaWJyYXRlU2VydmljZScsIGZ1bmN0aW9uKCRjb3Jkb3ZhVmlicmF0aW9uLCAkc3RhdGUsIENoYXRTZXJ2aWNlLCBldmVudGJ1cykge1xuICBmdW5jdGlvbiB2aWJyYXRlKCkge1xuICAgICRjb3Jkb3ZhVmlicmF0aW9uLnZpYnJhdGUoMTAwKTtcbiAgfVxuICBcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsIGZ1bmN0aW9uKCkge1xuICAgIGlmICh3aW5kb3cuY29yZG92YSkge1xuICAgICAgZXZlbnRidXMucmVnaXN0ZXJMaXN0ZW5lcigncm9vbUNyZWF0ZWQnLCB2aWJyYXRlKTtcbiAgICAgIGV2ZW50YnVzLnJlZ2lzdGVyTGlzdGVuZXIoJ2xldHRlclJlY2VpdmVkJywgdmlicmF0ZSk7XG4gICAgfVxuICB9LCBmYWxzZSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
